if (self.CavalryLogger) { CavalryLogger.start_js(["Xu+mA"]); }

__d("SLPerfTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:SLPerfLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:SLPerfLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:SLPerfLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setCount=function(a){this.$1.count=a;return this};a.prototype.setDurationMs=function(a){this.$1.duration_ms=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={count:!0,duration_ms:!0,event:!0,vc:!0};e.exports=a}),null);
__d("SLUtils",["csx","cx","Arbiter","DOM","Event","FeedAdsClickLogger","LitestandMessages","LitestandStream","MutationObserver","Run","SLConfig","SLPerfTypedLogger","URI","clearTimeout","curry","cxodecode","goURI","joinClasses","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=!1,j=[],k=!!(a.MutationObserver||a.WebKitMutationObserver);function c(a,c){__p&&__p();if(i)return;i=!0;if(!b("SLConfig").gk.s_link_utils)return;K()&&(M().setEvent("init").log(),O("init_timer"));l();b("SLConfig").gk.sl_replace_about_link&&q(function(a,b){return r(a,b)});b("SLConfig").gk.sl_replace_s&&(function(){__p&&__p();D(a);var d=c.map(function(a){return{nonce:b("cxodecode")(a.nonce),className:b("cxodecode")(a.className)}});q(function(a,c){d.forEach(function(c){var d=b("DOM").scry(a,c.nonce);d.forEach(function(a){while(a.firstChild)a.removeChild(a.firstChild);a.className=b("joinClasses")(a.className,c.className)})})})})();if(b("SLConfig").gk.sl_replace_subtitle&&k){var d=I(),e=new(b("MutationObserver"))(function(){return A()});e.observe(d,{childList:!0,subtree:!0});G();q(function(a,b){y(a,b),z(b)})}n();K()&&M().setEvent("init_duration").setDurationMs(P("init_timer")).log()}function l(){b("Arbiter").subscribe(b("LitestandMessages").STORIES_INSERTED,n),b("Arbiter").subscribe("FeedAdsClickLogger/refreshTrackingData",n,b("Arbiter").SUBSCRIBE_NEW)}function d(){K()&&O("cleanup_timer"),j.forEach(function(a){a.unsubscribe()}),i=!1,j=[],K()&&M().setEvent("cleanup_duration").setDurationMs(P("cleanup_timer")).log()}var m=null;function n(){__p&&__p();K()&&O("hsa_timer");b("clearTimeout")(m);m=null;var a=[],c=u(),d=J(),e=!1;d.forEach(function(b){__p&&__p();if(!b.id)return;if(c.has(b.id))return;if(!x(b,b.id)){e=!0;return}c.set(b.id,b);a.push([b,b.id])});e&&(m=b("setTimeoutAcrossTransitions")(n,b("SLConfig").sv.sl_content_waiting_delay),K()&&M().setEvent("hsa_waiting_for_content").log());K()&&M().setEvent("hsa_stories_added").setCount(a.length).log();if(a.length===0)return;a.forEach(function(a){var b=a[0],c=a[1];return p().forEach(function(a){return a(b,c)})});K()&&M().setEvent("hsa_duration").setDurationMs(P("hsa_timer")).log()}var o=[];function p(){return o}function q(a){o.push(a)}function r(a,c){__p&&__p();a=x(a,c);if(!a){K()&&M().setEvent("usl_real_subtitle_missing").log();return}c=b("DOM").scry(a,"a");a=c.filter(function(a){a=new(b("URI"))(a.href).getPath();return a==="/ads/about"||a==="/about/ads"});K()&&M().setEvent("usl_links_updated").setCount(a.length).log();a.forEach(function(a){var c=b("FeedAdsClickLogger").buildURL(a);b("Event").listen(a,"click",b("curry")(s,c));a.href="#"})}function s(a,c){b("goURI")(a.toString().replace("__md__=0","__md__=1")),b("Event").stop(c)}var t=new Map();function u(){return t}var v=new Map(),w=new Map();function x(a,c){var d=null;v.has(c)?d=v.get(c):d=a;c=b("DOM").scry(d,"._5pcp");if(c.length===0)return null;else return c[0]}function y(a,c){__p&&__p();if(v.has(c)||w.has(c))return;var d=F();if(!d){K()&&M().setEvent("es_subtitle_container_missing").log();return}a=b("DOM").scry(a,"._5pcp");K()&&M().setEvent("es_subtitle_count").setCount(a.length).log();if(a.length===0)return;a=a[0];var e=a.parentNode;if(!a||!e)return;e=B();a.parentNode.replaceChild(e,a);a=C(a);d.appendChild(a);v.set(c,a);w.set(c,e)}function z(a){__p&&__p();L()&&O("usp_timer");var b=I();if(!b){K()&&M().setEvent("usp_feed_root_missing").log();return}var c=w.get(a);if(!c){K()&&M().setEvent("usp_fake_missing").log();return}a=v.get(a);if(!a){K()&&M().setEvent("usp_real_missing").log();return}b=b.getBoundingClientRect();c=c.getBoundingClientRect();var d=c.top!==0&&c.left!==0;a.style.display=d?"initial":"none";a.style.top=c.top-b.top+"px";a.style.left=c.left-b.left+"px";L()&&M().setEvent("usp_duration").setDurationMs(P("usp_timer")).log()}function A(){L()&&O("eausp_duration");H();var a=u();a.forEach(function(a,b){y(a,b),z(b)});L()&&M().setEvent("eausp_duration").setDurationMs(P("eausp_duration")).setCount(a.size).log()}function B(){return b("DOM").create("div",{"class":"_4kgx"})}function C(a){return b("DOM").create("div",{style:"position: absolute; z-index: 1;"},a)}function D(a){var c=document.createElement("style");c.type="text/css";c.textContent=b("cxodecode")(a);document.getElementsByTagName("head")[0].appendChild(c)}var E=null;function F(){return E}function G(){if(E)return;var a=I();E=b("DOM").create("div",{style:"position: relative;"});a.insertBefore(E,a.firstChild)}function H(){if(!E)return;var a=I();if(E.parentNode===a)return;b("DOM").remove(E);a.insertBefore(E,a.firstChild)}function I(){return b("LitestandStream").getStreamRoot()||document.body}function J(){return b("DOM").scry(I(),"._5pat")}function K(){return!!b("SLConfig").gk.sl_perf_logging}function L(){return!!b("SLConfig").gk.sl_perf_logging_heavy}function M(){return new(b("SLPerfTypedLogger"))()}var N=new Map();function O(a){N.set(a,Date.now())}function P(a){a=N.get(a);return a==null?-1:Date.now()-a}b("Run").onBeforeUnload(d);f={init:c};e.exports=f}),null);
__d("EntstreamFeedObjectTracking",["csx","CSS","DOM","EntstreamFeedObject","Focus","ge"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=new Map();e.exports={register:function(a){var c=this.getRoot(a.nodeID);if(!c)return;var d=b("DOM").scry(c,"._5v9_"),e=d&&d.length?d:[c];a.actorIDs.forEach(function(a){var b=[].concat(h.get(a)||[]);b.push.apply(b,e);h.set(a,b)})},hideAllFromActor:function(a){var c=this.getRoot(a.nodeID);(h.get(a.actorID)||[]).forEach(function(a){if(a===c)return;b("CSS").hide(a)})},unhideAllFromActor:function(a){var c=this.getRoot(a.nodeID);(h.get(a.actorID)||[]).forEach(function(a){b("CSS").show(a)});c&&b("Focus").setWithoutOutline(c)},getRoot:function(a){a=b("ge")(a);return a?b("EntstreamFeedObject").getRoot(a):null}}}),null);
__d("FeedTrackingAsync",["Arbiter","Run","collectDataAttributes"],(function(a,b,c,d,e,f){__p&&__p();var g;e.exports.init=function(){__p&&__p();if(g)return;g=b("Arbiter").subscribe("AsyncRequest/send",function(a,c){a=c.request;c=a.getRelativeTo();if(c){a=a.getData();c=b("collectDataAttributes")(c,["ft"]);c.ft&&Object.keys(c.ft).length&&Object.assign(a,c)}});b("Run").onLeave(function(){g&&(g.unsubscribe(),g=null)})}}),null);
__d("AsyncLayout",["AjaxPipeRequest","Arbiter","AsyncRequest","AsyncResponse","CSS","FaceliftGating","DOM","HTML","NavigationMessage","PageTransitionsRegistrar","URI","$","emptyFunction","ge","goURI","requireWeak"],(function(a,b,c,d,e,f){__p&&__p();var g;b("requireWeak")("PageTransitions",function(a){g=a});function a(a){"use strict";this.canvasID=a,b("ge")("rightCol")&&(this.auxiliaryID="rightCol"),b("ge")("headerArea")&&(this.headerID="headerArea"),b("ge")("toolbarContainer")&&(this.toolbarID="toolbarContainer"),this.waitingForAux=!1,b("PageTransitionsRegistrar").registerHandler(this.catchPageTransition.bind(this)),this.subscription=b("Arbiter").subscribe(b("NavigationMessage").NAVIGATION_BEGIN,this.onNavigate.bind(this)),b("Arbiter").inform("AsyncLayout/initialized",null,b("Arbiter").BEHAVIOR_STATE)}a.prototype.catchPageTransition=function(a){"use strict";this.subscription.unsubscribe();return!1};a.prototype.getCanvasID=function(a){"use strict";return a.sidecol?"contentCol":"contentArea"};a.prototype.onNavigate=function(a,c){"use strict";__p&&__p();a=c.useAjaxPipe;c=c.params;if(c.endpoint){this.request&&(this.request.setFinallyHandler(b("emptyFunction")),this.request.abort());if(a)c.xui_grid=b("FaceliftGating").hasXUIGrid,this.request=new(b("AjaxPipeRequest"))(this.getCanvasID(c),c.endpoint).setData(c).setFinallyHandler(this.finallyHandler.bind(this)).setErrorHandler(this.errorHandler.bind(this)).setFirstResponseCallback(this.firstResponseCallback.bind(this)).send();else{c.handled=!0;this.waitingForAux=c.sidecol;a=!!c.iframe;a=new(b("AsyncRequest"))().setOption("useIframeTransport",a).setURI(new(b("URI"))(c.endpoint)).setReadOnly(!0).setMethod("GET").setData(c).setHandler(this.onResponse.bind(this)).setErrorHandler(this.errorHandler.bind(this)).setFinallyHandler(this.finallyHandler.bind(this));this.request=a;a.send()}}};a.prototype.receivedAux=function(a){"use strict";this.waitingForAux||!1,this.waitingForAux=!1,b("DOM").setContent(b("$")(this.auxiliaryID),b("HTML")(a))};a.prototype.onResponse=function(a){"use strict";__p&&__p();var c=a.getPayload();if(c.redirect)b("goURI")(c.redirect);else{var d=c.html||c;b("DOM").setContent(b("$")(this.canvasID),b("HTML")(d));c.side_html&&this.auxiliaryID&&this.receivedAux(c.side_html);if(this.headerID&&!c.keep_header){d=b("$")(this.headerID);b("DOM").setContent(d,b("HTML")(c.header_html||""));b("CSS").conditionShow(d,c.header_html)}c.toolbar_html&&this.toolbarID&&b("DOM").setContent(b("$")(this.toolbarID),b("HTML")(c.toolbar_html));c.js&&new Function(c.js)();b("CSS").conditionClass(b("$")("contentCol"),"hasRightCol",this.auxiliaryID&&!c.noRightSide);d=b("ge")("rightCol");d&&c.noRightSide&&b("DOM").empty(d)}c=a.getRequest().getData();b("Arbiter").inform(b("NavigationMessage").NAVIGATION_COMPLETED,c.key)};a.prototype.errorHandler=function(a){"use strict";b("AsyncResponse").verboseErrorHandler(a),b("Arbiter").inform(b("NavigationMessage").NAVIGATION_FAILED),this.request=null};a.prototype.firstResponseCallback=function(){"use strict";window.scrollTo(0,0),b("Arbiter").inform(b("NavigationMessage").NAVIGATION_FIRST_RESPONSE)};a.prototype.finallyHandler=function(a){"use strict";this.request=null,g&&g.transitionComplete(!0),b("Arbiter").inform(b("NavigationMessage").NAVIGATION_COMPLETED)};e.exports=a}),null);
__d("DimensionLogging",["BanzaiNectar","getViewportDimensions"],(function(a,b,c,d,e,f){a=b("getViewportDimensions")();b("BanzaiNectar").log("browser_dimension","homeload",{x:a.width,y:a.height,sw:window.screen.width,sh:window.screen.height,aw:window.screen.availWidth,ah:window.screen.availHeight,at:window.screen.availTop,al:window.screen.availLeft})}),null);
__d("StickyRHC",["csx","$","Arbiter","DirectionalDockingElement","DockingElement","DOMDimensions","DOMQuery","Event","Run","SubscriptionsHandler","ViewportBounds","JSReliabilityFixesGatingConfig","ge","getElementPosition","getViewportDimensions","removeFromArray","throttle"],(function(a,b,c,d,e,f,g){__p&&__p();var h=35,i=[],j;function k(a,c){__p&&__p();if(!c||!c.dom_id){i.forEach(l);return}a=b("$")(c.dom_id);for(var c=0;c<i.length;c++)if(b("DOMQuery").contains(i[c].getRoot(),a)){l(i[c]);return}}function l(a){var c=a.getRoot(),d=a.updateOffset.bind(a);a=b("DOMQuery").scry(c,"img.img");a.forEach(function(a){if(a.complete||a.getAttribute("height")||a.naturalHeight===undefined&&a.naturalHeight!==0)return;var c=function(){d(),e.remove(),f.remove(),g.remove()},e=b("Event").listen(a,"load",c),f=b("Event").listen(a,"error",c),g=b("Event").listen(a,"abort",c)});d()}function m(){i.forEach(function(a){a.updateOffset()})}function n(){m(),m()}function o(a){var c=b("DOMQuery").scry(a,"._4-u2"),d=b("DOMQuery").scry(a,"._4-u3"),e=b("DOMQuery").scry(a,".uiHeader");a=b("DOMQuery").scry(a,".ego_unit");return[].concat(c,d,e,a).filter(function(a){return s(a)!==0})}function p(a){return b("getElementPosition")(a).y}function q(a,b){return a-b}function r(){return s(b("ge")("pageFooter"))}function s(a){return a?b("DOMDimensions").getElementDimensions(a).height:0}var t=a(m);function a(a){return function(c){return b("Arbiter").subscribe(c,a)}}function c(a,c){__p&&__p();var d=arguments.length<=2||arguments[2]===undefined?!0:arguments[2],e=arguments.length<=3||arguments[3]===undefined?!1:arguments[3];this.$1=a;this.$2=c?new(b("DirectionalDockingElement"))(a):new(b("DockingElement"))(a,e);this.$3=d;this.$2.subscribe("changedheight",this.updateOffset.bind(this));this.updateOffset();l(this);i.length||(j=new(b("SubscriptionsHandler"))(),j.addSubscriptions(t("header_loaded"),t("responsive_rhc_loaded"),t("ad_home_pagelet_loaded"),b("Arbiter").subscribe("netego_loaded",k),b("Arbiter").subscribe("video_fullscreen_change",n),b("Event").listen(window,"resize",b("throttle")(m))));b("Run").onLeave(function(){return this.destroy()}.bind(this));i.push(this)}c.getInstances=function(){"use strict";return i};c.prototype.getRoot=function(){"use strict";return this.$1};c.prototype.subscribe=function(event,a){"use strict";return this.$2.subscribe(event,a)};c.prototype.destroy=function(){"use strict";this.$2=null,b("removeFromArray")(i,this),!i.length&&j&&(j.release(),j=null)};c.prototype.unfixAndScrollBy=function(a){"use strict";b("JSReliabilityFixesGatingConfig").should_get_fix?this.$2&&this.$2.unfixAndScrollBy(a):this.$2.unfixAndScrollBy(a)};c.prototype.updateOffset=function(){"use strict";b("JSReliabilityFixesGatingConfig").should_get_fix?this.$2&&this.$2.setOffset(this.calculateRHCOffset()):this.$2.setOffset(this.calculateRHCOffset())};c.prototype.calculateRHCOffset=function(){"use strict";__p&&__p();var a=this.getRoot(),b=s(a),c=u(),d=v();if(b<d)return c;if(this.$3){var e=o(a).map(p).sort(q);a=b+p(a);for(var e=e,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;h=a-h;if(h<d)return c-(b-h)}}return c-(b-d)};function u(){return b("ViewportBounds").getTop()}function v(){var a=u(),c=b("getViewportDimensions")().height,d=r();return c-a-h-d}e.exports=c}),null);
__d("FbFeedAccessible",["csx","fbt","invariant","Arbiter","ARIA","CSS","DataAttributeUtils","DOMQuery","LitestandMessages","SubscriptionsHandler","ge","getOrCreateDOMID"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j="Accessibility/StoriesRequested",k="Accessibility/StoriesLoaded",l="Accessibility/StoryContentInserted",m="Accessibility/SubstreamInserted",n=void 0,o=void 0,p=!1;a={init:function(a){n=a,p||this._initSubscriptions(),this._enumerateStories()},_initSubscriptions:function(){p=!0;var a=new(b("SubscriptionsHandler"))();a.addSubscriptions(b("Arbiter").subscribe(b("LitestandMessages").STORIES_REQUESTED,this._onStoriesRequested.bind(this)),b("Arbiter").subscribe(b("LitestandMessages").STORIES_INSERTED,this._onInsertedSubstream.bind(this)),b("Arbiter").subscribe(b("LitestandMessages").NEWER_STORIES_INSERTED,this._onInsertedSubstream.bind(this)),b("Arbiter").subscribe(k,this._processStoriesLoaded.bind(this)),b("Arbiter").subscribe(j,this._processStoriesRequested.bind(this)),b("Arbiter").subscribe(l,this._processStoryContentInserted.bind(this)),b("Arbiter").subscribe(m,this._processInsertedSubstream.bind(this)))},informStoryContentInserted:function(a){b("Arbiter").inform(l,a)},setARIARole:function(a){a.setAttribute("role","article")},setAriaLabelledBy:function(a){if(a.getAttribute("aria-labelledby"))return;var c=this._filterForElement(a,["._5pbw"]);c.length>0&&a.setAttribute("aria-labelledby",c.map(function(a){return b("getOrCreateDOMID")(a)}).join(" "))},setAriaDescribedBy:function(a){if(a.getAttribute("aria-describedby"))return;var c=this._filterForElement(a,[".timestampContent","._5pbx"]);c.length>0&&a.setAttribute("aria-describedby",c.map(function(a){return b("getOrCreateDOMID")(a)}).join(" "))},_getStories:function(a){return b("DOMQuery").scry(a||n,"._5jmm")},_onInsertedSubstream:function(a,c){c&&c.substream_id&&b("Arbiter").inform(m,c.substream_id)},_onStoriesRequested:function(){b("Arbiter").inform(j)},_enumerateStories:function(){var a=this._getStories(n);o=a.length;a.forEach(function(a,b){this._enumerateStory(a,b+=1)}.bind(this))},_enumerateSubstream:function(a){var c=this._getStories();o=c.length;c=this._getStories(b("ge")(a));a=c.length||0;for(var d=0;d<a;d++)this._registerStoryEnumerationPosition(c[d],o-a+(d+1),d+1)},_enumerateStory:function(a,b){this._isStory(a)||i(0),b>0&&(a.setAttribute("aria-posinset",""+b),a.setAttribute("aria-setsize",o))},_processStoriesLoaded:function(){b("ARIA").notify(h._("More stories loaded."))},_processStoriesRequested:function(){b("ARIA").notify(h._("More stories requested."))},_processInsertedSubstream:function(a,b){this._enumerateSubstream(b),this._enumerateStories()},_processStoryContentInserted:function(a,c){__p&&__p();a=void 0;c=b("ge")(c);c&&(a=JSON.parse(b("DataAttributeUtils").getDataFt(c)),this._isStory(c)&&(this.setARIARole(c),this.setAriaLabelledBy(c),this.setAriaDescribedBy(c)));if(a&&a.ordinal_position){a=a.ordinal_position.split(":");var d=a[0];a=a[1];d=parseInt(d,10);a=parseInt(a,10);this._enumerateStory(c,d);a===1&&b("Arbiter").inform(k)}},_registerStoryEnumerationPosition:function(a,c,d){var e=JSON.parse(b("DataAttributeUtils").getDataFt(a));e&&(e.ordinal_position=c+":"+d,b("DataAttributeUtils").setDataFt(a,JSON.stringify(e)))},_isStory:function(a){return b("CSS").matchesSelector(a,"._5jmm")},_filterForElement:function(a,c){return c.map(function(c){return b("DOMQuery").scry(a||document,c)[0]}).filter(function(a){return!!a})}};e.exports=a}),null);
__d("FbFeedHighlight",["cx","CSS","DOM","DOMScroll","JSXDOM"],(function(a,b,c,d,e,f,g){__p&&__p();var h=1e3,i=1e3,j=null;function k(){return b("JSXDOM").div({className:"_1usz"},b("JSXDOM").div({className:"_1us-"}),b("JSXDOM").div({className:"_1us_"}),b("JSXDOM").div({className:"_1ut0"}),b("JSXDOM").div({className:"_1ut1"}))}var l={highlightAndScrollTo:function(a){l.highlightAndScrollToWithTime(a,i,0)},highlightAndScrollToWithTime:function(a,b,c){l.highlightWithTime(a,b),l.scrollTo(a,c,0)},highlightSingle:function(a){l.highlightSingleWithTime(a,i)},highlightSingleWithTime:function(a,c){var d=k();b("DOM").appendContent(a,d);setTimeout(function(){j&&b("DOM").remove(j),j=d,b("CSS").addClass(a,"_1ut2")},0);setTimeout(function(){b("CSS").removeClass(a,"_1ut2"),setTimeout(function(){b("DOM").remove(d),d==j&&(j=null)},h+c)},h+c)},highlight:function(a){l.highlightWithTime(a,i)},highlightWithTime:function(a,c){var d=l.highlightPermanent(a);setTimeout(function(){b("CSS").removeClass(a,"_1ut2"),setTimeout(b("DOM").remove.bind(null,d),h+h)},h+c)},highlightPermanent:function(a){var c=k();b("DOM").appendContent(a,c);setTimeout(function(){b("CSS").addClass(a,"_1ut2")},0);return c},scrollTo:function(a,c,d){setTimeout(function(){b("DOMScroll").scrollTo(a,750,!1,0,c)},d)}};e.exports=l}),null);
__d("LikeConfirmer",["AsyncDialog","AsyncRequest"],(function(a,b,c,d,e,f){__p&&__p();var g=!1,h=!1;a={likeContent:function(){},like:function(a,c){__p&&__p();this.likeContent=a;if(h)return;if(g)this.likeContent();else{a=new(b("AsyncRequest"))().setURI("/like/confirm_like.php").setRelativeTo(c);b("AsyncDialog").send(a,function(a){h=!0,a.subscribe("hide",this.onCloseLikeConfirmDialog.bind(this)),a.setCausalElement(c)}.bind(this))}return!1},isShowingConfirmation:function(){return h},onCloseLikeConfirmDialog:function(){h=!1},likeSkipConfirmation:function(a){g=a,this.likeContent()}};e.exports=a}),null);
__d("FbFeedKeyboardController",["csx","cx","fbt","AccessibilityExperimentsConfig","Arbiter","AsyncDialog","AsyncRequest","CSS","DOM","DOMQuery","DOMScroll","Event","FbFeedHighlight","Focus","JSXDOM","KeyboardShortcuts","LikeConfirmer","NavigationMessage","Parent","ReactComposerEvents","ReactComposerIDGenerator","Run","Scroll","SubscriptionsHandler","UITinyViewportAction","Vector","ViewportBounds","emptyFunction","ge","getActiveElement","isAsyncScrollQuery","isElementNode","throttle","translateKey"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j=45,k=0;function l(){k=b("UITinyViewportAction").isTiny()?0:b("ViewportBounds").getTop()}function m(a){if(!a)return null;if(a.previousElementSibling instanceof HTMLElement)return a.previousElementSibling;a=a.previousSibling;while(a&&!(a instanceof HTMLElement))a=a.previousSibling;return a||null}function n(a){if(a.nextElementSibling instanceof HTMLElement)return a.nextElementSibling;a=a.nextSibling;while(a&&!(a instanceof HTMLElement))a=a.nextSibling;return a||null}function o(a){"use strict";this.root=a,this.init()}o.prototype.getStories=function(a){"use strict";return b("DOMQuery").scry(a||this.root,"._5jmm")};o.prototype.isStory=function(a){"use strict";return b("CSS").matchesSelector(a,"._5jmm")};o.prototype.clickLike=function(){"use strict";__p&&__p();var a=this.$3();this.clickElement(a,"._3l2t",".UFILikeLink");if(a!==this.selected)return;a=this.getParentStory(b("getActiveElement")());if(a){a=[].concat(b("DOMQuery").scry(a,"._3l2t"),b("DOMQuery").scry(a,".UFILikeLink"));for(var c=0;c<a.length;c++)b("CSS").hasClass(a[c],"accessible_elem")||b("Focus").setWithoutOutline(a[c])}};o.prototype.clickComment=function(){"use strict";this.clickElement(this.$3(),"._666h","._2pgm",".comment_link")};o.prototype.clickShare=function(){"use strict";this.click("._2nj7",".share_action_link")};o.prototype.clickSeeMore=function(){"use strict";this.click(".see_more_link")};o.prototype.clickLeft=function(){"use strict";this.click("._1mri")};o.prototype.clickRight=function(){"use strict";this.click("._2fu-")};o.prototype.openAttachment=function(){"use strict";this.click("._5dec","a._52c6","._4-eo",".uiVideoThumb")};o.prototype.getHeadline=function(a){"use strict";return b("DOMQuery").scry(a,"h5._5pbw")[0]};o.prototype.$4=function(a){"use strict";var c=b("Parent").bySelector(a,"._5pcb"),d=b("ge")("pagelet_soft_permalink_posts");return!!(c||d&&b("DOM").contains(d,a))};o.prototype.getPreviousSibling=function(a){"use strict";__p&&__p();var c=m(a);if(c&&this.getParentStory(c))return c;c=null;if(this.$4(a)){var d=this.getStories(this.root);a=d.indexOf(a);while(a>-1){if(a===0)c=b("ge")("pagelet_composer"),c=c&&b("Parent").bySelector(c,"._5jmm");else if(a>0){c=d[a-1];if(c.offsetHeight>0)break}a--}}return c instanceof HTMLElement?c:this.selected};o.prototype.getPreviousStory=function(a){"use strict";a=this.getPreviousSibling(a);while(a&&!this.isStory(a))a=this.getPreviousSibling(a);return a};o.prototype.getParentStory=function(a){"use strict";a=b("Parent").bySelector(a,"._5jmm");return a instanceof HTMLElement?a:null};o.prototype.getNextSibling=function(a){"use strict";__p&&__p();var c=n(a);if(c&&this.getParentStory(c))return c;c=null;if(this.$4(a)){var d=this.getStories(this.root),e=d.indexOf(a);if(e>-1){c=d[++e];while(c&&c.offsetHeight===0)c=d[++e]}}else b("ge")("pagelet_composer",a)&&(c=b("DOMQuery").scry(document,"div._5pcb ._5jmm")[0]);return c||this.selected};o.prototype.getNextStory=function(a){"use strict";a=this.getNextSibling(a);while(a&&!this.isStory(a))a=this.getNextSibling(a);return a};o.prototype.setSelected=function(a,c){"use strict";if(a){var d="_5qdu",e=b("DOMQuery").scry(a,"._5qdu");!e.length&&c&&b("DOM").prependContent(a,b("JSXDOM").div({className:d}))}c&&(this.selected&&this.setTabindexOnStory(this.selected,"-1"),this.selected&&b("CSS").removeClass(this.selected,"_5qdv"),this.selected=a,a&&this.setTabindexOnStory(a,"0"),a&&b("CSS").addClass(a,"_5qdv"),a&&b("FbFeedHighlight").highlightSingle(a))};o.prototype.$3=function(){"use strict";var a=b("DOM").scry(this.selected,"._1qch");return a.length>0?b("DOM").scry(this.selected,"._3el7")[0]:this.selected};o.prototype.focusComposer=function(){"use strict";__p&&__p();var a=["pagelet_composer","pagelet_group_composer","pagelet_event_composer","PageComposerPagelet_","PageComposerPagelet_Admin_View","timeline_composer_container"],c=null;for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;c=b("ge")(f);if(c)break}if(c){f=b("DOM").scry(c,"textarea")[0];if(f)b("Focus").set(f),b("DOMScroll").scrollTo(c,!0);else{e=b("DOM").scry(c,"div._36bx")[0];d=e&&e.id;b("ReactComposerIDGenerator").isComposerID(d)&&(b("Arbiter").inform(b("ReactComposerEvents").ACTIVATE_ATTACHMENT+e.id),b("DOMScroll").scrollTo(c,!0))}}};o.prototype.getScrollOffset=function(){"use strict";return 10+(this.scrollOffset||0)};o.prototype.getAnimationLength=function(a){"use strict";return Math.min(Math.abs(b("Vector").getElementPosition(a).y-b("ViewportBounds").getTop()-b("Scroll").getTop(document.body)),400)};o.prototype.findTop=function(){"use strict";var a=this.getStories();for(var c=0;c<a.length;c++)if(b("Vector").getElementPosition(a[c]).y>b("Vector").getScrollPosition().y)return a[c];return null};o.prototype.onLeave=function(){"use strict";this.subscriptions&&this.subscriptions.release()};o.prototype.getHelpDialogRequest=function(){"use strict";if(!this.dialogRequest)this.dialogRequest=new(b("AsyncRequest"))("/ajax/keyboard_shortcuts"),this.dialogRequest.setReadOnly(!0);else if(this.dialogRequest.transport)return null;return this.dialogRequest};o.prototype.init=function(){"use strict";__p&&__p();b("Run").onLeave(this.onLeave.bind(this)),this.subscriptions=new(b("SubscriptionsHandler"))(),this.subscriptions.addSubscriptions(b("Arbiter").subscribe(b("NavigationMessage").NAVIGATION_BEGIN,this.onLeave.bind(this)),b("KeyboardShortcuts").register("j",this.vert.bind(this,1),{shortcutInfo:{displayKeys:[b("translateKey")("j")],description:i._("Scroll to the next News Feed post")}}),b("KeyboardShortcuts").register("k",this.vert.bind(this,-1),{shortcutInfo:{displayKeys:[b("translateKey")("k")],description:i._("Scroll to the previous News Feed post")}}),b("KeyboardShortcuts").register("p",this.focusComposer.bind(this),{shortcutInfo:{displayKeys:[b("translateKey")("p")],description:i._("Make a new post")}}),b("KeyboardShortcuts").register("l",function(){var a=this.getParentStory(b("getActiveElement")());b("LikeConfirmer").like(function(){this.setSelected(a,!1),this.clickLike()}.bind(this),b("getActiveElement")())}.bind(this),{filter:this.hasActiveStory.bind(this),shortcutInfo:{displayKeys:[b("translateKey")("l")],description:i._("Like or unlike the selected post")}}),b("KeyboardShortcuts").register("c",this.clickComment.bind(this),{filter:this.hasActiveStory.bind(this),shortcutInfo:{displayKeys:[b("translateKey")("c")],description:i._("Comment on the selected post")}}),b("KeyboardShortcuts").register("s",this.clickShare.bind(this),{filter:this.hasActiveStory.bind(this),shortcutInfo:{displayKeys:[b("translateKey")("s")],description:i._("Share the selected post")}}),b("KeyboardShortcuts").register("o",this.openAttachment.bind(this),{filter:this.hasActiveStory.bind(this),shortcutInfo:{displayKeys:[b("translateKey")("o")],description:i._("Open attachment of the selected post")}}),b("KeyboardShortcuts").register("RETURN",this.clickSeeMore.bind(this),{filter:this.hasExpandableStoryInFocus.bind(this),shortcutInfo:{displayKeys:[b("translateKey")("enter")],description:i._("See more of the selected post")}}),b("KeyboardShortcuts").register("LEFT",this.clickLeft.bind(this),{filter:this.hasActiveStory.bind(this)}),b("KeyboardShortcuts").register("RIGHT",this.clickRight.bind(this),{filter:this.hasActiveStory.bind(this)}),b("Event").listen(this.root,"focusin",function(event){var a=event.getTarget();if(!this.isStory(a)){var c=b("DOM").isNodeOfType(a,["object","embed","iframe"]);a=this.getParentStory(a);var d=this.selected;a&&!c&&d&&(this.setSelected(a,!0),this.selected=a)}}.bind(this))),b("AccessibilityExperimentsConfig").a11yKeyboardShortcutNub||this.subscriptions.addSubscriptions(b("KeyboardShortcuts").register("SLASH",function(){var a=this.getHelpDialogRequest();a&&(a.setRelativeTo(b("getActiveElement")()),b("AsyncDialog").send(a))}.bind(this),{filter:function(event,a){return event.getModifiers().shift}}))};o.prototype.hasActiveStory=function(event,a){"use strict";a=b("getActiveElement")();return!(a&&b("CSS").shown(a))||!!this.getParentStory(a)};o.prototype.hasExpandableStoryInFocus=function(event,a){"use strict";a=b("getActiveElement")();return!!(a&&a.getElementsByClassName("text_exposed_root").length&&!a.getElementsByClassName("text_exposed_root text_exposed").length)};o.prototype.clickElement=function(a){"use strict";__p&&__p();if(!a)return;var c=void 0;for(var d=arguments.length,e=Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];for(var g=0,h=e.length;g<h;g++){c=b("DOM").scry(a,e[g])[0];if(c&&b("CSS").shown(c)){c.click();return}}};o.prototype.click=function(){"use strict";for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];this.clickElement.apply(this,[this.selected].concat(b))};o.prototype.$5=function(){"use strict";if(!this.$1){this.scrollOffset=0;var a=b("ge")("pagelet_feed_switcher_root");a&&(this.scrollOffset+=a.getBoundingClientRect().height);this.subscriptions.addSubscriptions(b("Event").listen(document,"scroll",function(){this.selected&&!this.scrolling&&this.setSelected(null,!1)}.bind(this)));this.$1=!0}};o.prototype.$6=function(){"use strict";this.$2||(l(),this.subscriptions.addSubscriptions(b("Event").listen(window,"resize",b("throttle")(l))),this.$2=!0)};o.prototype.vert=function(a){"use strict";__p&&__p();this.$5();var c;if(this.selected){this.selected.id=="pagelet_composer"?c=a>0?this.getStories()[0]:null:a===0?c=this.selected:c=a>0?this.getNextStory(this.selected):this.getPreviousStory(this.selected)||b("ge")("pagelet_composer");if(!c)return;else if(!b("isElementNode")(c)||b("CSS").hasClass(c,"hidden_elem")){this.selected&&b("CSS").removeClass(this.selected,"selectedStorySimple");this.selected=c;this.vert(a);return}}(!c||b("Parent").byClass(c,"hidden_elem")||!b("DOM").contains(document,c))&&(c=this.findTop(),c&&a<0&&(c=this.getPreviousStory(c)));if(!c)return;this.anim&&this.anim();var d=Date.now()-(this.lastScroll||0)>30,e=b("emptyFunction");a!==0&&(e=this.setFocused.bind(this,c));b("isAsyncScrollQuery")()&&(d=!1,e(),e=b("emptyFunction"));this.scrolling=!0;this.scrollingTimer&&clearTimeout(this.scrollingTimer);this.$6();var f=b("Vector").getViewportDimensions().y-k-this.getScrollOffset();if(this.selected){var g=b("DOM").scry(this.selected,"._2pum")[0],h=b("DOM").scry(c,"._2pum")[0];g&&a>0&&(this.isExplore=!0);h&&(this.isExplore=!1)}this.root.id==="pagelet_explore_feed"&&(this.isExplore=!0);this.isExplore&&(f-=j);this.anim=b("DOMScroll").scrollTo(c,d?this.getAnimationLength(c):0,!1,f,0,function(){this.scrollingTimer=setTimeout(function(){this.scrolling=!1}.bind(this),300);var a=b("Vector").getScrollPosition();e();a.distanceTo(b("Vector").getScrollPosition())!==0&&b("DOMScroll").scrollTo(a,0)}.bind(this));this.setSelected(c,!0);this.lastScroll=Date.now()};o.prototype.setTabindexOnStory=function(a,b){"use strict";a&&this.isStory(a)&&(a.tabIndex=parseInt(b,10))};o.prototype.setFocused=function(a){"use strict";a&&this.isStory(a)&&b("Focus").setWithoutOutline(a)};o.init=function(a){"use strict";return new o(a)};e.exports=o}),null);