if (self.CavalryLogger) { CavalryLogger.start_js(["FXHbs"]); }

__d("ProfileCustomVideoThumbnailTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:ProfileCustomVideoThumbnailLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:ProfileCustomVideoThumbnailLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:ProfileCustomVideoThumbnailLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setVideoID=function(a){this.$1.video_id=a;return this};c={event:!0,vc:!0,video_id:!0};e.exports=a}),null);
__d("ReactComposerCollageDragHandler",["Vector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return a.reduce(function(a,b){return a+b})}function h(a){var c=a.length;if(c===0)return null;var d=g(a.map(function(a){return a.x}))/c;a=g(a.map(function(a){return a.y}))/c;return new(b("Vector"))(d,a)}function i(a){__p&&__p();var c=a.length;if(c===0)return null;var d=0,e=0;for(var f=0;f<c;f++){var g=a.item(f);d+=g.pageX;e+=g.pageY}return new(b("Vector"))(d/c,e/c)}function j(event){return event.buttons!==undefined?event.buttons&1:event.button===0&&event.type!=="mouseup"}function a(a,b,c,d){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$7=!1,this.$5=new Map()}a.prototype.onMouseDown=function(event){j(event)&&(this.$7=!0,this.$8(event),this.$2(this.$1,this.$6))};a.prototype.onMouseUp=function(event){!j(event)&&this.$7&&(this.$7=!1,this.$8(event),this.$4(this.$1,this.$6))};a.prototype.onMouseMove=function(event){j(event)||(this.$7=!1);if(this.$7){var a=this.$8(event);this.$3(this.$1,this.$6,a)}};a.prototype.onBlur=function(event){this.$7&&this.$4(this.$1,this.$6),this.$7=!1,this.$6=null,this.$5.size>0&&this.$4(this.$1,i(Array.from(this.$5.values()))),this.$5=new Map()};a.prototype.onTouchStart=function(event){if(this.$5.size===0){var a=i(event.targetTouches);this.$2(this.$1,a)}this.$9(event)};a.prototype.onTouchMove=function(event){var a=i(event.targetTouches),b=this.$9(event);this.$3(this.$1,a,b)};a.prototype.onTouchEnd=function(event){this.$9(event),event.targetTouches.length||this.$4(this.$1,i(event.changedTouches))};a.prototype.onTouchCancel=function(event){this.$9(event),event.targetTouches.length||this.$4(this.$1,i(event.changedTouches))};a.prototype.$8=function(event){var a=new(b("Vector"))(event.pageX,event.pageY),c=null;this.$6&&(c=a.sub(this.$6));this.$6=a;return c};a.prototype.$9=function(event){__p&&__p();event.preventDefault();var a=[],c=this.$5;this.$5=new Map();for(var d=0;d<event.targetTouches.length;d++){var e=event.targetTouches.item(d),f=new(b("Vector"))(e.pageX,e.pageY),g=c.get(e.identifier);this.$5.set(e.identifier,f);g&&a.push(f.sub(g))}e=h(a);return e};e.exports=a}),null);
__d("ReactComposerPhotoActionButton.react",["cx","React","Tooltip","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){var a=b("joinClasses")(this.props.className,"_jfh");return b("React").createElement("button",babelHelpers["extends"]({className:a,onClick:this.props.onClick,tabIndex:"0","aria-label":this.props.tooltip},b("Tooltip").propsFor(this.props.tooltip)),b("React").createElement("div",{className:this.props.iconClassName}))};function a(){h.apply(this,arguments)}a.propTypes={tooltip:c.node,className:c.string,onClick:c.func,iconClassName:c.string};e.exports=a}),null);
__d("ReactComposerPhotoEditActionButton.react",["cx","fbt","React","ReactComposerPhotoActionButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){var a=h._("Edit Photo");return b("React").createElement(b("ReactComposerPhotoActionButton.react"),{className:"_4_z4",onClick:this.props.onClick,tooltip:a,iconClassName:"_4_z5"})};function a(){i.apply(this,arguments)}a.propTypes={onClick:c.func};e.exports=a}),null);
__d("ReactComposerMediaAttachmentActionType",["keyMirrorRecursive"],(function(a,b,c,d,e,f){e.exports=b("keyMirrorRecursive")({SET_MEDIA_CONFIG:null},"ReactComposerMediaAttachmentActionType")}),null);
__d("ReactComposerMediaAttachmentStore",["ReactComposerMediaAttachmentActionType","ReactComposerStoreBase"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("ReactComposerStoreBase"));g=c&&c.prototype;function a(){"use strict";var a=void 0;g.constructor.call(this,function(){return{createAlbumLink:null,taggingDataSource:null,videoUploader:null,videoProgressBar:null,videoProgressBarInstance:null}},function(c){switch(c.type){case b("ReactComposerMediaAttachmentActionType").SET_MEDIA_CONFIG:a&&a.$ReactComposerMediaAttachmentStore1(c);break}});a=this}a.prototype.getCreateAlbumLink=function(a){"use strict";return this.getComposerData(a).createAlbumLink};a.prototype.getTaggingDataSource=function(a){"use strict";return this.getComposerData(a).taggingDataSource};a.prototype.getVideoUploader=function(a){"use strict";return this.getComposerData(a).videoUploader};a.prototype.getVideoProgressBarInstance=function(a){"use strict";return this.getComposerData(a).videoProgressBarInstance};a.prototype.getVideoProgressBar=function(a){"use strict";return this.getComposerData(a).videoProgressBar};a.prototype.$ReactComposerMediaAttachmentStore1=function(a){"use strict";var b=this.getComposerData(a.composerID);b.createAlbumLink=a.config.createAlbumLink;b.taggingDataSource=a.config.taggingDataSource;b.videoUploader=a.config.videoUploader;b.videoProgressBar=a.config.videoProgressBar;b.videoProgressBarInstance=a.config.videoProgressBarInstance;this.emitChange(a.composerID)};e.exports=new a()}),null);
__d("ReactComposerFaceboxTaggerTypeaheadPresenter",["cx","React","XUITypeaheadView.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:"_3ntx"},b("React").createElement(b("XUITypeaheadView.react"),this.props))};function a(){h.apply(this,arguments)}c={ViewRenderer:a,useLayer:!0};e.exports=c}),null);
__d("ReactComposerPhotoFaceboxTagger.react",["cx","fbt","React","ReactComposerFaceboxTaggerTypeaheadPresenter","XUITypeahead.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={query:""},this.$1=function(a){this.props.onTagAdded(this.props.faceboxID,a.getUniqueID(),a.getTitle())}.bind(this),this.$2=function(event){this.setState({query:event.target.value})}.bind(this),b}a.prototype.render=function(){var a=h._("Who is this?");return b("React").createElement(b("XUITypeahead.react"),{className:"_xgd",queryString:this.state.query,placeholder:a,onSelectAttempt:this.$1,onChange:this.$2,searchSource:this.props.dataSource,highlightOnSelect:!0,showEntriesOnFocus:!0,autoHighlight:!0,selectOnTab:!0,focusedOnInit:!0,presenter:b("ReactComposerFaceboxTaggerTypeaheadPresenter")})};a.propTypes={faceboxID:c.string.isRequired,dataSource:c.object.isRequired,onTagAdded:c.func.isRequired};e.exports=a}),null);
__d("ReactComposerQAndAActionType",["keyMirrorRecursive"],(function(a,b,c,d,e,f){e.exports=b("keyMirrorRecursive")({SET_QANDA_CONFIG:null},"ReactComposerQAndAActionType")}),null);
__d("ReactComposerQAndAStore",["ReactComposerQAndAActionType","ReactComposerStoreBase"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("ReactComposerStoreBase"));g=c&&c.prototype;function a(){"use strict";var a=void 0;g.constructor.call(this,function(){return{photoLimit:1,profilePicURI:null,profileURI:null,faceboxDataSource:null}},function(c){switch(c.type){case b("ReactComposerQAndAActionType").SET_QANDA_CONFIG:a&&a.$ReactComposerQAndAStore1(c);break}});a=this}a.prototype.getPhotoLimit=function(a){"use strict";return this.getComposerData(a).photoLimit};a.prototype.getProfilePicSrc=function(a){"use strict";return this.getComposerData(a).profilePicSrc};a.prototype.getProfileURI=function(a){"use strict";return this.getComposerData(a).profileURI};a.prototype.getFaceboxDataSource=function(a){"use strict";return this.getComposerData(a).faceboxDataSource};a.prototype.$ReactComposerQAndAStore1=function(a){"use strict";var b=this.validateAction(a,["composerID","config"]),c=b[0];b=b[1];c=this.getComposerData(c);c.photoLimit=b.photoLimit;c.profilePicSrc=b.profilePicSrc;c.profileURI=b.profileURI;c.faceboxDataSource=b.faceboxDataSource;this.emitChange(a.composerID)};e.exports=new a()}),null);
__d("ReactComposerPhotoFaceboxTaggerContainer.react",["React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerMediaAttachmentStore","ReactComposerPhotoFaceboxTagger.react","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerQAndAStore"],(function(a,b,c,d,e,f){"use strict";a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactComposerPhotoFaceboxTaggerContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin"),b("ReactComposerPropsAndStoreBasedStateMixin")(b("ReactComposerMediaAttachmentStore"),b("ReactComposerQAndAStore"))],propTypes:{faceboxID:a.string.isRequired,onTagAdded:a.func.isRequired},statics:{calculateState:function(a){a=b("ReactComposerMediaAttachmentStore").getTaggingDataSource(a)||b("ReactComposerQAndAStore").getFaceboxDataSource(a);a&&a.bootstrap();return{dataSource:a}}},render:function(){return b("React").createElement(b("ReactComposerPhotoFaceboxTagger.react"),{faceboxID:this.props.faceboxID,dataSource:this.state.dataSource,onTagAdded:this.props.onTagAdded})}});e.exports=c}),null);
__d("ReactComposerPhotoProductTagActionButton.react",["cx","fbt","AsyncRequest","CommerceProductTaggerType","CommerceSelfServeNUXType","React","ReactComposerPhotoActionButton.react","ReactComposerTaggerActions","ReactComposerTaggerType","XCommerceSelfServeMerchantNUXSeenController","XUIAmbientNUX.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$2=function(){var a=b("XCommerceSelfServeMerchantNUXSeenController").getURIBuilder().setInt("page_id",this.props.pageID).setEnum("nux_type",b("CommerceSelfServeNUXType").COMPOSER_PRODUCT_PHOTO_TAGGER_BUTTON).getURI();new(b("AsyncRequest"))(a).send();this.props.onHideNux()}.bind(this),c}a.prototype.render=function(){var a=h._("Tag Products");return b("React").createElement("div",null,b("React").createElement(b("ReactComposerPhotoActionButton.react"),{ref:"fbReactComposerPhotoActionbutton",className:"_a69"+(this.props.hasTag?" _a6b":""),tooltip:a,iconClassName:"_a6_",onClick:this.props.onClick}),this.$1())};a.prototype.$1=function(){if(!this.props.showNux)return null;var a=this.props.productTaggerType;a=a===b("CommerceProductTaggerType").SHOP_PAGE?h._("Tag products from your shop in this photo"):h._("Tag products in this photo");return b("React").createElement(b("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.fbReactComposerPhotoActionbutton}.bind(this),onCloseButtonClick:this.$2,position:"right",shown:!0,width:"auto"},a)};a.propTypes={composerID:c.string.isRequired,pageID:c.string.isRequired,productTaggerType:c.string.isRequired,hasTag:c.bool.isRequired,onClick:c.any,onHideNux:c.func.isRequired,showNux:c.bool.isRequired};e.exports=a}),null);
__d("ReactComposerPhotoTagActionButton.react",["cx","fbt","React","ReactComposerPhotoActionButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){var a=h._("Tag");return b("React").createElement(b("ReactComposerPhotoActionButton.react"),{className:"_cwf"+(this.props.hasTag?" _cwh":""),tooltip:a,iconClassName:"_cwg",onClick:this.props.onClick})};function a(){i.apply(this,arguments)}a.propTypes={hasTag:c.bool.isRequired,onClick:c.any};e.exports=a}),null);
__d("ReactComposerPhotoTaggedFaceboxSummary.react",["cx","fbt","ix","Image.react","LeftRight.react","React","TooltipLink.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);j=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=j.constructor).call.apply(a,[this].concat(d)),this.$1=function(){this.props.onTagRemoved(this.props.faceboxID,this.props.taggedSubjectID)}.bind(this),b}a.prototype.render=function(){var a=h._("Edit Name");return b("React").createElement(b("LeftRight.react"),{className:"_31bg"},b("React").createElement("div",{className:"_31bh"},this.props.taggedValue),b("React").createElement(b("TooltipLink.react"),{alignH:"center",position:"below",tooltip:a,onClick:this.$1},b("React").createElement(b("Image.react"),{src:i("76906")})))};a.propTypes={faceboxID:c.string.isRequired,onTagRemoved:c.func.isRequired,taggedSubjectID:c.string.isRequired,taggedValue:c.string.isRequired};e.exports=a}),null);
__d("ReactComposerPhotoTagger.react",["cx","fbt","ActorURI","AsyncRequest","CommerceProductTaggerType","ContextualLayerAutoFlip","Image.react","ImageBlock.react","immutable","LayerHideOnBlur","LayerHideOnEscape","LayerTabIsolation","ModalPhotoEditorTabName","PhotoEditorTargetType","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerPhotoActions","ReactComposerPhotoEditActionButton.react","ReactComposerPhotoFaceboxTaggerContainer.react","ReactComposerPhotoProductTagActionButton.react","ReactComposerPhotoStore","ReactComposerPhotoTagActionButton.react","ReactComposerPhotoTaggedFaceboxSummary.react","ReactLayeredComponentMixin_DEPRECATED","XStickerPhotoEditorController","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIContextualDialogFooter.react","XUIDialogCloseButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;var i=268,j=32;c=b("React").createClass({displayName:"ReactComposerPhotoTagger",_photoEditorRequest:undefined,contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactLayeredComponentMixin_DEPRECATED"),b("ReactComponentWithPureRenderMixin")],propTypes:{canTagFromModal:a.bool,draggingPhotos:a.bool,enableFaceboxTagger:a.bool.isRequired,disablePhotoEditing:a.bool.isRequired,faceboxes:a.instanceOf(b("immutable").Map).isRequired,onEditClick:a.func,onHideProductTaggerNux:a.func.isRequired,onTagAdded:a.func.isRequired,onTagIntent:a.func,onTagRemoved:a.func.isRequired,originalID:a.string,photoID:a.string.isRequired,productTaggerType:a.string.isRequired,shown:a.bool.isRequired,showProductTaggerNux:a.bool.isRequired},getDefaultProps:function(){return{shown:!1}},UNSAFE_componentWillReceiveProps:function(a){!this.props.draggingPhotos&&a.draggingPhotos&&b("ReactComposerPhotoActions").setPhotoBeingTagged(this.context.composerID,null)},render:function(){var a=null,c=this.props.productTaggerType!==b("CommerceProductTaggerType").NONE;c?a=this._onProductTagClick:this.props.canTagFromModal&&(a=this._onTagClick);var d=null;c?d=b("React").createElement(b("ReactComposerPhotoProductTagActionButton.react"),{composerID:this.context.composerID,productTaggerType:this.props.productTaggerType,pageID:this.context.targetID,hasTag:b("ReactComposerPhotoStore").hasTagsInPhoto(this.context.composerID,this.props.photoID),onClick:a,onHideNux:this.props.onHideProductTaggerNux,showNux:this.props.showProductTaggerNux}):this.props.enableFaceboxTagger&&(d=b("React").createElement(b("ReactComposerPhotoTagActionButton.react"),{hasTag:b("ReactComposerPhotoStore").hasTagsInPhoto(this.context.composerID,this.props.photoID),onClick:a}));a=this.props.disablePhotoEditing?null:b("React").createElement(b("ReactComposerPhotoEditActionButton.react"),{onClick:this._onEditClick});return b("React").createElement("div",{className:"_jfi"+(c?" uiContextualLayerParent":""),onClick:this._onClick,role:"presentation",tabIndex:"-1"},d,a)},renderLayers:function(){return!this.props.shown||!this.props.enableFaceboxTagger?null:{dialog:this._getDialog()}},_getDialog:function(){return b("React").createElement(b("XUIContextualDialog.react"),{ref:"dialog",shown:this.props.shown,onToggle:this._onDialogToggled,contextRef:function(){return this}.bind(this),position:"below",alignment:"center",width:i,behaviors:{LayerHideOnBlur:b("LayerHideOnBlur"),LayerHideOnEscape:b("LayerHideOnEscape"),ContextualLayerAutoFlip:b("ContextualLayerAutoFlip"),LayerTabIsolation:b("LayerTabIsolation")}},b("React").createElement(b("XUIContextualDialogBody.react"),null,this._getDialogBody()),b("React").createElement(b("XUIContextualDialogFooter.react"),null,b("React").createElement(b("XUIDialogCloseButton.react"),{use:"confirm",label:"Close",onClick:this._onCloseButtonClicked})))},_getDialogBody:function(){return this.props.faceboxes.size===0?h._("We could not find any faces to tag."):this.props.faceboxes.valueSeq().map(function(a){var c=a.taggedSubjectID?b("React").createElement(b("ReactComposerPhotoTaggedFaceboxSummary.react"),{faceboxID:a.id,onTagRemoved:this.props.onTagRemoved,taggedSubjectID:a.taggedSubjectID,taggedValue:a.taggedValue}):b("React").createElement(b("ReactComposerPhotoFaceboxTaggerContainer.react"),{faceboxID:a.id,onTagAdded:this.props.onTagAdded});return b("React").createElement(b("ImageBlock.react"),{key:a.id,className:"_qv7"},b("React").createElement(b("Image.react"),{className:"_qv8",height:j,src:a.croppedURI,width:j}),c)}.bind(this))},_onCloseButtonClicked:function(){b("ReactComposerPhotoActions").setPhotoBeingTagged(this.context.composerID,null)},_onDialogToggled:function(a){a||this._onCloseButtonClicked()},_onClick:function(){this.props.onTagIntent&&this.props.onTagIntent(),b("ReactComposerPhotoActions").setPhotoBeingTagged(this.context.composerID,this.props.photoID)},_onTagClick:function(event){this._onEditClick(event,null,b("ModalPhotoEditorTabName").TAG)},_onProductTagClick:function(event){this._onEditClick(event,null,b("ModalPhotoEditorTabName").PRODUCT_TAG)},_onEditClick:function(event,a,c){__p&&__p();event.stopPropagation();if(this._photoEditorRequest)return;b("ReactComposerPhotoActions").startPhotoEdit(this.context.composerID,this.props.photoID);a=b("XStickerPhotoEditorController").getURIBuilder().setString("grid_id",this.context.composerID).setEnum("target_type",b("PhotoEditorTargetType").COMPOSER).setInt("latest_fbid",this.props.photoID).setInt("photo_fbid",this.props.originalID||this.props.photoID).setEnum("initial_tab",c).getURI();a=b("ActorURI").create(a,this.context.actorID);this._photoEditorRequest=new(b("AsyncRequest"))(a).setFinallyHandler(function(){this._photoEditorRequest=null,b("ReactComposerPhotoActions").finishLoadingPhotoEdit(this.context.composerID,this.props.photoID)}.bind(this));this._photoEditorRequest&&this._photoEditorRequest.send();this.props.onEditClick&&this.props.onEditClick()}});e.exports=c}),null);
__d("ReactComposerCollagePhoto.react",["cx","BootloadedComponent.react","CircularProgressBar.react","CommerceProductTaggerType","Image.react","immutable","JSResource","React","ReactComposerCollageDragHandler","ReactComposerContextTypes","ReactComposerPhotoTagger.react","SphericalMediaGyroIcon.react","XUICloseButton.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){__p&&__p();var a={height:this.props.containerHeight,overflow:"hidden",position:"relative",width:this.props.containerWidth},c=Boolean(this.props.isSpherical||this.props.sphericalPhotoID),d=void 0,e=void 0,f=void 0,g=void 0,h=void 0;!c?(h=this.$1(),this.props.isDragging||(g=this.$2())):g=this.$3();this.props.isDragging||(d=this.$4());(this.props.isRecognizingFaceboxes||this.props.isLoadingPhotoEdit||this.props.uploading&&this.props.uploadProgress===100)&&(f=this.$5());this.props.uploading&&this.props.uploadProgress<100&&(e=b("React").createElement(b("CircularProgressBar.react"),{percentComplete:this.props.uploadProgress}));c="_jfc _4c06";return b("React").createElement("div",{ref:"root",className:c,onMouseDown:function(a){return this.props.dragHandler.onMouseDown(a)}.bind(this),onMouseUp:function(a){return this.props.dragHandler.onMouseUp(a)}.bind(this),onMouseMove:function(a){return this.props.dragHandler.onMouseMove(a)}.bind(this),onTouchStart:function(a){return this.props.dragHandler.onTouchStart(a)}.bind(this),onTouchMove:function(a){return this.props.dragHandler.onTouchMove(a)}.bind(this),onTouchEnd:function(a){return this.props.dragHandler.onTouchEnd(a)}.bind(this),onTouchCancel:function(a){return this.props.dragHandler.onTouchCancel(a)}.bind(this),style:a},h,b("React").createElement("div",{onMouseDown:function(a){return a.stopPropagation()}},d,g),f,e)};a.prototype.$5=function(){return b("React").createElement("div",{className:"_do4"},b("React").createElement("div",{className:"_do5"},b("React").createElement("div",{className:"_do6"})))};a.prototype.$2=function(){return!this.props.posting&&!this.props.uploading?b("React").createElement(b("ReactComposerPhotoTagger.react"),{draggingPhotos:!1,enableFaceboxTagger:this.props.enableFaceboxTagger,productTaggerType:this.props.productTaggerType,disablePhotoEditing:!this.props.enablePhotoEditing,faceboxes:this.props.faceboxes,onTagAdded:this.props.onTagAdded,onTagRemoved:this.props.onTagRemoved,showProductTaggerNux:!1,onHideProductTaggerNux:this.props.onHideProductTaggerNux,photoID:this.props.photoID,shown:this.props.showPhotoTagger}):null};a.prototype.$3=function(){if(this.props.uploading)return b("React").createElement("div",null,this.$1(),b("React").createElement(b("SphericalMediaGyroIcon.react"),{className:"_jk8"}));var a=!(this.props.posting||this.props.uploading||this.props.isDragging);return b("React").createElement("div",null,b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ReactComposerSphericalPhoto.react").__setRef("ReactComposerCollagePhoto.react"),bootloadPlaceholder:this.$5(),loadingElement:this.$5(),className:"_5g6c",containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,height:this.props.height,imageStyle:this.props.style,photoID:this.props.photoID,showEditButton:a,sphericalPhotoID:this.props.sphericalPhotoID,thumbSrc:this.props.imageSrc,uploadID:this.props.uploadID,width:this.props.width}))};a.prototype.$4=function(){return!this.props.posting?b("React").createElement(b("XUICloseButton.react"),{className:"_jfe",onClick:this.props.onRemoveButtonClicked,onMouseDown:function(a){return a.stopPropagation()},size:"medium",shade:"light"}):null};a.prototype.$1=function(){return b("React").createElement(b("Image.react"),{src:this.props.fileURL,width:this.props.width,height:this.props.height,style:this.props.style})};function a(){h.apply(this,arguments)}a.defaultProps={width:0,height:0,photoID:"",style:{},posting:!1,showPhotoTagger:!1,enableFaceboxTagger:!1,productTaggerType:b("CommerceProductTaggerType").NONE,enablePhotoEditing:!0,isSpherical:!1};a.propTypes={uploadID:c.string.isRequired,uploading:c.bool.isRequired,photoID:c.string,width:c.number.isRequired,height:c.number.isRequired,containerWidth:c.number.isRequired,containerHeight:c.number.isRequired,dragHandler:c.instanceOf(b("ReactComposerCollageDragHandler")).isRequired,isDragging:c.bool.isRequired,fileURL:c.string.isRequired,style:c.object.isRequired,uploadProgress:c.number.isRequired,faceboxes:c.instanceOf(b("immutable").Map),imageSrc:c.string,isLoadingPhotoEdit:c.bool,isRecognizingFaceboxes:c.bool,isSpherical:c.bool,sphericalPhotoID:c.string,enableFaceboxTagger:c.bool.isRequired,enablePhotoEditing:c.bool.isRequired,productTaggerType:c.string.isRequired,onHideProductTaggerNux:c.func.isRequired,showPhotoTagger:c.bool.isRequired,onTagAdded:c.func.isRequired,onTagRemoved:c.func.isRequired};a.contextTypes=b("ReactComposerContextTypes");e.exports=a}),null);
__d("ReactComposerCollagePhotoContainer.react",["React","ReactComponentWithPureRenderMixin","ReactComposerCollageDragHandler","ReactComposerCollagePhoto.react","ReactComposerContextTypes","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerPhotoActions","ReactComposerPhotoStore","ReactComposerPhotoUploadState","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactComposerCollagePhotoContainer",mixins:[b("ReactComponentWithPureRenderMixin"),b("ReactComposerPropsAndStoreBasedStateMixin")(b("ReactComposerStore"),b("ReactComposerPhotoStore"),b("ReactComposerMediaUploadStore"))],propTypes:{upload:a.object.isRequired,itemWidth:a.number.isRequired,itemHeight:a.number.isRequired,opacity:a.number,enableFaceboxTagger:a.bool,enablePhotoEditing:a.bool,dragHandler:a.instanceOf(b("ReactComposerCollageDragHandler")).isRequired,isDragging:a.bool,productTaggerType:a.string,focus:a.object.isRequired,containerWidth:a.number.isRequired,containerHeight:a.number.isRequired,isSpherical:a.bool,onRemoveItem:a.func},statics:{calculateState:function(a,c){var d=c.upload,e=this._overallProgress(d);if(d.state==b("ReactComposerPhotoUploadState").PHOTO_UPLOAD_DONE){var f=b("ReactComposerPhotoStore").getPhoto(a,c.upload.photoID);a=b("ReactComposerPhotoStore").getPhotoBeingTagged(a)===c.upload.photoID;return{uploading:!1,overallProgress:e,faceboxes:f.faceboxes,isLoadingPhotoEdit:f.isLoadingPhotoEdit,isRecognizingFaceboxes:f.isRecognizingFaceboxes,isSpherical:d.isSpherical,isSphericalDisabled:Boolean(d.sphericalPhotoID),sphericalPhotoID:d.sphericalPhotoID,showPhotoTagger:a,imageSrc:f.imageSrc}}else return{isSpherical:d.isSpherical,uploading:!0,overallProgress:e}},_overallProgress:function(a){switch(a.state){case b("ReactComposerPhotoUploadState").PHOTO_UPLOAD_RESIZE_STARTED:return.1*a.progress;case b("ReactComposerPhotoUploadState").PHOTO_UPLOAD_UPLOADING:return.1*100+.9*a.progress;case b("ReactComposerPhotoUploadState").PHOTO_UPLOAD_DONE:return 100;default:return 0}}},render:function(){var a=this._calculateSmallestFitSize(this.props.containerWidth,this.props.containerHeight),c=this._generateStyle(a,this.props.containerWidth,this.props.containerHeight);return b("React").createElement(b("ReactComposerCollagePhoto.react"),{ref:"container",uploadID:this.props.upload.id,photoID:this.props.upload.photoID,width:a.width,height:a.height,dragHandler:this.props.dragHandler,isDragging:this.props.isDragging,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,fileURL:this.props.upload.fileURL,style:c,posting:this.state.posting,uploading:this.state.uploading,uploadProgress:this.state.overallProgress,faceboxes:this.state.faceboxes,imageSrc:this.state.imageSrc,isLoadingPhotoEdit:this.state.isLoadingPhotoEdit,isRecognizingFaceboxes:this.state.isRecognizingFaceboxes,isSpherical:this.state.isSpherical,sphericalPhotoID:this.state.sphericalPhotoID,enableFaceboxTagger:this.props.enableFaceboxTagger,enablePhotoEditing:this.props.enablePhotoEditing,productTaggerType:this.props.productTaggerType,onEditClick:this._onEditClick,showPhotoTagger:this.state.showPhotoTagger,onHideProductTaggerNux:this._onHideProductTaggerNux,onTagAdded:this._onTagAdded,onTagRemoved:this._onTagRemoved,onRemoveButtonClicked:this._onRemoveButtonClicked})},_calculateSmallestFitSize:function(a,b){var c=this.props,d=c.itemWidth;c=c.itemHeight;this.state.isSpherical&&this.state.uploading&&(c=this.props.upload.height,d=this.props.upload.width);a=Math.max(a/d,b/c);return{width:Math.round(d*a),height:Math.round(c*a)}},_generateStyle:function(a,b,c){b=(a.width-b)/a.width*50;c=(a.height-c)/a.height*50;a=this.props.focus.x>=50?Math.min(this.props.focus.x,50+b):Math.max(this.props.focus.x,50-b);b=this.props.focus.y>=50?Math.min(this.props.focus.y,50+c):Math.max(this.props.focus.y,50-c);c="translate(-"+a+"%, -"+b+"%)";a={position:"absolute",left:"50%",top:"50%",WebkitTransformOrigin:"0% 0%",MozTransformOrigin:"0% 0%",msTransformOrigin:"0% 0%",WebkitTransform:c,MozTransform:c,msTransform:c};this.props.opacity&&(a.opacity=this.props.opacity);return a},_onRemoveButtonClicked:function(){this.props.onRemoveItem&&this.props.onRemoveItem(this.props.upload.id),this.state.uploading?b("ReactComposerMediaUploadActions").removeMediaUpload(this.context.composerID,this.props.upload.id):b("ReactComposerPhotoActions").removePhoto(this.context.composerID,this.props.upload.photoID,this.props.upload.id)},_onTagRemoved:function(a,c){b("ReactComposerPhotoActions").untagFacebox(this.context.composerID,this.props.upload.photoID,a,c)},_onTagAdded:function(a,c,d){b("ReactComposerPhotoActions").tagFacebox(this.context.composerID,this.props.upload.photoID,a,c,d)},_onHideProductTaggerNux:function(){},_onEditClick:function(){}});c.contextTypes=b("ReactComposerContextTypes");e.exports=c}),null);
__d("ReactComposerCollageVideo.react",["cx","CircularProgressBar.react","React","ReactComposerCollageDragHandler","XUICloseButton.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$2=function(a){var b=this.refs.video_element,c=this.refs.play_button;b.paused?(b.play(),c.style.display="none"):(b.pause(),c.style.display="block");a.stopPropagation()}.bind(this),b}a.prototype.render=function(){__p&&__p();var a={height:this.props.containerHeight,overflow:"hidden",position:"relative",width:this.props.containerWidth},c=void 0;this.props.posting||(c=b("React").createElement(b("XUICloseButton.react"),{className:"_1sju",onClick:this.props.onRemoveButtonClicked,size:"medium",shade:"light"}));var d=this.$1();return b("React").createElement("div",{ref:"root",className:"_1sjs _3dx6",style:a,onMouseDown:function(a){return this.props.dragHandler.onMouseDown(a)}.bind(this),onMouseUp:function(a){return this.props.dragHandler.onMouseUp(a)}.bind(this),onMouseMove:function(a){return this.props.dragHandler.onMouseMove(a)}.bind(this),onTouchStart:function(a){return this.props.dragHandler.onTouchStart(a)}.bind(this),onTouchMove:function(a){return this.props.dragHandler.onTouchMove(a)}.bind(this),onTouchEnd:function(a){return this.props.dragHandler.onTouchEnd(a)}.bind(this),onTouchCancel:function(a){return this.props.dragHandler.onTouchCancel(a)}.bind(this)},b("React").createElement("div",{onMouseDown:function(a){return a.stopPropagation()}},c),d,b("React").createElement("div",{className:"_1oxz",onClick:this.$2,onMouseDown:function(a){return a.stopPropagation()},ref:"play_button",role:"button",tabIndex:"0"}),b("React").createElement(b("CircularProgressBar.react"),{percentComplete:50*Math.log10(Math.max(1,this.props.uploadProgress))}))};a.prototype.$1=function(){return b("React").createElement("video",{ref:"video_element",loop:!0,muted:!0,src:this.props.fileURL,width:this.props.width,height:this.props.height,style:this.props.style})};a.defaultProps={width:0,height:0,style:{},posting:!1};a.propTypes={width:c.number.isRequired,height:c.number.isRequired,containerWidth:c.number.isRequired,containerHeight:c.number.isRequired,dragHandler:c.instanceOf(b("ReactComposerCollageDragHandler")).isRequired,fileURL:c.string.isRequired,style:c.object.isRequired,uploadProgress:c.number.isRequired};e.exports=a}),null);
__d("ReactComposerCollageVideoContainer.react",["React","ReactComposerCollageDragHandler","ReactComposerCollageVideo.react","ReactComposerContextTypes","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactComposerCollageVideoContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComposerPropsAndStoreBasedStateMixin")(b("ReactComposerStore"),b("ReactComposerMediaUploadStore"))],propTypes:{upload:a.object.isRequired,itemWidth:a.number.isRequired,itemHeight:a.number.isRequired,fileURL:a.string.isRequired,dragHandler:a.instanceOf(b("ReactComposerCollageDragHandler")).isRequired,opacity:a.number,focus:a.object.isRequired,containerWidth:a.number.isRequired,containerHeight:a.number.isRequired,onRemoveItem:a.func},statics:{calculateState:function(a,b){return{overallProgress:b.upload.progress||0}}},render:function(){var a=this._calculateSmallestFitSize(this.props.containerWidth,this.props.containerHeight),c=this._generateStyleFromFocus(a,this.props.containerWidth,this.props.containerHeight);this.props.opacity&&(c.opacity=this.props.opacity);return b("React").createElement("div",null,b("React").createElement(b("ReactComposerCollageVideo.react"),{ref:"container",width:a.width,height:a.height,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,dragHandler:this.props.dragHandler,fileURL:this.props.fileURL,style:c,uploadProgress:this.state.overallProgress,posting:this.state.posting,onRemoveButtonClicked:this._onRemoveButtonClicked}))},_calculateSmallestFitSize:function(a,b){a=Math.max(a/this.props.itemWidth,b/this.props.itemHeight);return{width:Math.round(this.props.itemWidth*a),height:Math.round(this.props.itemHeight*a)}},_generateStyleFromFocus:function(a,b,c){b=(a.width-b)/a.width*50;c=(a.height-c)/a.height*50;a=this.props.focus.x>=50?Math.min(this.props.focus.x,50+b):Math.max(this.props.focus.x,50-b);b=this.props.focus.y>=50?Math.min(this.props.focus.y,50+c):Math.max(this.props.focus.y,50-c);c="translate(-"+a+"%, -"+b+"%)";return{position:"absolute",left:"50%",top:"50%",WebkitTransformOrigin:"0% 0%",MozTransformOrigin:"0% 0%",msTransformOrigin:"0% 0%",WebkitTransform:c,MozTransform:c,msTransform:c}},_onRemoveButtonClicked:function(){this.props.onRemoveItem&&this.props.onRemoveItem(this.props.upload.id),b("ReactComposerMediaUploadActions").removeMediaUpload(this.context.composerID,this.props.upload.id)}});e.exports=c}),null);
__d("ReactComposerDraggableCollageItem.react",["cx","React","ReactComponentWithPureRenderMixin","ReactComposerCollageDragHandler","ReactComposerCollagePhotoContainer.react","ReactComposerCollageVideoContainer.react","ReactComposerContextTypes","ReactComposerMediaUploadType"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;var h=0,i=0,j={x:50,y:50};c=b("React").createClass({displayName:"ReactComposerDraggableCollageItem",_dragHandler:undefined,_grabbed:undefined,_scrollParent:undefined,contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{upload:a.object.isRequired,itemWidth:a.number.isRequired,itemHeight:a.number.isRequired,width:a.number.isRequired,height:a.number.isRequired,isDragging:a.bool,opacity:a.number,focus:a.object.isRequired,onGrab:a.func.isRequired,onDrag:a.func.isRequired,onDrop:a.func.isRequired,onRemoveItem:a.func,enableFaceboxTagger:a.bool,enablePhotoEditing:a.bool,productTaggerType:a.string},getDefaultProps:function(){return{width:h,height:i,focus:j,isDragging:!1}},render:function(){var a=this._dragHandler;a||(a=new(b("ReactComposerCollageDragHandler"))(this.props.upload.id,this.props.onGrab,this.props.onDrag,this.props.onDrop),this._dragHandler=a);var c=(this.props.isDragging?"_5uy":"")+" _3imc";return b("React").createElement("div",{className:c,key:this.props.upload.id,ref:"draggable_media"},this._getInnerMediaComponent(a))},_getInnerMediaComponent:function(a){return this.props.upload.mediaType==b("ReactComposerMediaUploadType").VIDEO?this._getInnerVideoComponent(a):this._getInnerPhotoComponent(a)},_getInnerVideoComponent:function(a){return b("React").createElement(b("ReactComposerCollageVideoContainer.react"),{key:this.props.upload.id,upload:this.props.upload,itemWidth:this.props.itemWidth,itemHeight:this.props.itemHeight,opacity:this.props.opacity,fileURL:this.props.upload.fileURL,focus:j,containerWidth:this.props.width,containerHeight:this.props.height,dragHandler:a,onRemoveItem:this.props.onRemoveItem})},_getInnerPhotoComponent:function(a){return b("React").createElement(b("ReactComposerCollagePhotoContainer.react"),{key:this.props.upload.id,upload:this.props.upload,itemWidth:this.props.itemWidth,itemHeight:this.props.itemHeight,opacity:this.props.opacity,dragHandler:a,isDragging:this.props.isDragging,focus:j,containerWidth:this.props.width,containerHeight:this.props.height,enableFaceboxTagger:this.props.enableFaceboxTagger,enablePhotoEditing:this.props.enablePhotoEditing,onRemoveItem:this.props.onRemoveItem,productTaggerType:this.props.productTaggerType})}});e.exports=c}),null);
__d("ReactComposerCollage.react",["immutable","React","ReactComposerDraggableCollageItem.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){if(this.props.mediaUploads.size===0)return null;var a={marginLeft:5};if(!this.props.styleInfos)return null;a=babelHelpers["extends"]({},a,{position:"relative",width:this.props.width,height:this.props.height});return b("React").createElement("div",{style:{margin:"auto",width:this.props.scaleFactor*100+"%"}},b("React").createElement("div",{style:a},this.$1()))};a.prototype.$1=function(){var a=this.props.mediaUploads.sortBy(function(a){return a.id}),b=[];a.forEach(function(a){a=this.$2(a);a&&b.push(a)}.bind(this));return b};a.prototype.$2=function(a){var c=this.props.styleInfos;if(!c)return null;c=c.get(a.id);if(!c)return null;var d=this.$3(c),e={left:d.left,top:d.top,height:d.height,width:d.width,zIndex:d.zIndex,position:"absolute"};return b("React").createElement("div",{style:e,key:a.id},this.$4(a,d,c))};a.prototype.$3=function(a){var b=a.dragEffectPercent/100,c=1.075*b+1*(1-b),d=.9*b+1*(1-b);d=Math.round(d*100)/100;b=Math.round(b*80)+20;var e=Math.round(a.height*c);c=Math.round(a.width*c);e=babelHelpers["extends"]({},a,{height:e,top:Math.round(a.centerY-e/2),width:c,left:Math.round(a.centerX-c/2),zIndex:b});d<1&&(e.opacity=d);return e};a.prototype.$5=function(a){var b=a.width,c=a.height;a.isSpherical&&(b=c=Math.min(b,c));return{width:b,height:c}};a.prototype.$4=function(a,c,d){d=Math.round(d.dragEffectPercent)>0;var e=this.$5(a);return b("React").createElement(b("ReactComposerDraggableCollageItem.react"),{key:a.id,upload:a,itemWidth:e.width,itemHeight:e.height,width:c.width,height:c.height,opacity:c.opacity,isDragging:d,enableFaceboxTagger:this.props.enableFaceboxTagger,enablePhotoEditing:this.props.enablePhotoEditing,productTaggerType:this.props.productTaggerType,onGrab:this.props.onGrab,onDrag:this.props.onDrag,onDrop:this.props.onDrop,onRemoveItem:this.props.onRemoveItem})};function a(){g.apply(this,arguments)}a.propTypes={styleInfos:c.instanceOf(Map),mediaUploads:c.instanceOf(b("immutable").List).isRequired,enableFaceboxTagger:c.bool,enablePhotoEditing:c.bool,productTaggerType:c.string,width:c.number,height:c.number,onDrag:c.func,onDrop:c.func,onGrab:c.func,onRemoveItem:c.func};e.exports=a}),null);
__d("ReactComposerCollageAnimationUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=Object.prototype.hasOwnProperty;a={equal:function(a,b){return Math.abs(a-b)<.5},isZero:function(a){if(typeof a!=="object"||a===null)return!1;var b=Object.keys(a);for(var c=0;c<b.length;c++)if(!this.equal(a[b[c]],0))return!1;return!0},isEqual:function(a,b){if(typeof a!=="object"||a===null||typeof b!=="object"||b===null)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(var d=0;d<c.length;d++)if(!g.call(b,c[d])||!this.equal(a[c[d]],b[c[d]]))return!1;return!0}};e.exports=a}),null);
__d("ReactComposerCollageAnimationController",["ReactComposerCollageAnimationUtils","performanceNow","requestAnimationFrame"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=.1,h=2e3,i=1;c={springConstant:300,dampingConstant:25};d={springConstant:300,dampingConstant:25};f={springConstant:200,dampingConstant:16};var j=new Map([["centerX",c],["centerY",c],["height",d],["width",d],["dragEffectPercent",f]]),k={centerX:!0,centerY:!0,height:!1,width:!1};function a(a,b,c,d,e,f){this.$7=!1,this.$8=0,this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e,this.$6=f}a.prototype.startAnimating=function(){if(this.$7)return;this.$7=!0;this.$8=b("performanceNow")();b("requestAnimationFrame")(function(){return this.$9()}.bind(this))};a.prototype.stopAnimating=function(){this.$7=!1};a.prototype.$9=function(){__p&&__p();if(!this.$7)return;var a=!1,c=b("performanceNow")(),d=(c-this.$8)/1e3;d=Math.min(d,g);this.$8=c;var e=this.$1(),f=this.$3(),h=this.$5(),i=this.$6();e.forEach(function(c,g){__p&&__p();var j=f.get(g)||{},k=h.get(g);if(!k)return;var l=i.get(g),m=this.$10(c,k,j);m=this.$11(j,m,d,l);var n=this.$12(c,m,d,l,k);this.$13(c,n,k,j);b("ReactComposerCollageAnimationUtils").isZero(m)||(a=!0,f.set(g,m));if(!b("ReactComposerCollageAnimationUtils").isEqual(c,n)){a=!0;if(l){k=n.width-c.width;j=n.height-c.height;m=k*((l.x-c.centerX)/(c.width||1));k=j*((l.y-c.centerY)/(c.height||1));n.centerX-=m;n.centerY-=k}}e.set(g,n)}.bind(this));a&&this.$7?(this.$2(e),this.$4(f),b("requestAnimationFrame")(function(){return this.$9()}.bind(this))):this.$7=!1};a.prototype.$13=function(a,b,c,d){j.forEach(function(e,f){e=Math.abs(a[f]-b[f]);var g=Math.abs(c[f]-b[f]);e<i&&g<.5&&(b[f]=c[f],d[f]=0)})};a.prototype.$10=function(a,b,c){var d={};j.forEach(function(e,f){d[f]=e.springConstant*(b[f]-a[f])-e.dampingConstant*(c[f]||0)});return d};a.prototype.$11=function(a,b,c,d){var e={};j.forEach(function(f,g){e[g]=d&&k[g]?0:Math.max(-h,Math.min(h,(a[g]||0)+b[g]*c))});return e};a.prototype.$12=function(a,b,c,d,e){var f={};j.forEach(function(g,h){g=a[h]+b[h]*c;g=this.$14(g,a[h],e[h]);f[h]=d&&k[h]?a[h]:g}.bind(this));return f};a.prototype.$14=function(a,b,c){var d=Math.abs(a-c);b=Math.abs(b-c);if(d>b){d=b/10;return a>c?c+d:c-d}else return a};e.exports=a}),null);
__d("ReactComposerCollageContainer.react",["immutable","React","ReactComponentWithPureRenderMixin","ReactComposerCollage.react","ReactComposerCollageAnimationController","ReactComposerCollageUtils","ReactComposerContextTypes","ReactComposerMediaUploadActions","ReactDOM","Vector","VelocityTracker"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=500;d=b("React").createClass({displayName:"ReactComposerCollageContainer",_orderedUploads:b("immutable").List(),_width:c,_layoutConfig:null,_currentStyles:new Map(),_targetLocations:new Map(),_currentVelocities:new Map(),_dragPoints:new Map(),_velocityTrackers:new Map(),_animationController:null,_allowLayoutChanges:!0,contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{containerWidth:a.number,scaleFactor:a.number,mediaUploads:a.instanceOf(b("immutable").List).isRequired,enableFaceboxTagger:a.bool,productTaggerType:a.string,disablePhotoEditing:a.bool,showSellUploadLink:a.bool},getInitialState:function(){this._currentStyles=new Map();return{currentStyles:new Map()}},UNSAFE_componentWillMount:function(){this._updateVarsFromProps(this.props),this._animationController&&this._animationController.startAnimating()},componentWillUnmount:function(){this._animationController&&this._animationController.stopAnimating()},UNSAFE_componentWillReceiveProps:function(a){this._updateVarsFromProps(a)},_getCollageItemStyles:function(){return this._currentStyles},_setCollageItemStyles:function(a){this._currentStyles=a,this.setState({currentStyles:a}),this.forceUpdate()},_getCollageItemVelocities:function(){return this._currentVelocities},_setCollageItemVelocities:function(a){this._currentVelocities=a},_getCollageItemDestinations:function(){return this._targetLocations},_getCollageItemDragPoints:function(){return this._dragPoints},_updateVarsFromProps:function(a){__p&&__p();this._animationController||(this._animationController=new(b("ReactComposerCollageAnimationController"))(function(){return this._getCollageItemStyles()}.bind(this),function(a){return this._setCollageItemStyles(a)}.bind(this),function(){return this._getCollageItemVelocities()}.bind(this),function(a){return this._setCollageItemVelocities(a)}.bind(this),function(){return this._getCollageItemDestinations()}.bind(this),function(){return this._getCollageItemDragPoints()}.bind(this)));this._width=a.containerWidth*a.scaleFactor-10;a=a.mediaUploads.filter(function(a){return!!a.width&&!!a.height});this._onNewOrderedUploads(a)},_onNewOrderedUploads:function(a){this._orderedUploads=a,this._recomputeStyles()},_recomputeStyles:function(){__p&&__p();var a=this;this._orderedUploads.size>0?(function(){__p&&__p();var c=[];a._orderedUploads.size===1?(a._layoutConfig=null,c=b("ReactComposerCollageUtils").getSingleItemStyleInfo(a._orderedUploads.first(),a._width)):(a._layoutConfig=b("ReactComposerCollageUtils").getCollageLayoutConfig(a._orderedUploads,a._width),c=a._layoutConfig.getItemStyleInfos());var d=new Map(),e=a._currentStyles,f=!1;a._orderedUploads.forEach(function(a,b){b=c[b];b={centerX:b.left+b.width/2,centerY:b.top+b.height/2,width:b.width,height:b.height,dragEffectPercent:this._dragPoints.get(a.id)?100:0};d.set(a.id,b);if(!e.get(a.id)){b=babelHelpers["extends"]({},b,{width:0,height:0});e.set(a.id,b);f=!0}}.bind(a));a._targetLocations=d;f&&a._setCollageItemStyles(e);a._animationController&&a._animationController.startAnimating()})():(this._layoutConfig=null,this._targetLocations=new Map(),this._currentVelocities=new Map())},render:function(){if(!this._orderedUploads||!this._orderedUploads.size)return null;var a=0;this._layoutConfig?a=this._layoutConfig.getCalculatedHeight():this.state.currentStyles.forEach(function(b){a=b.height});return b("React").createElement(b("ReactComposerCollage.react"),{styleInfos:this.state.currentStyles,mediaUploads:this._orderedUploads,enableFaceboxTagger:this.props.enableFaceboxTagger,enablePhotoEditing:this.props.enablePhotoEditing,productTaggerType:this.props.productTaggerType,onGrab:this._onGrab,onDrag:this._onDrag,onDrop:this._onDrop,width:this._width,height:a,scaleFactor:this.props.scaleFactor,onRemoveItem:function(a){return this._onRemoveItem(a)}.bind(this)})},_onGrab:function(a,c){if(this._orderedUploads.size<2)return;var d=b("Vector").getElementPosition(b("ReactDOM").findDOMNode(this));c=c.sub(d);this._dragPoints.set(a,c);this._recomputeStyles();d=new(b("VelocityTracker"))();d.update(c.x,c.y);this._velocityTrackers.set(a,d)},_onRemoveItem:function(a){this._currentStyles["delete"](a),this._currentVelocities["delete"](a),this._dragPoints["delete"](a)},_onDrag:function(a,c,d){__p&&__p();if(this._orderedUploads.size<2)return;var e=this._currentStyles,f=babelHelpers["extends"]({},e.get(a));f.centerX+=d.x;f.centerY+=d.y;e.set(a,f);this._setCollageItemStyles(e);d=b("Vector").getElementPosition(b("ReactDOM").findDOMNode(this));c=c.sub(d);this._dragPoints.set(a,c);d=this._velocityTrackers.get(a);d&&d.update(c.x,c.y);var g=this._orderedUploads;if(!g)return;if(!this._allowLayoutChanges){d=!0;this._dragPoints.forEach(function(a,b){if(!a)return;a=g.findIndex(function(a){return a.id===b});var c=e.get(b);if(!c)return;c=this._getCollageIndex(g,c.centerX,c.centerY);c!==a&&(d=!1)}.bind(this));if(d)this._allowLayoutChanges=!0;else return}c=g.findIndex(function(b){return b.id===a});f=this._getCollageIndex(g,f.centerX,f.centerY);if(f!==0&&!f)return;if(c==f&&c>=0&&f>=0)return;f=g.splice(c,1,g.get(f)).splice(f,1,g.get(c));this._allowLayoutChanges=!1;this._onNewOrderedUploads(f)},_onDrop:function(a,c){__p&&__p();if(this._orderedUploads.size<2)return;this._dragPoints.set(a,null);this._recomputeStyles();c=this._velocityTrackers.get(a);this._velocityTrackers.set(a,null);var d=this._currentVelocities.get(a);d&&(d.centerX=c?c.getVelocityX():0,d.centerY=c?c.getVelocityY():0,this._currentVelocities.set(a,d));c=this._orderedUploads;if(!c)return;a=c.map(function(a){return a.id});b("ReactComposerMediaUploadActions").reorderMedias(this.context.composerID,a)},_getCollageIndex:function(a,c,d){a=b("ReactComposerCollageUtils").getCollageLayoutConfig(a,this._width);return a&&a.getIndexForPoint(c,d)}});e.exports=d}),null);
__d("ReactComposerCollagePlusButton.react",["cx","fbt","Link.react","React","ReactComposerAttachmentType","ReactComposerConfig","ReactComposerLoggingName","ReactComposerMediaFilePickerController.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=this.props.composerConfig.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA];return b("React").createElement(b("ReactComposerMediaFilePickerController.react"),{containerClassName:"_kqb",loggingName:b("ReactComposerLoggingName").MEDIA_COLLAGE_PLUS_BUTTON,disableFaceRecognition:!this.props.enableFaceboxTagger,mediaAcceptParam:this.props.composerConfig.mediaAcceptParam,mediaConfig:a,photoLimit:a.photoLimit,targetData:this.props.composerConfig.targetData},b("React").createElement(b("Link.react"),null,b("React").createElement("span",{className:"_kqk"}),h._("Add more photos \/ videos")))};function a(){i.apply(this,arguments)}a.propTypes={composerConfig:b("ReactComposerConfig").isRequired,enableFaceboxTagger:c.bool};e.exports=a}),null);
__d("ReactComposerCrossPostToInstagramRow.react",["cx","fbt","FBToggleSwitch.react","LeftFillRightFitLayout.react","PagesComposerActions","React","XUICardSection.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=function(a){b("PagesComposerActions").setInstagramCrossPosting(this.props.composerID,a)}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("XUICardSection.react"),{className:"_1nth"},b("React").createElement(b("LeftFillRightFitLayout.react"),null,b("React").createElement("div",null,b("React").createElement("div",{className:"_1nti"}),b("React").createElement("div",{className:"_1ntj"},h._("Post this photo to Instagram?"))),b("React").createElement("div",{className:"_1ntk"},b("React").createElement(b("FBToggleSwitch.react"),{onToggle:this.$1}))))};e.exports=a}),null);
__d("ReactComposerMediaAttachmentButtons.react",["cx","fbt","ComposerTargetData","DOMContainer.react","FileInput.react","Grid.react","ReactComposerContextTypes","ReactComposerLoggingActions","ReactComposerLoggingName","ReactComposerMediaUtils","Link.react","ReactComponentWithPureRenderMixin","React","VideoUploadConfig"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("Grid.react").GridItem;a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactComposerMediaAttachmentButtons",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{createAlbumLink:a.any,mediaAcceptParam:a.shape({photos:a.string,both:a.string}).isRequired,onFilesSelected:a.func.isRequired,canUploadPhotos:a.bool,targetData:a.instanceOf(b("ComposerTargetData")).isRequired},getDefaultProps:function(){return{mediaAcceptParam:{}}},getInitialState:function(){return{createAlbumLink:null}},componentDidMount:function(){if(this.props.createAlbumLink){var a=b("React").createElement(b("DOMContainer.react"),{className:"_3mc1",display:"block"},this.props.createAlbumLink);this.setState({createAlbumLink:a})}},render:function(){var a=[];a.push(this._getUploadPhotosButton());this.state.createAlbumLink&&a.push(b("React").createElement(i,{className:"_4l9a",key:"createAlbum"},b("React").createElement(b("Link.react"),{className:"_2709"},this.state.createAlbumLink)));return b("React").createElement("div",{className:"_4l99"},b("React").createElement(b("Grid.react"),{className:"_2707",cols:a.length},a.filter(function(a){return a!=null})))},_getUploadPhotosButton:function(){if(!this.props.canUploadPhotos)return null;var a=this.props.targetData.targetSupportsMultiplePhotos,c=this.props.mediaAcceptParam.both,d=void 0,e=b("VideoUploadConfig").allowMultimedia&&this.props.targetData.targetSupportsMultiMedia;a?e?d=h._("Upload Photos\/Videos"):d=h._("Upload Photos\/Video"):d=h._("Upload Photo\/Video");return b("React").createElement(i,{className:"_4l9a",key:"uploadPhoto"},b("React").createElement(b("FileInput.react"),{accept:c,multiple:a,name:"composer_photo",onChange:this._onFilesSelected,onClick:this._onUploadPhotosClick,ref:"fileInput","data-testid":"media-attachment-add-photo"},b("React").createElement(b("Link.react"),{className:"_2709"},b("React").createElement("div",{className:"_270a"},d))))},_onUploadPhotosClick:function(){b("ReactComposerLoggingActions").mediaUploadInputClicked(this.context.composerID,b("ReactComposerLoggingName").MEDIA_ATTACHMENT_UPLOAD_BUTTON)},_onFilesSelected:function(event){this.props.onFilesSelected(event,this.refs.fileInput.getFileInput()),b("ReactComposerMediaUtils").clearInput(this.refs.fileInput.getFileInput())}});e.exports=c}),null);
__d("ReactComposerFailedVideoXUploadContainer.react",["React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerFailedMediaUpload.react","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerMediaUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactComposerFailedVideoXUploadContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{error:a.object.isRequired,filename:a.string,uploadID:a.string.isRequired},render:function(){return b("React").createElement(b("ReactComposerFailedMediaUpload.react"),babelHelpers["extends"]({},this.props,{onDismissClick:this._onDismissClick,onRemoveClick:this._onDismissClick,onRetryClick:this._onRetryClick}))},_onDismissClick:function(){b("ReactComposerMediaUploadActions").removeMediaUpload(this.context.composerID,this.props.uploadID)},_onRetryClick:function(){var a=b("ReactComposerMediaUploadStore").getMediaUpload(this.context.composerID,this.props.uploadID).fileUpload;a.manuallyRetried=!0;var c=b("ReactComposerMediaUtils").getVideoXUploader(this.context.composerID);c.uploadVideo(a)}});e.exports=c}),null);
__d("ReactComposerPhoto.react",["cx","fbt","ix","CommerceProductTaggerType","Image.react","ImageBlock.react","immutable","LoadingIndicator.react","React","ReactComposerContextTypes","ReactComposerMediaConfig","ReactComposerPhotoTagger.react","ReactComposerPhotoThumbnail.react","ReactComposerStore","FluxContainer","ReactFragment","XUIAmbientNUX.react","XUICloseButton.react","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIText.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;j=babelHelpers.inherits(a,b("React").PureComponent);j&&j.prototype;a.getStores=function(){return[b("ReactComposerStore")]};a.calculateState=function(a,c){return{posting:b("ReactComposerStore").isPosting(a)}};a.prototype.$1=function(){var a=this.context.gks.local_image_display?this.props.fileURL:null;return b("React").createElement(b("ReactComposerPhotoThumbnail.react"),{bgClassName:"_1a__",bgURL:a,height:b("ReactComposerMediaConfig").photo.thumbHeight,imgSrc:this.props.thumbSrc,width:b("ReactComposerMediaConfig").photo.thumbWidth,alt:this.props.label})};a.prototype.render=function(){var a={width:b("ReactComposerMediaConfig").photo.thumbWidth,height:b("ReactComposerMediaConfig").photo.thumbHeight},c=this.props.isRecognizingFaceboxes||this.props.isLoadingPhotoEdit?b("React").createElement("div",{className:"_jff"},b("React").createElement(b("LoadingIndicator.react"),{className:"_jfg",size:"small",color:"white"})):null,d=this.props.showProductTaggerNux?"_jfc"+(this.props.isRecognizingFaceboxes?" _jfd":"")+" _43p_":"_jfc"+(this.props.isRecognizingFaceboxes?" _jfd":""),e=void 0,f=void 0;this.state.posting||(e=b("React").createElement(b("XUICloseButton.react"),{className:"_jfe",label:h._("Remove photo"),onClick:this.props.onRemoveButtonClicked,size:"medium",shade:"light"}),f=b("React").createElement(b("ReactComposerPhotoTagger.react"),{canTagFromModal:this.props.canTagFromModal,draggingPhotos:this.props.draggingPhotos,enableFaceboxTagger:this.props.enableFaceboxTagger,productTaggerType:this.props.productTaggerType,disablePhotoEditing:this.props.disablePhotoEditing,faceboxes:this.props.faceboxes,onEditClick:this.props.onEditClick,onHideProductTaggerNux:this.props.onHideProductTaggerNux,onTagIntent:this.props.onTagIntent,onTagAdded:this.props.onTagAdded,onTagRemoved:this.props.onTagRemoved,originalID:this.props.originalID,photoID:this.props.photoID,shown:this.props.showPhotoTagger,showProductTaggerNux:this.props.showProductTaggerNux}));return b("React").createElement("span",null,b("React").createElement("div",{ref:"root",className:d,style:a},this.$1(),this.props.disableRemovePhotos?null:e,c,f),this.renderLayers())};a.prototype.renderLayers=function(){return b("ReactFragment").create({taggingNUX:this.props.enableFaceboxTagger?this.$2():null,stickersNUX:this.props.disablePhotoEditing?null:this.$3()})};a.prototype.$2=function(){return b("React").createElement(b("XUIContextualDialog.react"),{contextRef:function(){return this.refs.root}.bind(this),position:"below",alignment:"left",shown:this.props.showTaggingNUX,width:300},b("React").createElement(b("XUIContextualDialogBody.react"),null,b("React").createElement(b("XUICloseButton.react"),{className:"rfloat",onClick:this.props.onTaggingNUXClose}),b("React").createElement("div",null,b("React").createElement(b("XUIText.react"),{weight:"bold",display:"block"},h._("Now It's Easier to Tag Photos.")),h._("Click photos with a {tagging_badge_icon} to review tag suggestions or add, edit, and remove tags. When you post the photo, your tags will be applied.",[h._param("tagging_badge_icon",b("React").createElement(b("Image.react"),{className:"_2z-r",src:i("95679")}))]))))};a.prototype.$3=function(){return b("React").createElement(b("XUIAmbientNUX.react"),{alignment:"right",contextRef:function(){return this.refs.root}.bind(this),onCloseButtonClick:this.props.onStickersNUXClose,position:"below",shown:this.props.showStickersNUX},b("React").createElement(b("ImageBlock.react"),{spacing:"medium"},b("React").createElement(b("Image.react"),{src:i("95645")}),b("React").createElement("div",{className:"_21ft"},b("React").createElement("div",{className:"_21fs"},h._("New! Add Stickers!")),h._("You can now add stickers to your photos"))))};function a(){j.apply(this,arguments)}a.defaultProps={enableFaceboxTagger:!0,productTaggerType:b("CommerceProductTaggerType").NONE,disablePhotoEditing:!1};a.contextTypes=b("ReactComposerContextTypes");e.exports=b("FluxContainer").create(a,{withContext:!0,withProps:!0})}),null);
__d("ReactComposerPhotoContainer.react",["cx","BootloadedComponent.react","CommerceSelfServeNUXType","ComposerNUXType","FluxContainer","immutable","JSResource","LoadingIndicator.react","React","ReactComposerContextTypes","ReactComposerMediaUploadActions","ReactComposerNUXActions","ReactComposerNUXStore","ReactComposerPhoto.react","ReactComposerPhotoActions","ReactComposerPhotoStore","ReactDOM"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;a=babelHelpers.inherits(i,b("React").PureComponent);h=a&&a.prototype;function i(){__p&&__p();var a;(a=h.constructor).call.apply(a,[this].concat(Array.prototype.slice.call(arguments)));this.$7=function(){this.$9()}.bind(this);this.$6=function(){this.props.photoID?b("ReactComposerPhotoActions").removePhoto(this.context.composerID,this.props.photoID,this.props.uploadID):b("ReactComposerMediaUploadActions").removeMediaUpload(this.context.composerID,this.props.uploadID)}.bind(this);this.$9=function(){b("ReactComposerNUXActions").nuxWasSeen(this.context.composerID,b("ComposerNUXType").ADD_STICKERS_NUX)}.bind(this);this.$10=function(a,c,d){!(this.state.isSpherical||this.props.sphericalPhotoID)&&this.props.photoID&&b("ReactComposerPhotoActions").tagFacebox(this.context.composerID,this.props.photoID,a,c,d)}.bind(this);this.$1=function(){b("ReactComposerNUXActions").nuxWasSeen(this.context.composerID,b("ComposerNUXType").TAGGING_FLYOUT_NUX)}.bind(this);this.$11=function(){this.state.showTaggingNUX&&this.$1()}.bind(this);this.$12=function(a,c){!(this.state.isSpherical||this.props.sphericalPhotoID)&&this.props.photoID&&b("ReactComposerPhotoActions").untagFacebox(this.context.composerID,this.props.photoID,a,c)}.bind(this);this.$8=function(){b("ReactComposerNUXActions").nuxWasSeen(this.context.composerID,b("CommerceSelfServeNUXType").COMPOSER_PRODUCT_PHOTO_TAGGER_BUTTON)}.bind(this);this.beforeCalculateInitialState(this.context.composerID,this.props);this.state=i.calculateState(this.state,this.props,this.context);this.$1=this.$1.bind(this)}i.getStores=function(){return[b("ReactComposerNUXStore"),b("ReactComposerPhotoStore")]};i.prototype.beforeCalculateInitialState=function(a,c){if(c.photoID){var d=b("ReactComposerPhotoStore").getPhoto(a,c.photoID);if(d){var e=i.$2(a,d,c.nuxConfig,c.index);c=!e&&i.$3(a,d,c.nuxConfig,c.index);e&&b("ReactComposerNUXActions").nuxWasShown(a,b("ComposerNUXType").ADD_STICKERS_NUX,d.id);c&&b("ReactComposerNUXActions").nuxWasShown(a,b("ComposerNUXType").TAGGING_FLYOUT_NUX,d.id)}}};i.calculateState=function(a,c,d){__p&&__p();a=d.composerID;if(c.photoID){d=b("ReactComposerPhotoStore").getPhoto(a,c.photoID);if(d){var e=this.$2(a,d,c.nuxConfig,c.index),f=!e&&this.$3(a,d,c.nuxConfig,c.index),g=b("ReactComposerPhotoStore").getPhotoBeingTagged(a)===c.photoID;a=c.showProductTaggerNux===!0&&this.$4(a);return{faceboxes:d.faceboxes,isLoadingPhotoEdit:d.isLoadingPhotoEdit,isRecognizingFaceboxes:d.isRecognizingFaceboxes,isSpherical:Boolean(d.cubestripURI),showPhotoTagger:g,showProductTaggerNux:a,showStickersNUX:e,showTaggingNUX:f,thumbSrc:d.thumbSrc}}}return{faceboxes:b("immutable").Map(),isLoadingPhotoEdit:!1,isRecognizingFaceboxes:!1,isSpherical:c.isSpherical,showPhotoTagger:!1,showProductTaggerNux:!!c.showProductTaggerNux,showStickersNUX:!1,showTaggingNUX:!1,thumbSrc:""}};i.$5=function(a,c,d,e,f){var g=b("ReactComposerNUXStore").getNUXShownPhotoID(a,e);a=b("ReactComposerNUXStore").hasNUXBeenSeen(a,e);return!!d[e]&&!a&&(!g||g===c.id)&&f===0};i.$2=function(a,c,d,e){return this.$5(a,c,d,b("ComposerNUXType").ADD_STICKERS_NUX,e)};i.$3=function(a,c,d,e){return this.$5(a,c,d,b("ComposerNUXType").TAGGING_FLYOUT_NUX,e)&&c.faceboxes.size>0};i.$4=function(a){return!b("ReactComposerNUXStore").hasNUXBeenSeen(a,b("CommerceSelfServeNUXType").COMPOSER_PRODUCT_PHOTO_TAGGER_BUTTON)};i.prototype.componentDidMount=function(){setTimeout(function(){var a=this.props.dragHandler;a&&a.add(b("ReactDOM").findDOMNode(this.refs.container))}.bind(this),0)};i.prototype.componentWillUnmount=function(){setTimeout(function(){var a=this.props.dragHandler;a&&a.remove(b("ReactDOM").findDOMNode(this.refs.container))}.bind(this),0)};i.prototype.render=function(){if(this.state.isSpherical||this.props.sphericalPhotoID){var a=b("React").createElement("div",{className:"_30t9"},b("React").createElement(b("LoadingIndicator.react"),{className:"_4qlq",size:"small",color:"white"}));return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ReactComposerSphericalPhoto.react").__setRef("ReactComposerPhotoContainer.react"),bootloadPlaceholder:a,className:"_4j47 _jfc",showEditButton:!0,fileURL:this.props.fileURL,alt:this.props.label,onRemoveButtonClicked:this.$6,photoID:this.props.photoID,sphericalPhotoID:this.props.sphericalPhotoID,thumbSrc:this.state.thumbSrc,uploadID:this.props.uploadID,sphericalImage:this.props.sphericalImage,useLocalSphericalImage:this.props.useLocalSphericalImage,ref:"container"})}else return b("React").createElement(b("ReactComposerPhoto.react"),babelHelpers["extends"]({},this.props,this.state,{onEditClick:this.$7,onHideProductTaggerNux:this.$8,onRemoveButtonClicked:this.$6,onStickersNUXClose:this.$9,onTagAdded:this.$10,onTagIntent:this.$11,onTaggingNUXClose:this.$1,onTagRemoved:this.$12,ref:"container"}))};i.contextTypes=b("ReactComposerContextTypes");e.exports=b("FluxContainer").create(i,{withContext:!0,withProps:!0})}),null);
__d("ReactComposerPhotoUploadPlaceholder.react",["ix","cx","CircularProgressBar.react","Image.react","LoadingIndicator.react","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerPhotoUploadState","XUICloseButton.react","asset"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactComposerPhotoUploadPlaceholder",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{onRemoveButtonClicked:a.func.isRequired,uploadID:a.string.isRequired,uploadState:a.oneOf(Object.keys(b("ReactComposerPhotoUploadState"))).isRequired,uploadProgress:a.number,isSpherical:a.bool,fileURL:a.string},render:function(){__p&&__p();var a=null,c=null,d=this.props.uploadState,e=d===b("ReactComposerPhotoUploadState").PHOTO_UPLOAD_RESIZE_STARTED;d=d===b("ReactComposerPhotoUploadState").PHOTO_UPLOAD_UPLOADING;if((e||d)&&!this.props.isDocument){e="_1b01"+(e?" _1b02":"")+(d?" _1b03":"");a=b("React").createElement(b("CircularProgressBar.react"),{percentComplete:this.props.uploadProgress,className:e})}else c=b("React").createElement(b("LoadingIndicator.react"),{className:"_1b00",color:"white",size:"medium"});d=void 0;this.props.isSpherical&&(d=b("React").createElement(b("Image.react"),{className:"_1az2",src:g("411966"),alt:"360 Photo"}));e={};this.context.gks.local_image_display&&this.props.fileURL&&(e={backgroundImage:"url("+this.props.fileURL+")"});return b("React").createElement("div",{className:"_50_c _1a__",style:e},b("React").createElement(b("XUICloseButton.react"),{className:"_1b04",onClick:this.props.onRemoveButtonClicked,size:"medium",shade:"dark"}),a,c,d)}});e.exports=c}),null);
__d("ReactComposerPhotoUploadPlaceholderContainer.react",["DocumentUploadConfig","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerPhotoUploadPlaceholder.react","ReactComposerPropsAndStoreBasedStateMixin"],(function(a,b,c,d,e,f){"use strict";a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactComposerPhotoUploadPlaceholderContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin"),b("ReactComposerPropsAndStoreBasedStateMixin")(b("ReactComposerMediaUploadStore"))],propTypes:{uploadID:a.string.isRequired},statics:{calculateState:function(a,c){a=b("ReactComposerMediaUploadStore").getMediaUpload(a,c.uploadID);return{uploadProgress:a.progress,uploadState:a.state,isSpherical:a.isSpherical,isDocument:a.fileUpload&&b("DocumentUploadConfig").isSupported(a.fileUpload.getFile().type)}}},render:function(){return b("React").createElement(b("ReactComposerPhotoUploadPlaceholder.react"),babelHelpers["extends"]({},this.props,this.state,{onRemoveButtonClicked:this._onRemoveButtonClicked}))},_onRemoveButtonClicked:function(){b("ReactComposerMediaUploadActions").removeMediaUpload(this.context.composerID,this.props.uploadID)}});e.exports=c}),null);
__d("ProfileCustomVideoThumbnailEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OPEN_EDIT_DIALOG:"open_edit_dialog",CLOSE_EDIT_DIALOG:"close_edit_dialog",CANCEL_EDITING:"cancel_editing",CANCEL_DISCARD:"cancel_discard",DISCARD_EDITING:"discard_editing",SAVE_EDITING:"save_editing",CHOOSE_SELECTED_THUMBNAIL:"choose_selected_thumbnail",ADD_CUSTOM_THUMBNAIL:"add_custom_thumbnail",ADD_TEXT_TO_THUMBNAIL:"add_text_to_thumbnail",CHANGE_SELECTED_THUMBNAIL:"change_selected_thumbnail",UPLOAD_WITH_CUSTOM_THUMBNAIL:"upload_with_custom_thumbnail",UPLOAD_WITH_GENERATED_THUMBNAIL:"upload_with_generated_thumbnail",UPLOAD_WITH_NO_THUMBNAIL:"upload_with_no_thumbnail",UPLOAD_THUMBNAIL_WITH_TEXT:"upload_thumbnail_with_text",RESIZE_TEXT_BOX:"resize_text_box",DRAG_TEXT_BOX:"drag_text_box",CHANGE_TEXT_FONT:"change_text_font",CHANGE_TEXT_ALIGNMENT:"change_text_alignment"})}),null);
__d("ReactComposerVideoXActionButton.react",["cx","React","Tooltip","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){var a=b("joinClasses")(this.props.className,"_sru");return b("React").createElement("button",babelHelpers["extends"]({className:a,onClick:this.props.onClick,"aria-label":this.props.tooltip},b("Tooltip").propsFor(this.props.tooltip)),b("React").createElement("div",{className:this.props.iconClassName}))};function a(){h.apply(this,arguments)}a.propTypes={tooltip:c.node,className:c.string,onClick:c.func,iconClassName:c.string};e.exports=a}),null);
__d("ReactComposerVideoXEditActionButton.react",["cx","fbt","ReactComposerVideoXActionButton.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){var a=h._("Edit Video");return b("React").createElement(b("ReactComposerVideoXActionButton.react"),{className:"_3x9-",iconClassName:"_3x9_",onClick:this.props.onClick,tooltip:a})};function a(){i.apply(this,arguments)}a.propTypes={onClick:c.func};e.exports=a}),null);
__d("ReactComposerVideoXEditDialogActionTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({SET_ACTIVE_TAB:null,UPDATE_GENERATED_THUMBNAILS:null,UPDATE_SELECTED_THUMBNAIL:null,UPDATE_CUSTOM_THUMBNAIL:null,UPDATE_SCRUBBED_THUMBNAIL:null,USE_SELECTED_THUMBNAIL:null,REMOVE_DIALOG_STATE:null,REVERT_THUMBNAIL_STATE:null,SAVE_THUMBNAIL_STATE:null,SHOW_DISCARD_DIALOG:null,HIDE_DISCARD_DIALOG:null,SHOW_DIALOG:null,HIDE_DIALOG:null,MOVE_TEXT_BOX:null,RESIZE_TEXT_BOX:null,UPDATE_THUMBNAIL_TEXT:null,SET_VIDEO_DIMENSIONS:null,SET_CUSTOM_THUMBNAIL_DIMENSIONS:null,SET_TEXT_COLOR:null,SET_TEXT_FONT:null,SET_TEXT_ALIGNMENT:null,SET_TEXT_SIZE:null});e.exports=a}),null);
__d("ReactComposerVideoXEditDialogActions",["ReactComposerDispatcher","ReactComposerVideoXEditDialogActionTypes","VideoThumbnail"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={setActiveTab:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").SET_ACTIVE_TAB,activeTab:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},updateGeneratedThumbnails:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").UPDATE_GENERATED_THUMBNAILS,generatedThumbnails:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},updateSelectedThumbnail:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").UPDATE_SELECTED_THUMBNAIL,selectedThumbnail:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},updateCustomThumbnail:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").UPDATE_CUSTOM_THUMBNAIL,customThumbnail:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},updateScrubbedThumbnail:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").UPDATE_SCRUBBED_THUMBNAIL,scrubbedThumbnail:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},useSelectedThumbnail:function(a,c){a={type:b("ReactComposerVideoXEditDialogActionTypes").USE_SELECTED_THUMBNAIL,composerID:a,uploadID:c};b("ReactComposerDispatcher").dispatch(a)},removeDialogState:function(a,c){a={type:b("ReactComposerVideoXEditDialogActionTypes").REMOVE_DIALOG_STATE,composerID:a,uploadID:c};b("ReactComposerDispatcher").dispatch(a)},saveThumbnailState:function(a,c){a={type:b("ReactComposerVideoXEditDialogActionTypes").SAVE_THUMBNAIL_STATE,composerID:a,uploadID:c};b("ReactComposerDispatcher").dispatch(a)},revertThumbnailState:function(a,c){a={type:b("ReactComposerVideoXEditDialogActionTypes").REVERT_THUMBNAIL_STATE,composerID:a,uploadID:c};b("ReactComposerDispatcher").dispatch(a)},hideDiscardDialog:function(a,c){a={type:b("ReactComposerVideoXEditDialogActionTypes").HIDE_DISCARD_DIALOG,composerID:a,uploadID:c};b("ReactComposerDispatcher").dispatch(a)},showDiscardDialog:function(a,c){a={type:b("ReactComposerVideoXEditDialogActionTypes").SHOW_DISCARD_DIALOG,composerID:a,uploadID:c};b("ReactComposerDispatcher").dispatch(a)},hideDialog:function(a,c){a={type:b("ReactComposerVideoXEditDialogActionTypes").HIDE_DIALOG,composerID:a,uploadID:c};b("ReactComposerDispatcher").dispatch(a)},showDialog:function(a,c){a={type:b("ReactComposerVideoXEditDialogActionTypes").SHOW_DIALOG,composerID:a,uploadID:c};b("ReactComposerDispatcher").dispatch(a)},moveTextBox:function(a,c,d,e){a={type:b("ReactComposerVideoXEditDialogActionTypes").MOVE_TEXT_BOX,textTop:a,textLeft:c,composerID:d,uploadID:e};b("ReactComposerDispatcher").dispatch(a)},resizeTextBox:function(a,c,d,e){a={type:b("ReactComposerVideoXEditDialogActionTypes").RESIZE_TEXT_BOX,textWidth:a,textHeight:c,composerID:d,uploadID:e};b("ReactComposerDispatcher").dispatch(a)},updateThumbnailText:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").UPDATE_THUMBNAIL_TEXT,thumbnailText:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},setVideoDimensions:function(a,c,d,e){a={type:b("ReactComposerVideoXEditDialogActionTypes").SET_VIDEO_DIMENSIONS,videoWidth:a,videoHeight:c,composerID:d,uploadID:e};b("ReactComposerDispatcher").dispatch(a)},setCustomThumbnailDimensions:function(a,c,d,e){a={type:b("ReactComposerVideoXEditDialogActionTypes").SET_CUSTOM_THUMBNAIL_DIMENSIONS,customThumbnailWidth:a,customThumbnailHeight:c,composerID:d,uploadID:e};b("ReactComposerDispatcher").dispatch(a)},setTextColor:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").SET_TEXT_COLOR,color:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},setTextFont:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").SET_TEXT_FONT,font:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},setTextAlignment:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").SET_TEXT_ALIGNMENT,alignment:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},setTextSize:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").SET_TEXT_SIZE,textSize:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)}};e.exports=a}),null);
__d("ReactComposerVideoX.react",["cx","ix","fbt","Image.react","BackgroundImage.react","React","ReactComposerMediaConfig","Tooltip.react","XUICloseButton.react","ReactComposerVideoXEditActionButton.react","ReactComposerVideoXEditDialogGatedModule","ReactComposerVideoXEditDialogActions","SimpleNUXMessage","SimpleNUXMessageTypes","XUIAmbientNUX.react","LineClamp.react","ReactComposerNUXActions","ProfileCustomVideoThumbnailTypedLogger","ProfileCustomVideoThumbnailEvent","DurationFormatter","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("ReactComposerVideoXEditDialogGatedModule").module;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);j=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.$1=function(){b("ReactComposerVideoXEditDialogActions").showDialog(this.props.composerID,this.props.uploadID),new(b("ProfileCustomVideoThumbnailTypedLogger"))().setVideoID(this.props.videoID).setEvent(b("ProfileCustomVideoThumbnailEvent").OPEN_EDIT_DIALOG).log(),b("ReactComposerVideoXEditDialogActions").saveThumbnailState(this.props.composerID,this.props.uploadID),this.props.showThumbnailNux&&this.$2()}.bind(this),this.$2=function(){b("SimpleNUXMessage").markMessageSeenByUser(b("SimpleNUXMessageTypes").CUSTOM_PROFILE_VIDEO_THUMBNAILS_NUX),b("ReactComposerNUXActions").nuxWasSeen(this.props.composerID,b("SimpleNUXMessageTypes").CUSTOM_PROFILE_VIDEO_THUMBNAILS_NUX)}.bind(this),c}a.prototype.render=function(){__p&&__p();var a={width:b("ReactComposerMediaConfig").photo.thumbWidth,height:b("ReactComposerMediaConfig").photo.thumbHeight},c=void 0,d=void 0,e=void 0,f=void 0,g=void 0;if(!this.props.posting){c=b("React").createElement(b("XUICloseButton.react"),{className:"_1sju",label:i._("Remove video"),onClick:this.props.onRemoveButtonClicked,size:"medium",shade:"light"});d=k?b("React").createElement(b("ReactComposerVideoXEditActionButton.react"),{onClick:this.$1,ref:"editButton"}):null;var h=this.props.uploadIndex>1?"left":"right";g=k?b("React").createElement(b("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.editButton}.bind(this),position:h,width:"auto",shown:this.props.showThumbnailNux,onCloseButtonClick:this.$2,key:"ambientNUX"},i._("New! Choose a thumbnail that"),b("React").createElement("br",null),i._("shows what your video is about.")):null;e=k?b("React").createElement(k,{composerID:this.props.composerID,uploadID:this.props.uploadID,videoID:this.props.videoID,videoURL:this.props.videoURL,allowTextOnThumbnail:this.props.allowTextOnThumbnail}):null;f=k?b("React").createElement("div",{className:"_nai"}):null}h=k||this.props.useThumbnailsRedesign?null:b("React").createElement("div",{className:"_2v_s"});var j=b("React").createElement(b("BackgroundImage.react"),{alt:this.props.label,src:this.props.thumbSrc,width:b("ReactComposerMediaConfig").photo.thumbWidth,height:b("ReactComposerMediaConfig").photo.thumbHeight,backgroundSize:this.props.usingPlaceholderThumbnail?"cover":"contain",className:this.props.usingPlaceholderThumbnail?"":"_33by"}),l=this.$3(),m="_1sjs"+(this.props.isRecognizingFaceboxes?" _1sjt":"")+(l!=null?" _225v":"");return b("React").createElement("div",{ref:"root",className:m,style:a},l?l:j,this.$4(),f,h,c,e,b("React").createElement("div",{className:"uiContextualLayerParent _1xob"},d,g))};a.prototype.$5=function(){return this.props.label.endsWith(".gif")};a.prototype.$3=function(){if(!this.props.useThumbnailsRedesign||!this.props.usingPlaceholderThumbnail)return null;var a=this.$5()?i._("Your GIF will show up after you post."):i._("Your video will show up after you post.");a=b("React").createElement("span",null,a,b("React").createElement("br",null),this.props.label);return b("React").createElement(b("Tooltip.react"),{position:"below",className:"_225-",display:"block",tooltip:a},b("React").createElement(b("LineClamp.react"),{lines:3,lineHeight:16,fitHeightToShorterText:!0,className:"_2260"},this.props.label))};a.prototype.$4=function(){var a=this.props.isSpherical?b("React").createElement(b("Image.react"),{className:"_40p3",src:h("95829")}):null,c=null,d=null;if(this.props.useThumbnailsRedesign)if(this.props.duration==null)d=this.$5()?b("React").createElement(b("Image.react"),{className:"_m6t",src:h("441227")}):b("React").createElement(b("Image.react"),{className:"_2261",src:h("412727")});else{var e=b("DurationFormatter").formatShort(this.props.duration);c=b("React").createElement("span",{className:"_40p4"},e)}return b("React").createElement("div",{className:"_40p5"},c,d,a)};a.propTypes={label:c.string,onRemoveButtonClicked:c.func.isRequired,thumbSrc:c.string.isRequired,posting:c.bool.isRequired};e.exports=a}),null);
__d("VideoThumbnailDimensions",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GENERATED_THUMBNAIL_HEIGHT:284,GENERATED_THUMBNAIL_WIDTH:465})}),null);
__d("ReactComposerVideoXContainer.react",["cx","EventListener","React","ReactComposerContextTypes","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerNUXActions","ReactComposerNUXStore","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerStore","ReactComposerVideoX.react","ReactComposerVideoXEditDialogActions","ReactDOM","SimpleNUXMessage","SimpleNUXMessageTypes","generateVideoThumbnails","gkx","promiseDone","VideoThumbnailDimensions"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;var h=100,i=100,j="/images/icons/timeline/placeholder/placeholder-movies.png";c=b("React").createClass({displayName:"ReactComposerVideoXContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComposerPropsAndStoreBasedStateMixin")(b("ReactComposerStore"),b("ReactComposerNUXStore"))],_loadedmetadataListener:null,propTypes:{dragHandler:a.shape({add:a.func.isRequired,remove:a.func.isRequired}),label:a.string,photoID:a.string.isRequired,uploadID:a.string.isRequired,fileURL:a.string.isRequired,isSpherical:a.bool,allowTextOnThumbnail:a.bool,metadata:a.object},statics:{calculateState:function(a,c){var d=b("ReactComposerMediaUploadStore").getMediaUpload(a.toString(),c.uploadID),e=b("ReactComposerMediaUploadStore").getUploadIndex(a.toString(),c.uploadID);d=d&&d.thumbSrc?d.thumbSrc:j;var f=b("SimpleNUXMessage").hasUserSeenMessage(b("SimpleNUXMessageTypes").CUSTOM_PROFILE_VIDEO_THUMBNAILS_NUX),g=b("ReactComposerNUXStore").getNUXShownPhotoID(a,b("SimpleNUXMessageTypes").CUSTOM_PROFILE_VIDEO_THUMBNAILS_NUX);f=!f&&(!g||g===c.photoID);f&&!g&&b("ReactComposerNUXActions").nuxWasShown(a,b("SimpleNUXMessageTypes").CUSTOM_PROFILE_VIDEO_THUMBNAILS_NUX,c.photoID);return{posting:b("ReactComposerStore").isPosting(a),thumbSrc:d,showThumbnailNux:f,uploadIndex:e}}},componentDidMount:function(){var a=b("ReactDOM").findDOMNode(this.refs.videoPlayer);this.state.thumbSrc===j&&(this._loadedmetadataListener=b("EventListener").listen(a,"loadedmetadata",this.generateVideoThumbnails));setTimeout(function(){var a=this.props.dragHandler;a&&a.add(b("ReactDOM").findDOMNode(this.refs.container))}.bind(this),0)},generateVideoThumbnails:function(){var a=b("ReactDOM").findDOMNode(this.refs.videoPlayer);b("promiseDone")(b("generateVideoThumbnails")(a,i,h,1),function(a){b("ReactComposerMediaUploadActions").setVideoThumbnail(this.context.composerID,this.props.uploadID,a.thumbnails[0].getURL())}.bind(this));b("promiseDone")(b("generateVideoThumbnails")(a,b("VideoThumbnailDimensions").GENERATED_THUMBNAIL_WIDTH,b("VideoThumbnailDimensions").GENERATED_THUMBNAIL_HEIGHT,10,"contain"),function(a){b("ReactComposerVideoXEditDialogActions").updateGeneratedThumbnails(a.thumbnails,this.context.composerID,this.props.uploadID)}.bind(this));a instanceof HTMLVideoElement&&b("ReactComposerVideoXEditDialogActions").setVideoDimensions(a.videoWidth,a.videoHeight,this.context.composerID,this.props.uploadID)},componentWillUnmount:function(){this._loadedmetadataListener&&(this._loadedmetadataListener.remove(),this._loadedmetadataListener=null),setTimeout(function(){var a=this.props.dragHandler;a&&a.remove(b("ReactDOM").findDOMNode(this.refs.container))}.bind(this),0)},render:function(){var a=b("gkx")("AT4IQ0BD-80KrUy9jThPMl5_h3pVR_OTCs7YAOJeU4NDYjdOzGdbJ6dVKhAi8c1vDw8VQzSN9yoK1LCthlcBN0Vbqw04qKsogjWOo7xZUbkSng"),c=a&&this.props.metadata&&this.props.metadata.format&&this.props.metadata.format.duration!=null?Math.floor(this.props.metadata.format.duration):null;return b("React").createElement("div",null,b("React").createElement(b("ReactComposerVideoX.react"),{label:this.props.label,posting:this.state.posting,thumbSrc:this.state.thumbSrc,usingPlaceholderThumbnail:this.state.thumbSrc===j,onRemoveButtonClicked:this._onRemoveButtonClicked,composerID:this.context.composerID,uploadID:this.props.uploadID,uploadIndex:this.state.uploadIndex,isSpherical:this.props.isSpherical,videoID:this.props.photoID,showThumbnailNux:this.state.showThumbnailNux,videoURL:this.props.fileURL,allowTextOnThumbnail:this.props.allowTextOnThumbnail,useThumbnailsRedesign:a,duration:c,ref:"container"}),this._getVideoElement())},_getVideoElement:function(){return b("React").createElement("video",{ref:"videoPlayer",className:"_2mpk",src:this.props.fileURL})},_onRemoveButtonClicked:function(){b("ReactComposerMediaUploadActions").removeMediaUpload(this.context.composerID,this.props.uploadID);b("ReactComposerVideoXEditDialogActions").removeDialogState(this.context.composerID,this.props.uploadID);var a=b("ReactComposerNUXStore").getNUXShownPhotoID(this.context.composerID,b("SimpleNUXMessageTypes").CUSTOM_PROFILE_VIDEO_THUMBNAILS_NUX);a==this.props.photoID&&b("ReactComposerNUXActions").nuxWasHidden(this.context.composerID,b("SimpleNUXMessageTypes").CUSTOM_PROFILE_VIDEO_THUMBNAILS_NUX)}});e.exports=c}),null);
__d("ReactComposerVideoXUploadPlaceholder.react",["cx","CircularProgressBar.react","LoadingIndicator.react","ProgressBar.react","React","ReactComposerPhotoUploadState","XUICloseButton.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){__p&&__p();var a=null,c=null,d=null,e=this.props.uploadState;e=e===b("ReactComposerPhotoUploadState").PHOTO_UPLOAD_UPLOADING;var f=null;this.props.useProgressTransformX?f=.99*parseFloat(this.props.uploadProgress)+1:f=Math.max(1,parseInt(this.props.uploadProgress,10));var g=50*Math.log10(f),h=this.props.useProgressLinearity?this.props.useProgressLinearity:0;h>0&&(g-=(g-f)*h);this.props.useRealProgressPercentage&&(g=parseFloat(this.props.uploadProgress));if(e){f="_5t36"+(e?" _5t3f":"");a=b("React").createElement(b("CircularProgressBar.react"),{percentComplete:g,className:f})}else d=b("React").createElement(b("XUICloseButton.react"),{className:"_5t3o",onClick:this.props.onRemoveButtonClicked,size:"medium",shade:"dark"}),c=b("React").createElement(b("LoadingIndicator.react"),{className:"_1b00",color:"white",size:"medium"});return b("React").createElement("div",{className:"_5t3l"},d,a,c)};function a(){h.apply(this,arguments)}a.propTypes={onRemoveButtonClicked:c.func.isRequired,uploadID:c.string.isRequired,uploadState:c.oneOf(Object.keys(b("ReactComposerPhotoUploadState"))).isRequired,uploadProgress:c.number,canSeeCircularProgress:c.bool,useRealProgressPercentage:c.bool,useProgressLinearity:c.number,useProgressTransformX:c.number};e.exports=a}),null);
__d("ReactComposerVideoXUploadPlaceholderContainer.react",["React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerVideoXUploadPlaceholder.react"],(function(a,b,c,d,e,f){"use strict";a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactComposerVideoXUploadPlaceholderContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin"),b("ReactComposerPropsAndStoreBasedStateMixin")(b("ReactComposerMediaUploadStore"))],propTypes:{uploadID:a.string.isRequired},statics:{calculateState:function(a,c){a=b("ReactComposerMediaUploadStore").getMediaUpload(a,c.uploadID);return{uploadProgress:a.progress,uploadState:a.state,useRealProgressPercentage:a.useRealProgressPercentage,useProgressLinearity:a.useProgressLinearity,useProgressTransformX:a.useProgressTransformX}}},render:function(){return b("React").createElement(b("ReactComposerVideoXUploadPlaceholder.react"),babelHelpers["extends"]({},this.props,this.state,{onRemoveButtonClicked:this._onRemoveButtonClicked}))},_onRemoveButtonClicked:function(){b("ReactComposerMediaUploadActions").removeMediaUpload(this.context.composerID,this.props.uploadID)}});e.exports=c}),null);
__d("ReactComposerDraggableMedia.react",["cx","fbt","Draggable","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerFailedPhotoUploadContainer.react","ReactComposerFailedVideoXUploadContainer.react","ReactComposerMediaUploadActions","ReactComposerMediaUploadType","ReactComposerPhotoActions","ReactComposerPhotoContainer.react","ReactComposerPhotoUploadPlaceholderContainer.react","ReactComposerPhotoUploadState","ReactComposerVideoXContainer.react","ReactComposerVideoXUploadPlaceholderContainer.react","ReactDOM","ReactLayeredComponentMixin_DEPRECATED","SimpleNUXMessage","SimpleNUXMessageTypes","Vector","XUIAmbientNUX.react","throttle"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;var i=200,j=5,k=b("ReactComposerPhotoUploadState").PHOTO_UPLOAD_DONE;c=b("React").createClass({displayName:"ReactComposerDraggableMedia",_draggable:undefined,_grabbed:undefined,_scrollParent:undefined,_timeoutID:undefined,contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin"),b("ReactLayeredComponentMixin_DEPRECATED")],propTypes:{enableFaceboxTagger:a.bool,productTaggerType:a.string,disablePhotoEditing:a.bool,mediaConfig:a.object.isRequired,upload:a.object.isRequired,nuxConfig:a.object.isRequired,showSphericalSingletonNux:a.bool,draggingPhotos:a.bool,enableMediaDragging:a.bool,disableRemovePhotos:a.bool,index:a.number,updateComponentPosition:a.func.isRequired,onGrab:a.func.isRequired,onDrag:a.func.isRequired,onDrop:a.func.isRequired},getInitialState:function(){return{dragging:!1,showSphericalSingletonNux:!1}},UNSAFE_componentWillReceiveProps:function(a){this.props.index!==a.index&&a.index!==undefined&&(this._timeoutID=setTimeout(this._updateComponentPosition,0)),!this.props.showSphericalSingletonNux&&a.showSphericalSingletonNux&&!b("SimpleNUXMessage").hasUserSeenMessage(b("SimpleNUXMessageTypes").SPHERICAL_SINGLETON_NUX)&&this.setState({showSphericalSingletonNux:!0})},componentDidUpdate:function(a){this.props.enableMediaDragging&&a.upload.state!==k&&this.props.upload.state===k&&!this.props.disableRemovePhotos?this._createDraggable():a.upload.state===k&&this.props.upload.state!==k&&(this._draggable&&this._draggable.destroy())},componentDidMount:function(){this._scrollParent=this._findScrollParent(),this.props.enableMediaDragging&&this.props.upload.state===k&&!this.props.disableRemovePhotos&&this._createDraggable(),this._timeoutID=setTimeout(this._updateComponentPosition,0)},componentWillUnmount:function(){this._draggable&&this._draggable.destroy(),clearTimeout(this._timeoutID)},render:function(){var a=(this.state.dragging?"_2pkn":"")+" _2pko",c=this.props.upload;c=!c.isSpherical&&c.photoID?c.photoID:c.id;return b("React").createElement("div",{className:a,key:c,onClick:this._onClick,ref:"draggable_media",role:"presentation"},this._getInnerMediaComponent())},renderLayers:function(){return{sphericalSingletonNux:this._sphericalSingletonNux()}},_sphericalSingletonNux:function(){return!this.props.showSphericalSingletonNux?null:b("React").createElement(b("XUIAmbientNUX.react"),{alignment:"left",contextRef:function(){return this.refs.draggable_media}.bind(this),shown:this.state.showSphericalSingletonNux,position:"below",onCloseButtonClick:this._onSphericalSingletonNuxClose,width:"auto"},h._("Post this photo individually to view in 360\u00b0"))},_onSphericalSingletonNuxClose:function(){this.setState({showSphericalSingletonNux:!1}),b("SimpleNUXMessage").markMessageSeenByUser(b("SimpleNUXMessageTypes").SPHERICAL_SINGLETON_NUX)},_getInnerMediaComponent:function(){return this.props.upload.mediaType==b("ReactComposerMediaUploadType").VIDEO?this._getInnerVideoComponent():this._getInnerPhotoComponent()},_getInnerVideoComponent:function(){var a=this.props.upload;if(a.state===k){var c=this._getDragHandler();return b("React").createElement("div",{"data-testid":"media-attachment-video"},b("React").createElement(b("ReactComposerVideoXContainer.react"),{isSpherical:a.isSphericalVideo,dragHandler:c,key:a.photoID,label:a.filename,photoID:a.photoID,uploadID:a.id,fileURL:a.fileURL,allowTextOnThumbnail:this.props.mediaConfig.allowTextOnVideoThumbnail,metadata:a.videoMetadata}))}return a.state===b("ReactComposerPhotoUploadState").PHOTO_UPLOAD_FAILED?b("React").createElement(b("ReactComposerFailedVideoXUploadContainer.react"),{key:a.id,error:a.error,filename:a.filename,uploadID:a.id}):b("React").createElement(b("ReactComposerVideoXUploadPlaceholderContainer.react"),{key:a.id,uploadID:a.id})},_getInnerPhotoComponent:function(){var a=this.props.upload;if(a.state===b("ReactComposerPhotoUploadState").PHOTO_UPLOAD_FAILED)return b("React").createElement(b("ReactComposerFailedPhotoUploadContainer.react"),{error:a.error,filename:a.filename,key:a.id,mediaConfig:this.props.mediaConfig,uploadID:a.id});if(a.state===k||a.isSpherical&&a.useLocalSphericalImage&&a.fileURL){var c=this._getDragHandler(),d=!a.isSpherical&&a.photoID?a.photoID:a.id;return b("React").createElement("div",{"data-testid":"media-attachment-photo"},b("React").createElement(b("ReactComposerPhotoContainer.react"),{canTagFromModal:this.props.mediaConfig.canTagFromModal,draggingPhotos:this.props.draggingPhotos,dragHandler:c,enableFaceboxTagger:this.props.enableFaceboxTagger,label:a.filename,productTaggerType:this.props.productTaggerType,disablePhotoEditing:this.props.disablePhotoEditing,disableRemovePhotos:this.props.disableRemovePhotos,key:d,nuxConfig:this.props.nuxConfig,originalID:a.originalPhotoID,photoID:a.photoID,showProductTaggerNux:this.props.nuxConfig.showProductPhotoTaggerNux&&this.props.index===0,index:this.props.index,sphericalPhotoID:a.sphericalPhotoID,uploadID:a.id,fileURL:a.fileURL,sphericalImage:a.sphericalImage,isSpherical:a.isSpherical,useLocalSphericalImage:a.useLocalSphericalImage}))}return b("React").createElement(b("ReactComposerPhotoUploadPlaceholderContainer.react"),{key:a.id,uploadID:a.id,fileURL:a.fileURL})},_getDragHandler:function(){var a=this;return{add:function(b){a._draggable&&a._draggable.addHandle(b)},remove:function(b){a._draggable&&a._draggable.removeHandle(b)}}},_createDraggable:function(){this._draggable=new(b("Draggable"))(b("ReactDOM").findDOMNode(this)).setNamespace("ReactComposer").setUseAbsolute(!0).setAvoidKillingEvents(!0).setGutter(j).setGrabHandler(this._onGrab).setDragHandler(b("throttle")(this._onDrag,i)).setDropHandler(this._onDrop),this._updateComponentPosition()},_updateComponentPosition:function(){var a=b("ReactDOM").findDOMNode(this),c=b("Vector").getElementPosition(a);c=this._compensateForScroll(a,c);this.props.updateComponentPosition(this.props.upload.id||this.props.upload.photoID,c,b("Vector").getElementDimensions(a))},_compensateForScroll:function(a,b){return this._scrollParent?b.add(this._scrollParent.scrollLeft,this._scrollParent.scrollTop):b},_findScrollParent:function(){__p&&__p();var a=b("ReactDOM").findDOMNode(this);if(a.closest)return a.closest(".fbScrollableAreaWrap");else{var c=document.querySelectorAll(".fbScrollableAreaWrap");while(a&&a.nodeType===1){var d=0;while(c[d]){if(c[d]===a)return a;d++}a=a.parentNode}return null}},_onGrab:function(){if(this.state.dragging)return;this._grabbed=!0;var a=b("ReactDOM").findDOMNode(this);this.props.onGrab(this.props.upload.id||this.props.upload.photoID,a)},_onDrag:function(a){if(!this._grabbed)return;this.setState({dragging:!0});var c=b("ReactDOM").findDOMNode(this);a=this._compensateForScroll(c,a);this.props.onDrag(a)},_onDrop:function(a){this._draggable&&this._draggable.resetPosition();this.setState({dragging:!1});this._grabbed=!1;var c=b("ReactComposerMediaUploadActions").mediaMoved,d=b("ReactDOM").findDOMNode(this);a=this._compensateForScroll(d,a);this.props.onDrop(a,c)},_onClick:function(){b("ReactComposerPhotoActions").setPhotoBeingTagged(this.context.composerID,this.props.upload.photoID)}});e.exports=c}),null);
__d("ReactComposerGenericPhotoUploadLink.react",["cx","Link.react","React","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){"use strict";var a=b("joinClasses")("__9u",this.props.className);return b("React").createElement(b("Link.react"),{className:a},this.props.children)};function a(){"use strict";h.apply(this,arguments)}a.propTypes={className:c.string};a.defaultProps={className:"__9t"};e.exports=a}),null);
__d("ReactComposerMediaUploadsGrid.react",["cx","fbt","FileInput.react","immutable","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerDraggableMedia.react","ReactComposerGenericPhotoUploadLink.react","ReactComposerLoggingActions","ReactComposerLoggingName","ReactComposerMediaScrollableArea.react","ReactComposerMediaUtils","ReactDOM","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;var i=112;c=b("React").createClass({displayName:"ReactComposerMediaUploadsGrid",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{enableFaceboxTagger:a.bool,productTaggerType:a.string,disablePhotoEditing:a.bool,disableRemovePhotos:a.bool,addMorePhotosConfig:a.shape({maxPhotos:a.number}).isRequired,mediaAcceptParam:a.string,mediaConfig:a.object.isRequired,nuxConfig:a.object.isRequired,onFilesSelected:a.func,canUploadMultiplePhotos:a.bool,uploads:a.instanceOf(b("immutable").List).isRequired,uploadCount:a.number,sphericalSingletonNuxUpload:a.object,onDrop:a.func,photoUploadLink:a.element,scrollableAreaHeight:a.number.isRequired,sourceIndex:a.number,targetIndex:a.number,updateComponentPosition:a.func.isRequired},getDefaultProps:function(){return{addMorePhotosConfig:{},canUploadMultiplePhotos:!1,photoUploadLink:b("React").createElement(b("ReactComposerGenericPhotoUploadLink.react"),null),scrollableAreaHeight:i,showSellUploadLink:!1}},render:function(){return b("React").createElement("div",{className:"_kkp"},b("React").createElement("div",{className:b("joinClasses")("_kkq",this.props.className)},b("React").createElement(b("ReactComposerMediaScrollableArea.react"),{fade:!0,getAddMoreDOM:this._getAddMoreDOM,height:this.props.scrollableAreaHeight,photosCount:this.props.uploads.size,scrollbar:"fade",verticalScroll:!0},this.props.children,this._getComponents(),this._getAddMorePhotosButton())))},_onAddMorePhotosClick:function(){b("ReactComposerLoggingActions").mediaUploadInputClicked(this.context.composerID,b("ReactComposerLoggingName").MEDIA_UPLOADS_PLUS_BUTTON)},_onFilesSelected:function(event){if(this.props.onFilesSelected){var a=this.props.onFilesSelected;a(event,this.refs.fileInput.getFileInput())}b("ReactComposerMediaUtils").clearInput(this.refs.fileInput.getFileInput(),!0)},_getAddMorePhotosButton:function(){if(!this.props.canUploadMultiplePhotos&&this.props.uploads.size>0)return null;return this.props.addMorePhotosConfig.maxPhotos&&this.props.uploads.size>=this.props.addMorePhotosConfig.maxPhotos?null:b("React").createElement("span",{ref:"addMore",className:"_kkr"},b("React").createElement(b("FileInput.react"),{accept:this.props.mediaAcceptParam,multiple:this.props.canUploadMultiplePhotos,name:"composer_photo",onChange:this._onFilesSelected,onClick:this._onAddMorePhotosClick,ref:"fileInput",title:h._("Choose a file to upload"),"data-testid":"add-more-photos"},this.props.photoUploadLink))},_getComponents:function(){var a=this.props.uploads.toSeq().filter(function(a,b){return b!==this.props.sourceIndex}.bind(this)).map(function(a,b){return this._getDraggablePhoto(a,b)}.bind(this));if(this.props.targetIndex!=null){var c=b("React").createElement("div",{key:"placeholder",className:"_kks"});a=a.splice(this.props.targetIndex,0,c)}this.props.sourceIndex!=null&&(a=a.splice(this.props.sourceIndex,0,this._getDraggablePhoto(this.props.uploads.get(this.props.sourceIndex))));return a.toArray()},_getDraggablePhoto:function(a,c){return b("React").createElement(b("ReactComposerDraggableMedia.react"),{enableFaceboxTagger:this.props.enableFaceboxTagger,productTaggerType:this.props.productTaggerType,disablePhotoEditing:this.props.disablePhotoEditing,disableRemovePhotos:this.props.disableRemovePhotos,key:a.id,upload:a,nuxConfig:this.props.nuxConfig,showSphericalSingletonNux:a===this.props.sphericalSingletonNuxUpload,draggingPhotos:this.props.sourceIndex!=null,enableMediaDragging:!0,index:c,mediaConfig:this.props.mediaConfig,updateComponentPosition:this.props.updateComponentPosition,onGrab:this.props.onGrab,onDrag:this.props.onDrag,onDrop:this.props.onDrop})},_getAddMoreDOM:function(){return b("ReactDOM").findDOMNode(this.refs.addMore)}});e.exports=c}),null);
__d("ReactComposerMediaUploadsGridContainer.react",["Locale","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerMediaUploadsGrid.react","ReactDOM","Rect","Vector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactComposerMediaUploadsGridContainer",_componentsPosition:{},contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{photoUploadLink:a.element,enableFaceboxTagger:a.bool,productTaggerType:a.string,disablePhotoEditing:a.bool,showSellUploadLink:a.bool,disableRemovePhotos:a.bool},getInitialState:function(){return{rtl:b("Locale").isRTL(),sourceIndex:null,targetIndex:null,uploads:this.props.uploads,sphericalSingletonNuxUpload:null}},UNSAFE_componentWillReceiveProps:function(a){if(this.state.uploads!==a.uploads){var b=a.uploads.toSeq().filter(function(a){return a.canShowSphericalSingletonNux}).first();this.setState({uploads:a.uploads,sphericalSingletonNuxUpload:b})}},render:function(){return b("React").createElement(b("ReactComposerMediaUploadsGrid.react"),babelHelpers["extends"]({},this.props,{onGrab:this._onGrab,onDrag:this._onDrag,onDrop:this._onDrop,sourceIndex:this.state.sourceIndex,targetIndex:this.state.targetIndex,updateComponentPosition:this._updateComponentPosition,uploads:this.state.uploads,sphericalSingletonNuxUpload:this.state.sphericalSingletonNuxUpload}))},_onGrab:function(a,b){b=this.state.uploads.findIndex(function(b){return b.id===a});this.setState({sourceIndex:b,targetIndex:b})},_onDrag:function(a){var c=b("Vector").getElementPosition(b("ReactDOM").findDOMNode(this));a=a.sub(c);this.setState({targetIndex:this._getTargetID(a)})},_onDrop:function(a,b){__p&&__p();this._onDrag(a);a=this.state.sourceIndex;var c=this.state.targetIndex;if(a==null||c==null)return;if(a!==c){var d=this.state.uploads;d=d.splice(a,1).splice(c,0,d.get(a));this.setState({uploads:d});b(this.context.composerID,a,c)}this._endDrag()},_endDrag:function(){this.setState({sourceIndex:null,targetIndex:null})},_getTargetID:function(a){__p&&__p();var b=this.state.uploads,c=this.state.rtl?function(b,a){return b.right>=a.x}:function(b,a){return b.left<=a.x};for(var d=b.size-1;d>=0;d--){var e=b.get(d);e=e.id;e=this._componentsPosition[e];if(c(e,a))return d}return 0},_updateComponentPosition:function(a,c,d){var e=new(b("Rect"))(b("ReactDOM").findDOMNode(this));this._componentsPosition[a]={left:c.x-e.l,right:c.x-e.l+d.x}}});e.exports=c}),null);
__d("ReactComposerVideoUploadPlaceholder.react",["cx","ix","Image.react","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerStore","XUICloseButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactComposerVideoUploadPlaceholder",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin"),b("ReactComposerPropsAndStoreBasedStateMixin")(b("ReactComposerStore"))],propTypes:{onRemoveClick:a.func},statics:{calculateState:function(a,c){return{posting:b("ReactComposerStore").isPosting(a)}}},render:function(){var a="_2oe _5ip5",c="_3ew _5iph",d=this.state.posting?null:b("React").createElement(b("XUICloseButton.react"),{className:"_5ipi",onClick:this.props.onRemoveClick,shade:"light",size:"medium"});return b("React").createElement("div",{className:a},d,b("React").createElement(b("Image.react"),{className:c,src:h("82359")}))}});e.exports=c}),null);
__d("ReactComposerVideoUploadPlaceholderContainer.react",["React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerVideoUploadActions","ReactComposerVideoUploadPlaceholder.react"],(function(a,b,c,d,e,f){a=b("React").createClass({displayName:"ReactComposerVideoUploadPlaceholderContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin")],render:function(){return b("React").createElement(b("ReactComposerVideoUploadPlaceholder.react"),{onRemoveClick:this._onRemoveClick})},_onRemoveClick:function(){b("ReactComposerVideoUploadActions").remove(this.context.composerID)}});e.exports=a}),null);
__d("ReactComposerVideoUploadProgressBar.react",["cx","DOMContainer.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:"_4340"},b("React").createElement(b("DOMContainer.react"),null,this.props.progressBar))};function a(){h.apply(this,arguments)}a.propTypes={progressBar:c.instanceOf(HTMLElement).isRequired};e.exports=a}),null);
__d("ReactComposerMediaAttachment.react",["cx","fbt","BootloadedComponent.react","BootloadOnRender.react","ComposerEntryPointRef","ReactComposerTaggerType","immutable","JSResource","LazyComponent.react","React","ReactComposerAttachmentType","ReactComposerAudienceSelectorContainer.react","ReactComposerSproutsDisplayState","ReactComposerCollageContainer.react","ReactComposerCollagePlusButton.react","ReactComposerContextTypes","ReactComposerCrossPostToInstagramRow.react","ReactComposerDragDropPromptContainer.react","ReactComposerFooterActions.react","ReactComposerFooterContainer.react","ReactComposerMediaAttachmentButtons.react","ReactComposerMediaUploadsGridContainer.react","ReactComposerPostButtonContainer.react","ReactComposerProfilePhotoBlock.react","ReactComposerStatusAttachmentMentionsInputWithTagExpansionContainer.react","ReactComposerStatusFooterContainer.react","ReactComposerStatusUtils","ComposerTargetData","ReactComposerTaggerSummaryContainer.react","ReactComposerTimelineAudienceSelectorNextButtonContainerGatedModule","ReactComposerVideoUploadPlaceholderContainer.react","ReactComposerVideoUploadProgressBar.react","ReactComposerFundraiserAttachmentContainerGated","ReactDOM"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("ReactComposerTimelineAudienceSelectorNextButtonContainerGatedModule").module,k=b("ReactComposerFundraiserAttachmentContainerGated").module;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.$1=0,b}a.prototype.render=function(){var a=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA];a=this.props.uploads.size>0&&!this.props.slideshowDialogOpen||!!this.props.video||a.canUploadPhoto&&!this.props.createAlbumLink||this.props.shouldShowCanvasSelector||this.props.shouldShowCarouselURLInputArea||this.props.shouldShowPreview||this.props.isCollectionSelected||this.props.isSlideshowSelected;return a?this.$2():this.$3()};a.prototype.componentDidMount=function(){var a=b("ReactDOM").findDOMNode(this);this.$1=a?a.clientWidth:0;a=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").STATUS];a&&b("ReactComposerStatusUtils").handleMarkdownPreview(this.context.composerID,this.context.targetID,a.markdownPreviewAttachment)};a.prototype.$4=function(){return j&&this.context.composerType===b("ComposerEntryPointRef").TIMELINE&&this.props.config.targetData.viewerIsTarget?j:this.props.postButtonModule};a.prototype.$3=function(){var a=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA],c=null;if(a.PageComposerMediaAttachmentButtons){var d=a.PageComposerMediaAttachmentButtons;c=b("React").createElement(d,{canUploadPhotos:a.canUploadPhoto,canvasConfig:a.canvasConfig,carouselConfig:a.carouselConfig,collectionConfig:a.collectionConfig,createAlbumLink:this.props.createAlbumLink,mediaAcceptParam:this.props.config.mediaAcceptParam,onFilesSelected:this.props.onFilesSelected,showCanvasEntryPoint:a.showCanvasEntryPoint,showCollectionEntryPoint:a.showCollectionEntryPoint,showCarouselEntryPoint:a.showCarouselEntryPoint,showPhotoAlbumEntryPoint:a.showPhotoAlbumEntryPoint,showSlideshowEntryPoint:a.showSlideshowEntryPoint,showUploadPhotosButton:a.showUploadPhotosButton,slideshowConfig:a.slideshowConfig,targetData:this.props.config.targetData})}else c=b("React").createElement(b("ReactComposerMediaAttachmentButtons.react"),{canUploadPhotos:a.canUploadPhoto,createAlbumLink:this.props.createAlbumLink,mediaAcceptParam:this.props.config.mediaAcceptParam,onFilesSelected:this.props.onFilesSelected,targetData:this.props.config.targetData});d=this.context.gks&&this.context.gks.isSproutsComposer;a=d?b("React").createElement(b("ReactComposerStatusFooterContainer.react"),{background:"white",isCameraIconEnabled:!1,attachmentsConfig:this.props.config.attachmentsConfig,audienceXHP:this.props.config.audienceXHP,config:this.props.config,mediaAcceptParam:this.props.config.mediaAcceptParam,postButtonModule:this.props.postButtonModule,targetData:this.props.config.targetData,additionalFooterActions:this.props.additionalFooterActions}):null;return b("React").createElement("div",null,b("React").createElement(b("ReactComposerDragDropPromptContainer.react"),{root:this,config:this.props.config}),c,a)};a.prototype.$2=function(){__p&&__p();var a=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA],c=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").STATUS],d=this.context.gks&&this.context.gks.isSproutsComposer,e=void 0;if(this.props.shouldShowPreview){var f=a.ComposerAttachmentPreviewContainer;f=b("React").createElement(f,null);if(this.props.shouldShowCanvasSelector){var g=a.canvasConfig.TypeaheadContainer;e=b("React").createElement("div",null,f,b("React").createElement(g,{config:a.canvasConfig}))}else e=f}else if(this.props.shouldShowCarouselURLInputArea){g=a.carouselConfig.PhotoCarouselUtils;e=g.getPhotoCarouselMediaContent(a.carouselConfig,this.props.config.nuxConfig)}else if(this.props.shouldShowCanvasSelector){f=a.canvasConfig;g=f.TypeaheadContainer;e=b("React").createElement(g,{config:f})}else if(this.props.isSlideshowSelected){g=a.slideshowConfig.thumbnailViewContainer;e=b("React").createElement(g,{maxSelectedImages:a.slideshowConfig.maxPhotoNum,mediaAcceptParam:this.props.config.mediaAcceptParam&&this.props.config.mediaAcceptParam.photos,pageID:a.slideshowConfig.pageID,onFilesSelected:this.props.onFilesSelected})}else if(this.props.isCollectionSelected){f=a.collectionConfig.previewContainer;e=b("React").createElement(f,{config:a.collectionConfig})}else this.props.video?e=b("React").createElement("div",null,b("React").createElement(b("ReactComposerVideoUploadPlaceholderContainer.react"),null),b("React").createElement(b("ReactComposerVideoUploadProgressBar.react"),{progressBar:this.props.videoProgressBar})):this.props.customizedPreviewMediaContent?e=this.props.customizedPreviewMediaContent:e=b("React").createElement(b("ReactComposerMediaUploadsGridContainer.react"),{enableFaceboxTagger:!a.disableFaceboxTagger,productTaggerType:a.productTaggerType,disablePhotoEditing:a.disablePhotoEditing,disableRemovePhotos:this.props.prefillConfig?this.props.prefillConfig.disableRemovePhotos:!1,mediaConfig:a,mediaAcceptParam:this.props.config.mediaAcceptParam&&this.props.config.mediaAcceptParam.both,nuxConfig:this.props.config.nuxConfig,onFilesSelected:this.props.onFilesSelected,canUploadMultiplePhotos:this.props.config.targetData.targetSupportsMultiplePhotos,uploads:this.props.uploads});g=this.props.sproutsDisplayState===b("ReactComposerSproutsDisplayState").INLINE;f=this.context.gks&&this.context.gks.lazySproutsExpand?this.props.isComposerFocused:!g;g=null;var h=this.props.shouldShowCollageUploadLayout&&f&&this.props.uploads.size<=5&&this.props.uploads.size>0?b("React").createElement(b("ReactComposerCollageContainer.react"),{containerWidth:this.$1,scaleFactor:this.props.collageScaleFactor,mediaUploads:this.props.uploads,enableFaceboxTagger:!a.disableFaceboxTagger,enablePhotoEditing:!a.disablePhotoEditing,productTaggerType:a.productTaggerType}):null;h&&(g=b("React").createElement(b("ReactComposerCollagePlusButton.react"),{enableFaceboxTagger:this.props.enableFaceboxTagger,composerConfig:this.props.config}));(h||!f)&&(e=null);f=null;this.props.shouldShowConditionalPhotoChooser&&this.props.uploads.size>1&&(f=b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("ReactComposerConditionalPhotoChooserContainer.react").__setRef("ReactComposerMediaAttachment.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{numberOfUploads:this.props.uploads.size,slideshowConfig:a.slideshowConfig,mediaAcceptParam:this.props.config.mediaAcceptParam,onFilesSelected:this.props.onFilesSelected})}));var i=a.hideMentionsInput?b("React").createElement("div",{className:"_3-8y"}):b("React").createElement(b("ReactComposerStatusAttachmentMentionsInputWithTagExpansionContainer.react"),{config:this.props.config,handlePastedText:this.props.handlePastedText,onFocus:this.props.onMentionsInputFocus,onChange:this.props.onMentionsInputChange,onPasteFiles:a.disableUploadOnDragDropAndPaste?null:this.props.onPasteFiles,placeholder:this.$5(),className:h?"_5b2v":""}),j=c.multilingualStatus?b("React").createElement(c.multilingualStatus,null):null;i=b("React").createElement("div",null,i,j);c.showProfilePic&&(i=b("React").createElement(b("ReactComposerProfilePhotoBlock.react"),{profilePicSrc:c.profilePicSrc,profileURI:c.profileURI},i));j=c?c.markdownPreviewAttachment:null;var l=null;if(j){var m=j.container;l=b("React").createElement(m,{prettify:j.prettify,isMarkdownForInternalEmployee:j.isMarkdownForInternalEmployee,isMarkdownWideAllowed:j.isMarkdownWideAllowed,isMarkdownWideDefault:j.isMarkdownWideDefault})}m=c.donateButtonConfig;j=null;if(m){var n=m.donateButtonContainer;j=b("React").createElement(n,{charityName:m.charityName,fundraiserCampaignId:m.fundraiserCampaignId})}n=null;if(c.topicFeedsTagger){m=c.topicFeedsTagger;var o=m.container;n=b("React").createElement(o,{composerFeedID:m.composerFeedID,photoAutoTaggingDelay:m.photoAutoTaggingDelay,photoPollingDuration:m.photoPollingDuration,photoPollingInterval:m.photoPollingInterval,showNux:m.showNux,textAutoTaggingDelay:m.textAutoTaggingDelay,darkLaunch:m.darkLaunch})}o=null;if(c.groupPostTagsTagger){m=c.groupPostTagsTagger;var p=m.container;o=b("React").createElement(p,{tagsLimit:m.tagsLimit,groupID:m.groupID})}p=!this.props.shouldShowCarouselURLInputArea&&!this.props.isSlideshowSelected;m=null;var q=c.aymtTipConfig;q&&q.isEligible&&(m=b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("ReactComposerAYMTTip.react").__setRef("ReactComposerMediaAttachment.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{pageID:q.pageID,minLength:q.minContentLength})}));q=null;this.props.config.instagramCrossPostingEnabled&&this.props.uploads.size==1&&!this.props.videoUploadsCount&&(q=b("React").createElement(b("ReactComposerCrossPostToInstagramRow.react"),{composerID:this.context.composerID}));var r=null;k&&(r=b("React").createElement(k,null));var s=null;if(this.props.isOfferLikePost&&c&&c.offerLikePostUpsellInlineBanner){var t=[];for(var u=0;u<this.props.uploads.size;u++){var v=this.props.uploads.get(u).photoID;v&&t.push(v)}v=c.offerLikePostUpsellInlineBanner;s=b("React").createElement(v,{actorID:this.context.actorID,composerID:this.context.composerID,pageID:c.pageID,photoIDs:t,text:this.props.offerLikePostText||""})}u=a.disableUploadOnDragDropAndPaste?null:b("React").createElement(b("ReactComposerDragDropPromptContainer.react"),{root:this,config:this.props.config});v=this.props.taggersConfig?this.props.taggersConfig:this.props.config.taggersConfig;c=v&&v[b("ReactComposerTaggerType").TAG_EVENT_TICKET]&&v[b("ReactComposerTaggerType").TAG_EVENT_TICKET].enabled?b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ReactComposerTagEventTicketMicroAttachmentContainer.react").__setRef("ReactComposerMediaAttachment.react"),bootloadPlaceholder:b("React").createElement("div",null),composerID:this.context.composerID}):null;return b("React").createElement("div",{className:"_2_lq","data-testid":"media-attachment"},u,this.$6(),b("React").createElement("div",{className:"_4wbt"},b("React").createElement("div",{className:(this.props.shouldScrollComposerContent&&d?"_1w_g":"")+(h?" _3zko":"")},i,this.props.children,l,j,r,c,b("React").createElement(b("ReactComposerTaggerSummaryContainer.react"),null),e,f,h),g),n,o,m,q,s,b("React").createElement(b("ReactComposerStatusFooterContainer.react"),{additionalTaggers:this.props.additionalTaggers,additionalFooterActions:this.props.additionalFooterActions,attachmentsConfig:this.props.config.attachmentsConfig,audienceXHP:this.props.config.audienceXHP,config:this.props.config,isCameraIconEnabled:p,locationTaggerPlaceholder:this.$7(),mediaAcceptParam:this.props.config.mediaAcceptParam,peopleTaggerPlaceholder:this.$8(),postButtonLabel:this.props.postButtonLabel?this.props.postButtonLabel:undefined,postButtonModule:this.$4(),taggersConfig:v,targetData:this.props.targetData||this.props.config.targetData}))};a.prototype.$7=function(){if(this.props.video)return h._("Where was this taken?");if(this.props.uploads.size>1)return h._("Where were these photos taken?");return this.props.uploads.size===1?h._("Where was this photo taken?"):null};a.prototype.$8=function(){return!!this.props.video||this.props.uploads.size>0?h._("Who were you with?"):null};a.prototype.$5=function(){__p&&__p();if(this.props.placeholder)return this.props.placeholder;var a=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA];if(this.props.video||this.props.uploads.size===1&&this.props.videoUploadsCount===1)return h._("Say something about this video...");else if(this.props.isSlideshowSelected)return h._("Say something about this slideshow...");else if(this.props.uploads.size>1)if(this.props.photoUploadsCount===0)return h._("Say something about these videos...");else if(this.props.videoUploadsCount===0)if(this.props.sphericalPhotoUploadsCount===this.props.photoUploadsCount)return h._("Say something about these 360 photos...");else return h._("Say something about these photos...");else return h._("Say something about these media...");else if(this.props.shouldShowCarouselURLInputArea||this.props.shouldShowPreview){var c=a.carouselConfig.PhotoCarouselUtils;return c.getInputPlaceHolder(a.carouselConfig,this.props.shouldShowPreview)}else if(this.props.sphericalPhotoUploadsCount)return h._("Say something about this 360 photo...");else return h._("Say something about this photo...")};a.prototype.$6=function(){var a=this.context.gks&&this.context.gks.topPostButton,c=this.context.gks&&this.context.gks.isSproutsComposer;return!(a&&c)?null:b("React").createElement("div",{className:"_4y7p"},this.$9())};a.prototype.$9=function(){var a=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA];a=a.footerBackground?a.footerBackground:this.props.config.showExpandedComposer?"white":"light-wash";a=b("React").createElement(b("ReactComposerFooterContainer.react"),{background:a,config:this.props.config},b("React").createElement("div",{className:"clearfix"},b("React").createElement("div",{className:"rfloat"},this.$10())));return a};a.prototype.$10=function(){var a=this.props.config.audienceXHP?b("React").createElement(b("ReactComposerAudienceSelectorContainer.react"),{audienceXHP:this.props.config.audienceXHP,viewerIsTarget:this.props.config.targetData.viewerIsTarget}):null,c=this.props.postButtonModule||b("ReactComposerPostButtonContainer.react");c=b("React").createElement(c,{config:this.props.config});return b("React").createElement(b("ReactComposerFooterActions.react"),null,this.props.additionalFooterActions,a,c)};a.defaultProps={collageScaleFactor:1};a.contextTypes=b("ReactComposerContextTypes");e.exports=a}),null);
__d("ReactComposerMediaAttachmentActions",["ReactComposerDispatcher","ReactComposerMediaAttachmentActionType","ReactComposerMediaAttachmentStore"],(function(a,b,c,d,e,f){__p&&__p();b("ReactComposerMediaAttachmentStore");a.prototype.setConfig=function(a,c){"use strict";a={composerID:a,type:b("ReactComposerMediaAttachmentActionType").SET_MEDIA_CONFIG,config:c};b("ReactComposerDispatcher").dispatch(a)};a.prototype.createAlbumSelectorClicked=function(a){"use strict";b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerMediaAttachmentActionType").CREATE_ALBUM_SELECTOR_CLICKED})};function a(){"use strict"}e.exports=new a()}),null);
__d("ReactComposerCanvasStore",["ReactComposerCanvasActionType","ReactComposerStoreBase"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("ReactComposerStoreBase"));g=c&&c.prototype;function a(){"use strict";__p&&__p();var a=void 0;g.constructor.call(this,function(){return{shouldShowCanvasSelector:!1,isCanvasSelected:!1}},function(c){switch(c.type){case b("ReactComposerCanvasActionType").SHOW_CANVAS_SELECTOR:a&&a.$ReactComposerCanvasStore1(c);break;case b("ReactComposerCanvasActionType").HIDE_CANVAS_SELECTOR:a&&a.$ReactComposerCanvasStore2(c);break;default:break}});a=this}a.prototype.$ReactComposerCanvasStore1=function(a){"use strict";a=a.composerID;var b=this.getComposerData(a);b.shouldShowCanvasSelector=!0;b.isCanvasSelected=!0;this.emitChange(a)};a.prototype.$ReactComposerCanvasStore2=function(a){"use strict";a=a.composerID;var b=this.getComposerData(a);b.shouldShowCanvasSelector=!1;b.isCanvasSelected=!1;this.emitChange(a)};a.prototype.shouldShowCanvasSelector=function(a){"use strict";return this.getComposerData(a).shouldShowCanvasSelector};a.prototype.isCanvasSelected=function(a){"use strict";return this.getComposerData(a).isCanvasSelected};e.exports=new a()}),null);
__d("ReactComposerVideoUploader",["invariant","Arbiter","ComposerEntryPointRef","DOM","DOMClone","ErrorDialog","QE","React","ReactComposerActions","ReactComposerPostUtilsCore","ReactComposerVideoUploadActions","ReactComposerVideoUploadStore","ReactDOM","Run","SubscriptionsHandler","UserAgent","VideoUploadFile","VideoUploadProcessingDialog.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=a.URL||a.webkitURL||{};function c(a){this.$3=a,this.$2=new(b("SubscriptionsHandler"))(),this.$3.composerID||g(0),this.$3.container||g(0),this.$3.progressBarInstance||g(0),this.$3.uploader||g(0),this.$5=a.uploader,this.$1=a.composerID,this.$2.addSubscriptions(this.$5.subscribe("post-failed",this.$6.bind(this)),this.$5.subscribe("post-finished",this.$7.bind(this)),this.$5.subscribe("upload-failed",this.$8.bind(this)),this.$5.subscribe("upload-finished",this.$9.bind(this))),b("Run").onLeave(function(){return this.$5.abandon()}.bind(this)),b("Run").onUnload(function(){return this.$5.abandon()}.bind(this))}c.prototype.upload=function(a,c){this.$4=c;c=b("VideoUploadFile").fromFileInput(a);this.$5.upload(c)};c.prototype.uploadFromFile=function(a,b){var c=a.getFile();c&&h.createObjectURL&&(b.fileURL=h.createObjectURL(c));this.$4=b;this.$5.upload(a)};c.prototype.destroy=function(){this.$2.release()};c.prototype.isUploading=function(){return this.$5.isSessionInProgress()};c.prototype.$10=function(a){a&&b("ErrorDialog").show(a.error_summary,a.error_description),this.$3.progressBarInstance.reset(),this.$5.abandon(),b("ReactComposerActions").postError(this.$1,null)};c.prototype.$6=function(a,b){this.$10(b)};c.prototype.$7=function(a,c){b("ReactComposerPostUtilsCore").handlePostSucceeded(this.$1),this.$3.composerEntryPointRef===b("ComposerEntryPointRef").TIMELINE&&b("QE").logExposure("www_optimistic_video_post"),this.$3.shouldShowOptimisticVideoPost&&this.$3.composerEntryPointRef===b("ComposerEntryPointRef").TIMELINE?b("Arbiter").inform("videoUpload/complete",{videoID:c.video_id,isToUserProfile:!0,videoFileURL:c.fileURL}):b("ReactDOM").render(b("React").createElement(b("VideoUploadProcessingDialog.react"),{videoID:c.video_id,show:!0}),this.$3.container),this.$3.onPostSuccess&&this.$3.onPostSuccess()};c.prototype.$8=function(a,c){this.$10(c);a=b("ReactComposerVideoUploadStore").getVideo(this.$1);if(b("UserAgent").isBrowser("IE")){c=b("DOMClone").deepClone(a.input);b("DOM").replace(a.input,c)}else a.input.value="";b("ReactComposerVideoUploadActions").remove(this.$1)};c.prototype.$9=function(){this.$5.post(this.$4),this.$3.onUploadSuccess&&this.$3.onUploadSuccess()};e.exports=c}),null);
__d("ReactComposerMediaAttachmentContainer.react",["invariant","PUWMethods","React","Bootloader","ReactComposerAttachmentActions","ReactComposerAttachmentType","ReactComposerCanvasStore","ReactComposerCollectionStore","ComposerEntryPointRef","ReactComposerLoggingName","ReactComposerMediaAttachment.react","ReactComposerMediaAttachmentStore","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerMediaUploadType","ReactComposerMediaUtils","ReactComposerPhotoCarouselStore","ReactComposerPhotoUploader","ReactComposerScrapedAttachmentStore","ReactComposerSlideshowActions","ReactComposerSlideshowStore","ReactComposerStatusStore","ReactComposerStatusUtils","ReactComposerStore","ReactComposerTaggerActions","ReactComposerTaggerStore","ReactComposerTaggerType","ReactComposerVideoUploadActions","ReactComposerVideoUploader","ReactComposerVideoUploadStore","FluxContainer","QE2Logger","ReactDOM","SubscriptionsHandler","URLScraper","getByPath","ifRequired","ReactComposerContextTypes"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){__p&&__p();var a;(a=h.constructor).call.apply(a,[this].concat(Array.prototype.slice.call(arguments)));this.$1=function(event,a){var c=b("ReactComposerMediaUtils").handleSpecialMediaUpload(event,a,this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA],this.context);if(c)return;c=event.target?event.target:a.getInput();this.$2||g(0);b("ReactComposerMediaUtils").uploadPhotosOrVideoFromTarget(this.context.composerID,c,this.$2,this.props.config.targetData.targetSupportsMultiplePhotos,this.props.config.targetData.targetSupportsMultiMedia)}.bind(this);this.$8=function(){this.state.selectedTagger!==null&&this.state.selectedTagger!==b("ReactComposerTaggerType").PEOPLE&&b("ReactComposerTaggerActions").selectTaggerWithoutAutofocus(this.context.composerID,b("ReactComposerLoggingName").MENTIONS_INPUT_FOCUS,b("ReactComposerTaggerType").PEOPLE)}.bind(this);this.$9=function(a){b("ReactComposerStatusUtils").uploadPastedFile(this.context.composerID,a[0],this.$2),b("ReactComposerMediaUploadActions").photosSelect(this.context.composerID,1,b("PUWMethods").COPYPASTE)}.bind(this);this.$10=function(a,c,d){c=this.context.composerID;var e=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA],f=b("ReactComposerPhotoCarouselStore").shouldShowURLEditArea(c);e.carouselConfig&&f&&e.carouselConfig.ComposerPhotoCarouselPlaceHolder&&b("ReactComposerStatusUtils").scrapeLink(c,this.context.targetID,a,this.context.composerType,this.context.actorID,b("ReactComposerLoggingName").LINK_PASTED);if(this.props.hasMessagingLink){f=d?d.getCurrentContent().getPlainText():"";e=b("URLScraper").match(a)||f.concat(a);this.$11(c,e)}return!1}.bind(this);this.$7=function(a){__p&&__p();var c=this.context.composerID;a=a.getCurrentContent().getPlainText();this.$5(a);if(!b("URLScraper").trigger(a)){this.props.hasMessagingLink&&this.$11(c,a);var d=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA],e=b("ReactComposerPhotoCarouselStore").shouldShowURLEditArea(c);if(!d.carouselConfig||!e)return;d.carouselConfig.ComposerPhotoCarouselPlaceHolder&&b("ReactComposerStatusUtils").scrapeLink(c,this.context.targetID,a,this.context.composerType,this.context.actorID,b("ReactComposerLoggingName").INLINE_COMPOSER)}}.bind(this);this.$1=this.$1.bind(this)}a.getStores=function(){"use strict";var a=[b("ReactComposerCanvasStore"),b("ReactComposerCollectionStore"),b("ReactComposerMediaAttachmentStore"),b("ReactComposerPhotoCarouselStore"),b("ReactComposerMediaUploadStore"),b("ReactComposerScrapedAttachmentStore"),b("ReactComposerSlideshowStore"),b("ReactComposerTaggerStore"),b("ReactComposerVideoUploadStore"),b("ReactComposerStore")];b("ifRequired")("ReactComposerFocusStore",function(b){a.push(b)});return a};a.calculateState=function(a,c,d){"use strict";__p&&__p();var e=d.composerID;d=b("ReactComposerMediaUploadStore").getUploadsOfType(e,b("ReactComposerMediaUploadType").PHOTO);var f=b("ReactComposerMediaUploadStore").getUploadsOfType(e,b("ReactComposerMediaUploadType").VIDEO),g=b("ReactComposerMediaUploadStore").getUploads(e);c=c.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA];var h=d.filter(function(a){return a.isSpherical===!0}).size;return{createAlbumLink:b("ReactComposerMediaAttachmentStore").getCreateAlbumLink(e),shouldShowCanvasSelector:b("ReactComposerCanvasStore").shouldShowCanvasSelector(e),shouldShowCarouselURLInputArea:b("ReactComposerPhotoCarouselStore").shouldShowURLEditArea(e),shouldShowPreview:b("ReactComposerScrapedAttachmentStore").getMarkup(e)!==null,shouldShowCollageUploadLayout:c.shouldShowCollageUploadLayout,shouldShowConditionalPhotoChooser:c.shouldShowConditionalPhotoChooser,shouldShowMessagingCTA:c.shouldShowMessagingCTA,shouldScrollComposerContent:c.shouldScrollComposerContent,collageScaleFactor:c.collageScaleFactor,slideshowDialogOpen:b("ReactComposerSlideshowStore").shouldShowSlideshowDialog(e),isCanvasSelected:b("ReactComposerCanvasStore").isCanvasSelected(e),isCollectionSelected:b("ReactComposerCollectionStore").isCollectionSelected(e),isPhotoCarouselSelected:b("ReactComposerPhotoCarouselStore").isPhotoCarouselSelected(e),isSlideshowSelected:b("ReactComposerSlideshowStore").isSlideshowSelected(e),selectedTagger:b("ReactComposerTaggerStore").getSelectedTagger(e),uploads:g,isOfferLikePost:a?a.isOfferLikePost:!1,offerLikePostText:a?a.offerLikePostText:null,photoUploadsCount:d.size,sphericalPhotoUploadsCount:h,videoUploadsCount:f.size,video:b("ReactComposerVideoUploadStore").getVideo(e),videoProgressBar:b("ReactComposerMediaAttachmentStore").getVideoProgressBar(e),videoProgressBarInstance:b("ReactComposerMediaAttachmentStore").getVideoProgressBarInstance(e),videoUploader:b("ReactComposerMediaAttachmentStore").getVideoUploader(e),sproutsDisplayState:b("ReactComposerStore").getSproutsDisplayState(e),isComposerFocused:b("ifRequired")("ReactComposerFocusStore",function(a){return a.isComposerFocused(e)},function(){return!1})}};a.prototype.UNSAFE_componentWillMount=function(){"use strict";this.$4=new(b("SubscriptionsHandler"))();var a=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA],c=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").STATUS];c&&c.defaultMarkdownOn&&b("ReactComposerTaggerStore").getTaggerData(this.context.composerID,b("ReactComposerTaggerType").MARKDOWN).isMarkdown===undefined&&b("ReactComposerTaggerActions").setTaggerDataWithoutLogging(this.context.composerID,b("ReactComposerTaggerType").MARKDOWN,{isMarkdown:!0});this.$2=new(b("ReactComposerPhotoUploader"))(this.context,a.photoLimit,{disableFaceRecognition:a.disableFaceboxTagger});c=b("ReactComposerMediaUtils").subscribeToImageEdit(this.context.composerID,this.$2);this.$4.addSubscriptions(c)};a.prototype.componentDidMount=function(){"use strict";var a=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA];this.$3=new(b("ReactComposerVideoUploader"))({composerID:this.context.composerID,container:b("ReactDOM").findDOMNode(this.refs.videoContainer),progressBarInstance:this.state.videoProgressBarInstance,uploader:this.state.videoUploader,shouldShowOptimisticVideoPost:a.shouldShowOptimisticVideoPost,composerEntryPointRef:this.context.composerType});b("ReactComposerVideoUploadActions").setUploader(this.context.composerID,this.$3);a=b("ReactComposerStatusStore").getMessageText(this.context.composerID);this.$5(a)};a.prototype.componentWillUnmount=function(){"use strict";this.$3&&this.$3.destroy(),this.$4&&this.$4.release()};a.prototype.UNSAFE_componentWillUpdate=function(a,c){"use strict";c=c||{};a=this.state.uploads.size>0||!!this.state.video;c=c.uploads.size>0||!!c.video;var d=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA];d.returnToStatusIfNoUploads&&a&&!c&&!this.state.slideshowDialogOpen&&(b("ReactComposerAttachmentActions").selectAttachment(this.context.composerID,b("ReactComposerAttachmentType").STATUS,!0),b("ReactComposerSlideshowStore").isSlideshowSelected(this.context.composerID)&&b("ReactComposerSlideshowActions").hideSlideshowEditField(this.context.composerID))};a.prototype.render=function(){"use strict";return b("React").createElement("div",null,b("React").createElement(b("ReactComposerMediaAttachment.react"),babelHelpers["extends"]({},this.props,{createAlbumLink:this.state.createAlbumLink,isCanvasSelected:this.$6()?!0:this.state.isCanvasSelected,isCollectionSelected:this.state.isCollectionSelected,isComposerFocused:this.state.isComposerFocused,isPhotoCarouselSelected:this.state.isPhotoCarouselSelected,isSlideshowSelected:this.state.isSlideshowSelected,shouldShowCanvasSelector:this.$6()?!0:this.state.shouldShowCanvasSelector,shouldShowCarouselURLInputArea:this.state.shouldShowCarouselURLInputArea,shouldShowCollageUploadLayout:this.state.shouldShowCollageUploadLayout,shouldShowConditionalPhotoChooser:this.state.shouldShowConditionalPhotoChooser,sproutsDisplayState:this.state.sproutsDisplayState,shouldScrollComposerContent:this.state.shouldScrollComposerContent,collageScaleFactor:this.state.collageScaleFactor,shouldShowPreview:this.state.shouldShowPreview,slideshowDialogOpen:this.state.slideshowDialogOpen,shouldShowMessagingCTA:this.state.shouldShowMessagingCTA,isOfferLikePost:this.state.isOfferLikePost,offerLikePostText:this.state.offerLikePostText,onFilesSelected:this.$1,onMentionsInputChange:this.$7,onMentionsInputFocus:this.$8,onPasteFiles:this.$9,handlePastedText:this.$10,postButtonModule:this.props.postButtonModule,uploads:this.state.uploads,videoUploadsCount:this.state.videoUploadsCount,photoUploadsCount:this.state.photoUploadsCount,sphericalPhotoUploadsCount:this.state.sphericalPhotoUploadsCount,video:this.state.video,videoProgressBar:this.state.videoProgressBar})),b("React").createElement("div",{ref:"videoContainer"}))};a.prototype.$6=function(){"use strict";var a=!1;b("ifRequired")("ReactObjectiveFirstPagesComposerViewMode",function(b){a=this.props.viewMode===b.CREATE_CANVAS_VIEW}.bind(this));return a};a.prototype.$11=function(a,c){"use strict";var d=this.props.config.taggersConfig;d=b("getByPath")(d,[b("ReactComposerTaggerType").MESSAGING,"canDefaultCTAMessagingLink"]);this.props.hasMessagingLink&&this.props.hasMessagingLink(c)&&!b("ReactComposerTaggerStore").hasMessagingCTA(a)&&(b("QE2Logger").logExposureForUser("composer_default_cta_messaging_link_in_text_universe"),d&&b("ReactComposerTaggerActions").selectTaggerWithoutLogging(a,b("ReactComposerTaggerType").MESSAGING))};a.prototype.$5=function(a){"use strict";__p&&__p();var c=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").STATUS];this.context.composerType===b("ComposerEntryPointRef").PAGES_FEED&&b("Bootloader").loadModules(["SalesPromoUtils.react"],function(d){if(d.checkIsOLP(a)){d=c.offerLikePostUpsell||"";var e=d.indexOf("inline")!==-1;e&&this.setState({isOfferLikePost:!0,offerLikePostText:a});(d==="none"||e)&&(c.pageID&&b("QE2Logger").logExposureForPage("orgoff_offer_creation",c.pageID))}else this.setState({offerLikePostText:a})}.bind(this),"ReactComposerMediaAttachmentContainer.react")};a.contextTypes=b("ReactComposerContextTypes");e.exports=b("FluxContainer").create(a,{withContext:!0,withProps:!0})}),null);
__d("ReactComposerMediaAttachmentPostButton.react",["fbt","React","ReactComposerConfig","ReactComposerPostButtonContainer.react","ReactComposerVideoCopyrightDialog.react","ReactFragment","XUIContextualDialog.react","XUIContextualDialogBody.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);h=d&&d.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={copyrightDialogShown:!1},this.$3=function(){if(this.props.showCopyrightDialogOnPost){this.setState({copyrightDialogShown:!0});return!1}if(this.props.onClick){this.props.onClick();return!1}return!0}.bind(this),this.$1=function(){this.setState({copyrightDialogShown:!1})}.bind(this),this.$2=function(){this.setState({copyrightDialogShown:!1}),this.props.onClick&&this.props.onClick()}.bind(this),b}a.prototype.renderLayers=function(){return b("ReactFragment").create({limitDialog:b("React").createElement(b("XUIContextualDialog.react"),{alignment:"right",contextRef:function(){return this.refs.post}.bind(this),position:"below",shown:this.props.limitExceeded,width:this.props.contextualDialogWidth},b("React").createElement(b("XUIContextualDialogBody.react"),null,g._("You can only add {number} photos at a time",[g._param("number",this.props.photoLimit)]))),copyrightDialog:b("React").createElement(b("ReactComposerVideoCopyrightDialog.react"),{shown:this.state.copyrightDialogShown,onCancel:this.$1,onConfirm:this.$2})})};a.prototype.render=function(){return b("React").createElement("span",null,b("React").createElement(b("ReactComposerPostButtonContainer.react"),{className:this.props.className,config:this.props.config,forceDisabled:this.props.disabled,onClickPreprocess:this.$3,label:this.props.label,ref:"post",useDefaultScheduleComponent:this.props.useDefaultScheduleComponent}),this.renderLayers())};a.propTypes={config:b("ReactComposerConfig").isRequired,disabled:c.bool,limitExceeded:c.bool,onClick:c.func,photoLimit:c.number.isRequired,showCopyrightDialogOnPost:c.bool,label:c.string,contextualDialogWidth:c.number,useDefaultScheduleComponent:c.bool};a.defaultProps={disabled:!1,limitExceeded:!1,showCopyrightDialogOnPost:!1,contextualDialogWidth:300};e.exports=a}),null);
__d("ReactComposerMediaEagerAttachment.react",["React","ReactComposerAttachmentActions","ReactComposerAttachmentBodyMixin","ReactComposerAttachmentType","ReactComposerConfig","ReactComposerMediaAttachmentActions","ReactComposerMediaAttachmentContainer.react","ReactComposerStatusActions","ReactComposerTaggerActions","gkx"],(function(a,b,c,d,e,f){__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactComposerMediaEagerAttachment",mixins:[b("ReactComposerAttachmentBodyMixin")()],propTypes:{config:b("ReactComposerConfig").isRequired,postButtonModule:a.func.isRequired},statics:{attachmentID:b("ReactComposerAttachmentType").MEDIA},UNSAFE_componentWillMount:function(){var a=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA].bootstrapData;b("ReactComposerStatusActions").setMentionsSource(this.context.composerID,a.mentionsSource);b("ReactComposerMediaAttachmentActions").setConfig(this.context.composerID,a);b("ReactComposerAttachmentActions").setInitialized(this.context.composerID,b("ReactComposerAttachmentType").MEDIA);b("gkx")("AT7rNDDdaqbNsNKVWAB2srntBC9kKTH71mtXESBBj2RChibXb3-wXs1S24n11evPW74QN4P34-lCxfKFpDx7_2p-")&&b("ReactComposerTaggerActions").updateTaggersSource(this.context.composerID,this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA].bootstrapData.taggersSource)},componentDidMount:function(){b("gkx")("AT7rNDDdaqbNsNKVWAB2srntBC9kKTH71mtXESBBj2RChibXb3-wXs1S24n11evPW74QN4P34-lCxfKFpDx7_2p-")||b("ReactComposerTaggerActions").updateTaggersSource(this.context.composerID,this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA].bootstrapData.taggersSource)},renderX:function(){return b("React").createElement(b("ReactComposerMediaAttachmentContainer.react"),this.props)}});e.exports=c}),null);
__d("ReactComposerMediaPostButtonContainerMixin",["React","ReactComponentWithPureRenderMixin","ReactComposerActions","ReactComposerAttachmentType","ReactComposerConfig","ReactComposerConstants","ReactComposerContextTypes","ReactComposerInit","ReactComposerMediaAttachmentPostButton.react","ReactComposerMediaUploadStore","ReactComposerOptimisticPostingActions","ReactComposerPhotoStore","ReactComposerPostUtils","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerStore","ReactComposerVideoUploadStore","ReloadPage","$","debounce"],(function(a,b,c,d,e,f){__p&&__p();a=b("React").PropTypes;c={contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComposerPropsAndStoreBasedStateMixin")(b("ReactComposerMediaUploadStore"),b("ReactComposerPhotoStore"),b("ReactComposerStore"),b("ReactComposerVideoUploadStore")),b("ReactComponentWithPureRenderMixin")],propTypes:{config:b("ReactComposerConfig").isRequired,onClickPreprocess:a.func,label:a.string,forceDisabled:a.bool,useDefaultScheduleComponent:a.bool},statics:{calculateState:function(a,c,d){var e=c.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA],f=b("ReactComposerPhotoStore").isLimitExceeded(a,e.photoLimit),g=d.gks[b("ReactComposerConstants").GK_VIDEO_COPYRIGHT]&&!!b("ReactComposerVideoUploadStore").getVideo(a),h=b("ReactComposerVideoUploadStore").getVideo(a)&&b("ReactComposerStore").isPosting(a),i=b("ReactComposerPhotoStore").isSphericalPhotoUpdating(a);i=b("ReactComposerMediaUploadStore").isUploading(a)||b("ReactComposerPhotoStore").isRecognizing(a)||i||h;h=d.gks.optimisticPosting?f:b("ReactComposerPostUtils").isPostButtonDisabled(a,e.photoLimit);return{limitExceeded:f,isUploading:i,disabled:c.forceDisabled||h,showCopyrightDialogOnPost:g}}},render:function(){var a=this.props.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA].photoLimit;return b("React").createElement(b("ReactComposerMediaAttachmentPostButton.react"),{className:this.props.className,disabled:this.state.disabled,limitExceeded:this.state.limitExceeded,onClick:b("debounce")(this._onClick),photoLimit:a,showCopyrightDialogOnPost:this.state.showCopyrightDialogOnPost,config:this.props.config,label:this.props.label,useDefaultScheduleComponent:this.props.useDefaultScheduleComponent})},_onClick:function(){if(this.props.onClickPreprocess&&!this.props.onClickPreprocess())return;this.context.gks.optimisticPosting?this.state.isUploading?b("ReactComposerOptimisticPostingActions").startOptimisticallyPosting(this.context.composerID,this.props.config,b("ReactComposerAttachmentType").MEDIA,this.context.actorID,this.context.targetID):this._startPost():this._startPost()},_startPost:function(){b("ReactComposerActions").postStarted(this.context.composerID,{actorID:this.context.actorID,config:this.props.config,targetID:this.context.targetID}),this.props.config.dialogComposer&&(b("ReactComposerInit").unmountInstance(this.context.composerID),b("$")(this.props.config.dialogElementID).remove(),b("ReloadPage").now())}};e.exports=c}),null);