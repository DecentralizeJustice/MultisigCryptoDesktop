if (self.CavalryLogger) { CavalryLogger.start_js(["JAfBf"]); }

__d("TrendingRHCLogger",["csx","BanzaiScuba","CSS","Event","Parent","Run","TrendingRHCConfig"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i,j,k;function l(a,c,d,e){__p&&__p();var f=new(b("BanzaiScuba"))("trending_rhc",null,{sampleRate:b("TrendingRHCConfig").sample_rate});f.addNormal("country",k);f.addNormal("post_search_trending_feeds",b("TrendingRHCConfig").post_search_trending_feeds);f.addNormal("event",c);f.addNormal("position",a);f.addNormal("qe_group",h);f.addNormal("source",i);f.addNormVector("categories",d);f.addNormal("topic_id",e);f.post()}function m(a,b){var c=a.getAttribute("data-position");if(!c)return;var d=a.getAttribute("data-categories");d=d?JSON.parse(d):[];a=a.getAttribute("data-topicid");l(c,b,d,a)}function n(event){var a=null,c=event.getTarget(),d=b("Parent").bySelector(event.getTarget(),"._2w2e");d?c=d:b("CSS").matchesSelector(c,"._5my2")||(a=b("Parent").bySelector(c,"._4_nl"),c=b("Parent").bySelector(c,"._5my2"));if(!c||a||b("CSS").matchesSelector(event.getTarget(),"._19_3")||b("CSS").matchesSelector(event.getTarget(),"._4v8h"))return;m(c,"click")}a={init:function(a,c){i=c.source;h=c.qe_group;k=c.country;c.hidden_keys;j=c.query_id;c.hidden_scores;var d=b("Event").listen(a,"click",n);b("Run").onLeave(function(){d.remove()})},logHovercardArticleClick:function(a,b){l(a,"hover_article_click",null,b)},logHovercardFeedClick:function(a,b){l(a,"hover_feed_click",null,b)},logHovercardShare:function(a,b){l(a,"topic_share",null,b)},logImpression:function(a){m(a,"imp")},getSource:function(){return i},getQueryID:function(){return j}};e.exports=a}),null);
__d("TrendingCategoryConstants",[],(function(a,b,c,d,e,f){e.exports={ANIMATION_EVENTS:["webkitAnimationEnd","animationend","mozAnimationEnd","oAnimationEnd","MSAnimationEnd"],FAILSAFE_LIMIT:50,HEADLINE_TEXT_HEIGHT:32}}),null);
__d("TrendingHeadlineTruncation",["cx","csx","CSS","DOM","TrendingCategoryConstants","getElementText","BanzaiODS","setImmediate"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a={truncate:function(a){__p&&__p();a=b("DOM").scry(a,"._5v9v");a.forEach(function(a){__p&&__p();var c=0,d="\u2026";b("setImmediate")(function(){__p&&__p();var e=b("DOM").scry(a,"._3-9y")[0];if(e==null)return;b("CSS").addClass(a,"_5ooc");while(this._isHeadlineOverflowing(a)){var f=b("getElementText")(e);f=f.split(" ");f=f.filter(function(a){return a!=""});f.pop();f=f.join(" ");f+=d;b("DOM").setContent(e,f);c++;if(c>=b("TrendingCategoryConstants").FAILSAFE_LIMIT){b("BanzaiODS").bumpEntityKey("trending_rhc","truncate_failure");break}}b("CSS").removeClass(a,"_5ooc")}.bind(this))}.bind(this))},_isHeadlineOverflowing:function(a){return a.scrollHeight>b("TrendingCategoryConstants").HEADLINE_TEXT_HEIGHT}};e.exports=a}),null);
__d("TrendingHideReasons",["fbt","immutable"],(function(a,b,c,d,e,f,g){a=b("immutable").OrderedMap;c=a({5:g._("I want to see something else"),1:g._("I don't care about this"),2:g._("I keep seeing this"),3:g._("It's offensive or inappropriate"),4:g._("Other")});e.exports=c}),null);
__d("TrendingTopicHideMenu.react",["cx","ix","fbt","Image.react","ImageBlock.react","InputLabel.react","LeftRight.react","Link.react","React","TrendingHideReasons","XUIRadioInput.react","XUIText.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=b("React").PropTypes;j=babelHelpers.inherits(a,b("React").Component);j&&j.prototype;a.prototype.render=function(){var a=this.props.suppressXOutReasons?b("React").createElement("div",null):b("React").createElement("div",null,this.$1(),this.$2());return b("React").createElement(b("ImageBlock.react"),{className:"_4_nl",spacing:"none"},b("React").createElement(b("Image.react"),{className:"_19_0",src:h("97459")}),b("React").createElement("div",null,this.$3(),a))};a.prototype.$3=function(){return b("React").createElement(b("LeftRight.react"),null,b("React").createElement(b("XUIText.react"),{weight:"bold"},i._("Topic Hidden")),b("React").createElement(b("Link.react"),{className:"_4_nn"},i._("Undo")))};a.prototype.$1=function(){return b("React").createElement("div",{className:"_3-95"},i._("We'll try not to show you this topic again."))};a.prototype.$2=function(){return b("React").createElement("form",{action:"#",className:"_3-94"},b("React").createElement("div",{className:"_3-94"},i._("Why did you hide it?")),b("TrendingHideReasons").map(function(a,c){return b("React").createElement(b("InputLabel.react"),{key:c,label:a},b("React").createElement(b("XUIRadioInput.react"),{className:"_2p3m",name:"trending_hide_reason",value:c,"data-topicid":this.props.topicId}))}.bind(this)).toArray())};function a(){j.apply(this,arguments)}a.propTypes={topicId:c.number.isRequired,category:c.number.isRequired,suppressXOutReasons:c.bool.isRequired};e.exports=a}),null);
__d("TrendingCategoriesIconUnitCallback",[],(function(a,b,c,d,e,f){var g=null;a={register:function(a){g=a},callback:function(a,b){g.setCategoryList(a,b)}};e.exports=a}),null);
__d("XPubcontentTrendingCategoriesFetchListController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pubcontent/trending/categories/fetch_list/",{category:{type:"Enum",required:!0,enumType:0},source:{type:"String",required:!0},topic_ids_seen:{type:"IntVector",required:!0}})}),null);
__d("XPubcontentTrendingReplaceTrendsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pubcontent/trending/trending_unit/",{is_expanded:{type:"Bool",defaultValue:!1},allow_carded:{type:"Bool",defaultValue:!1}})}),null);
__d("TrendingCategoriesIconUnit",["AsyncRequest","CSS","Event","Style","TrendingCategoriesIconUnitCallback","XPubcontentTrendingCategoriesFetchListController","XPubcontentTrendingReplaceTrendsController","enumerate","tidyEvent"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";__p&&__p();this.$1=a.categoryIconMap;this.$2=a.categoryListMap;this.$3=a.categoryHeaderMap;this.$4=a.loadingBar;this.$5=a.selectedCategoryId;this.$6=a.selectedCategoryId;this.$7=a.source;this.$8=a.enableIconSeeMore;this.$9=[];var c=this.$2[this.$5];this.$10=c?c.getHeight():0;this.$11=a.isExpanded;b("TrendingCategoriesIconUnitCallback").register(this);for(var c=b("enumerate")(this.$1),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;f=f[1];this.$12(f)}this.$13(a.refreshSeconds,a.isExpanded)}a.prototype.setCategoryList=function(a,c){"use strict";this.$2[c]=a,c===this.$5&&(this.$4&&b("CSS").hide(this.$4),this.$2[c].showItems(),this.$10=this.$2[c].getHeight())};a.prototype.$12=function(a){"use strict";__p&&__p();var c=a.getCategoryId();b("tidyEvent")(b("Event").listen(a.getRoot(),"click",function(event){__p&&__p();var a=c===this.$6&&this.$8&&!this.$11;if(a){if(c===this.$5)return;this.$2[c].fetchExtraItems()}if(c===this.$5)return;this.$1[this.$5].unselect();this.$2[this.$5]&&(this.$10=this.$2[this.$5].getHeight(),this.$2[this.$5].hideItems());this.$1[c].select();this.$5=c;if(this.$2[c]){this.$4&&b("CSS").hide(this.$4);this.$2[c].showItems();this.$10=this.$2[c].getHeight();return}b("Style").set(this.$4,"height",String(this.$10));b("CSS").show(this.$4);if(this.$9[c])return;this.$9[c]=!0;a=this.$2[this.$6];a=a.getCategoryItemInfo();a=b("XPubcontentTrendingCategoriesFetchListController").getURIBuilder().setEnum("category",c).setString("source",this.$7).setIntVector("topic_ids_seen",a.visibleTopicIds).getURI();new(b("AsyncRequest"))().setURI(a).send()}.bind(this)))};a.prototype.$13=function(a,c){"use strict";a=a*1e3;setTimeout(function(){var a=b("XPubcontentTrendingReplaceTrendsController").getURIBuilder().setBool("is_expanded",c).setBool("allow_carded",!0).getURI();new(b("AsyncRequest"))(a).send()},a)};e.exports=a}),null);
__d("XPubcontentTrendingCategoriesInsertItemController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pubcontent/trending/categories/hide_options/",{num_removed_topics:{type:"Int",defaultValue:0},trending_topic_id:{type:"Int",required:!0},topic_ids:{type:"IntVector",defaultValue:[]},impression_guid:{type:"String"},category:{type:"Enum",required:!0,enumType:0}})}),null);
__d("XPubcontentTrendingHideConfirmController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pubcontent/trending/hide_confirm/",{hidden_topic_id:{type:"Int",required:!0},position:{type:"Int",defaultValue:0},reason:{type:"Int",required:!0},source:{type:"String"},trqid:{type:"Int",defaultValue:-1}})}),null);
__d("TrendingCategoriesRHCHide",["csx","cx","AsyncRequest","CSS","DOM","DOMQuery","Event","immutable","Parent","React","ReactDOM","TrendingRHCLogger","TrendingTopicHideMenu.react","URI","XPubcontentTrendingCategoriesInsertItemController","XPubcontentTrendingHideConfirmController","tidyEvent"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=[],j=[],k=!1,l=b("immutable").Map([]),m=["webkitAnimationEnd","animationend","mozAnimationEnd","oAnimationEnd","MSAnimationEnd"];function n(a,c){__p&&__p();a=b("DOMQuery").scry(a,"._5my2");a=a.filter(function(a){a=Number(a.getAttribute("data-position"));return a>=c});var d=[];a.forEach(function(a){var c=Number(a.getAttribute("data-position"));a.setAttribute("data-position",c-1);var e=b("DOMQuery").scry(a,"._7ge");e.length===0&&(e=b("DOMQuery").scry(a,"._5__u"));e.forEach(function(a){var e=new(b("URI"))(a.getAttribute("href")).addQueryData("position",c-1);d.push({link:a,uri:e.toString(),position:c-1})})});d.forEach(function(a){var c=a.link;c.setAttribute("href",a.uri);c=b("DOMQuery").scry(c,"._25ua");c.length>0&&b("DOM").setContent(c[0],a.position.toString())})}function o(a,c,d){__p&&__p();var e=arguments.length<=3||arguments[3]===undefined?!1:arguments[3],f=b("DOMQuery").find(a,"^._2snq"),g=b("DOMQuery").find(a,"^._5my2"),h=e?"_y-h":"_4_nj",j=b("DOM").create("div",{className:h}),k=Number(g.getAttribute("data-position"));e?(function(){__p&&__p();var e=l.get(d);e==null&&(l=l.set(d,b("immutable").Map([])),e=l.get(d));var h=e.get(c),o=setTimeout(function(){n(f,k),i[d].removeItem(g),b("DOM").insertBefore(g,j),m.forEach(function(event){j.addEventListener(event,function(){b("CSS").removeClass(j,"_y-h")})})},3e3),p=b("DOM").scry(a,"._4_nn")[0];p!=null&&b("tidyEvent")(b("Event").listen(p,"click",function(){clearTimeout(o)}));if(!h){i[d].showExtraItem();p=e.set(c,!0);l=l.set(d,p)}})():(n(f,k),i[d].showExtraItem(),i[d].removeItem(g),b("DOM").insertBefore(g,j),m.forEach(function(event){j.addEventListener(event,function(){b("CSS").removeClass(j,"_4_nj")})}));var o=void 0,p=a.firstChild;if(p==null||!(p instanceof HTMLInputElement))if(e)o=6;else return;else o=p.value;var q=b("XPubcontentTrendingHideConfirmController").getURIBuilder().setInt("reason",o).setInt("hidden_topic_id",c).setInt("position",k);b("TrendingRHCLogger").getSource()&&q.setString("source",b("TrendingRHCLogger").getSource());b("TrendingRHCLogger").getQueryID()&&q.setInt("trqid",b("TrendingRHCLogger").getQueryID());var r=q.getURI();new(b("AsyncRequest"))().setURI(r).setRelativeTo(a).send()}a={addCategoryList:function(a,b){i[b]=a},confirmHide:function(a,c,d){var e=!1;b("tidyEvent")(b("Event").listen(a,"click",function(){setTimeout(function(){if(e)return;e=!0;o(a,c,d)},100)}))},onHideReasonClicked:function(a,c){var d=b("DOMQuery").find(a,'input[name="trending_hide_reason"]'),e=parseInt(d.getAttribute("data-topicid"),10);if(j[e])return;j[e]=!0;setTimeout(function(){o(a,e,c),j[e]=!1},100)},onHideClicked:function(a,c){__p&&__p();var d=arguments.length<=2||arguments[2]===undefined?!1:arguments[2],e=parseInt(a.getAttribute("data-topicid"),10),f=a.getAttribute("data-impressionguid"),g=b("DOMQuery").find(a,"^._5my2"),h=b("DOM").scry(g,"._4_nl")[0],j=b("DOMQuery").find(g,"._4_nm");b("CSS").hide(j);if(h!=null)b("CSS").show(h);else{var l=b("DOM").create("div");b("ReactDOM").render(b("React").createElement(b("TrendingTopicHideMenu.react"),{topicId:e,category:c,suppressXOutReasons:d}),l);b("DOM").appendContent(g,l)}if(!k){if(i[c]==null)return;k=!0;var m=i[c].getCategoryItemInfo(),n=m.visibleTopicIds.concat(m.hiddenTopicIds,m.removedTopicIds),p=m.removedTopicIds.length;if(d){var q=b("DOM").scry(g,"._4_nl")[0];q instanceof HTMLElement&&o(q,e,c,d)}var r=b("XPubcontentTrendingCategoriesInsertItemController").getURIBuilder().setInt("trending_topic_id",e).setIntVector("topic_ids",n).setInt("num_removed_topics",p).setEnum("category",c).setString("impression_guid",f).getURI();new(b("AsyncRequest"))().setURI(r).setRelativeTo(a).setHandler(function(a){k=!1,i[c].addTopics(a.getPayload())}).send()}},onHideMenuUndoClicked:function(a,c){c=b("DOMQuery").find(a,"^._4_nl");a=b("DOMQuery").find(c,"^._5my2 ._4_nm");b("CSS").hide(c);b("CSS").show(a)},hideSeeMoreLink:function(a,c){c=i[c].getCategoryItemInfo();if(c.hiddenTopicIds.length!==0)return;c=b("Parent").bySelector(a,"._5my7");a=b("DOMQuery").scry(c,"a._5my9");a&&a.length===1&&b("CSS").shown(a[0])&&b("CSS").addClass(a[0],"_4_nk")}};e.exports=a}),null);
__d("TrendingEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TAG_IMPRESSION:"tag_impression",TAG_FEED_LOAD:"tag_feed_load",TAG_FEED_LONG_VIEW:"tag_feed_long_view",TAG_HIDE:"tag_hide",TOPIC_HEADER_TAPPED:"topic_header_tapped",HOVERCARD_LOAD:"hovercard_load",HOVERCARD_UNLOAD:"hovercard_unload",HOVERCARD_ARTICLE_CLICK:"hovercard_article_click",HOVERCARD_FEED_CLICK:"hovercard_feed_click",HOVERCARD_CONTEXT_CLICK:"hovercard_context_click",OBJECT_CLICK:"object_click",OBJECT_OUTBOUND_CLICK:"object_outbound_click",OBJECT_LIKE:"object_like",OBJECT_COMMENT:"object_comment",OBJECT_SHARE:"object_share",OBJECT_PAGE_LIKE:"object_page_like",OBJECT_FOLLOW:"object_follow",OBJECT_HIDE:"object_hide",PAGINATE:"paginate",TOPIC_SHARE:"topic_share",CATEGORY_HEADER_CLICKED:"category_header_clicked",HOVERCARD_VIDEO_PLAYED:"hovercard_video_played",CLICK_TAG_IMPRESSION:"click_tag_impression"})}),null);
__d("TrendingCategoryIcon",["cx","BanzaiLogger","CSS","TrendingEvent"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a,b){"use strict";this.$1=a,this.$2=b.iconElement,this.$4=b.unselectedClass,this.$5=b.selectedClass,this.$6=b.categoryId,this.$7=b.categoryLoggingOffset,this.$8=parseInt(b.queryId,10),this.$9=b.source}a.prototype.getRoot=function(){"use strict";return this.$1};a.prototype.getCategoryId=function(){"use strict";return this.$6};a.prototype.select=function(){"use strict";b("CSS").addClass(this.$1,"_5nns"),b("CSS").addClass(this.$2,this.$5),b("CSS").removeClass(this.$2,this.$4),this.$1.setAttribute("aria-selected","true"),this.$1.focus(),this.$10()};a.prototype.unselect=function(){"use strict";b("CSS").removeClass(this.$1,"_5nns"),b("CSS").addClass(this.$2,this.$4),b("CSS").removeClass(this.$2,this.$5),this.$1.setAttribute("aria-selected","false")};a.prototype.$10=function(){"use strict";var a={trending_event:b("TrendingEvent").CATEGORY_HEADER_CLICKED,trending_location:this.$9,trending_positions:[this.$7],query_id:this.$8,tagids:[]};b("BanzaiLogger").log("TrendingEventLoggerConfig",a)};e.exports=a}),null);
__d("TrendingLocation",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FBFEED_TOPIC_PIVOT:"ftp",FBFEED_TRENDING_TOPIC_PIVOT:"fttp",IOS_TRENDING_DASHBOARD_IN_BOOKMARK:"ios_trending_dashboard_in_bookmark",IOS_TRENDING_INTERSTITIAL:"ios_trending_interstitial",MSITE_PERMALINK:"mp",MSITE_QP:"mq",MSITE_HASHTAG_REDIRECTION:"mhr",MSITE_CARD_PIVOT:"mcp",MSITE_FEED_TOPIC_PIVOT:"mftp",MSITE_FEED_TRENDING_TOPIC_PIVOT:"mfttp",MSITE_NEWS_DASHBOARD:"mnd",MSITE_NEWS_MODULE:"mnm",MSITE_LIVE_EVENT:"mle",MSITE_PAGE_REDIRECTION:"mpr",MSITE_RELATED_TOPICS:"mrt",MSITE_ADS:"ma",MSITE_SEARCH_SPORT_MATCH_MODULE:"mssmm",WEB_FEED_TOPIC_PIVOT:"wftp",WEB_FEED_TRENDING_TOPIC_PIVOT:"wfttp",OLD_FEED_TOPIC_PIVOT:"oftp",OLD_FEED_TRENDING_TOPIC_PIVOT:"ofttp",WWW_PERMALINK:"wp",WWW_QP:"wq",WWW_HASHTAG_REDIRECTION:"whr",WWW_HIDDEN_RHC_TRENDING:"whrt",WWW_HOME_FEED_RHC_TRENDING:"whfrt",WWW_HOME_FEED_RHC_TRENDING_PLACES:"whfrtp",WWW_POST_LIKE_TOPIC_CHAINING:"wpltc",WWW_TOPIC_FEED_RHC_TRENDING:"wtfrt",WWW_POST_SEARCH_RHC_TRENDING:"wpsrt",WWW_PAGE_FEED_RHC_TRENDING:"wpfrt",WWW_BROWSE_RHC_TRENDING:"wbrt",WWW_BROWSE_LATEST_POSTS_TAB:"wblpt",WWW_WORLDCUP_RHC_TRENDING:"wwcrt",WWW_LIVE_EVENT:"wle",WWW_PAGE_REDIRECTION:"wpr",WWW_ADS:"wa",WWW_SEARCH_SPORT_MATCH_MODULE:"wssmm",WWW_NEWS:"wnews",UNKNOWN:"unknown",FBFEED_SENTIMENT_UNIT_PIVOT:"fsup",IOS_SIDEFEED:"ios_sidefeed",WWW_SEARCH_SPORT_ANSWER_MODULE:"wssam",IOS_NEWS_FEED:"ios_news_feed",MTOUCH_NEWS_FEED:"mtouch_news_feed",ANDROID_NULL_STATE:"android_null_state",IOS_GRAPH_SEARCH_NULL_STATE:"ios_graph_search_null_state",MSITE_NEWS_NON_GS_NULL_STATE:"mnngns",MSITE_NEWS_NULL_STATE:"mnns",MSITE_LATEST_POSTS_TAB:"mlpt",WWW_NULL_STATE:"www_null_state",SEARCH_TRENDING_MODULE:"stm",IOS_TODAY_MAIN:"ios_today_main",IOS_TODAY_SEE_MORE:"ios_today_see_more",IOS_STORY_TOPIC_HEADER:"ios_story_topic_header",TOPIC_SHARE:"share",TOPIC_MOBILE_SHARE:"mobile_share",EMAIL_DIGEST:"email_digest",AYMT:"aymt",GROUP_DISCOVERY:"group_discovery",NEWS_FEED_CARD:"news_feed_card",DISCOVERY_FEED:"discovery_feed",END_OF_FEED:"end_of_feed",CRISIS_RESPONSE:"crisis_response",MESSENGER_BOT:"messenger_bot",BREAKING_NEWS_CONSOLE:"breaking_news_console",FAIR_NEWS_BOT:"fair_news_bot",NETEGO:"netego",NEWS_ENTRY_FETCHER:"news_entry_fetcher",NOTIF_GENERATOR:"notif_generator",NEWS_BRIEFING:"news_briefing",PERSONAL_PYML:"peronsal_pyml",PYML:"pyml",DISCOVER_TOPIC_GENERATOR:"discover_topic_generator",ASSISTANT_NEWS_AGENT:"assistant_news_agent",STREAM_NEWS_DIGEST:"stream_news_digest",TRENDING_SUGGESTION_FETCHER:"trending_suggestion_fetcher",CONNECTED_TV_DAILY_DIGEST:"connected_tv_daily_digest",VIDEO_HOME_TOP_VIDEOS:"video_home_top_videos"})}),null);
__d("XPubcontentTrendingCategoriesImpressionLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pubcontent/trending/categories/log_impression/",{topic_ids_by_position:{type:"IntToIntMap",required:!0},source:{type:"String",required:!0},query_id:{type:"Int",defaultValue:0}})}),null);
__d("XPubcontentTrendingCategoriesSeeMoreController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pubcontent/trending/categories/see_more/",{topic_ids_seen:{type:"IntVector",defaultValue:[]},num_topics_to_add:{type:"Int",required:!0},num_removed_topics:{type:"Int",defaultValue:0},impression_guid:{type:"String"},category:{type:"Enum",required:!0,enumType:0}})}),null);
__d("TrendingCategoryList",["csx","cx","Arbiter","AsyncRequest","BanzaiODS","CSS","DOM","Event","Parent","TrendingCategoriesRHCHide","TrendingCategoryConstants","TrendingLocation","XPubcontentTrendingCategoriesImpressionLoggingController","XPubcontentTrendingCategoriesSeeMoreController","TrendingHeadlineTruncation","getElementText","getStyleProperty","setImmediate","tidyEvent"],(function(a,b,c,d,e,f,g,h){__p&&__p();function a(a,c,d,e,f){"use strict";this.$1=a,this.$2=c,this.$3=e,this.$4=f,this.$5=d.category,this.$6=d.rowsAfterSeeMore,this.$9=d.source,this.$7=d.queryId,this.$8=!1,this.$10=d.truncateHeadlinesWithAttribution,this.$11=d.suppressXOutReasons||!1,this.$12=d.truncateWithCallForDisplay||!1,this.$13=d.impressionGuid,b("TrendingCategoriesRHCHide").addCategoryList(this,this.$5),d.useDelegateListener&&this.$14(),this.$15(),this.$10&&this.$16()}a.prototype.showItems=function(){"use strict";b("CSS").show(this.$1),b("Arbiter").inform("netego_loaded")};a.prototype.hideItems=function(){"use strict";b("CSS").hide(this.$1)};a.prototype.getHeight=function(){"use strict";return b("getStyleProperty")(this.$1,"height")};a.prototype.getCategoryItemInfo=function(){"use strict";var a=[],c=[],d=[],e=[],f=[];b("DOM").scry(this.$1,"._5my2").forEach(function(g){if(b("CSS").matchesSelector(g,"._5my9")||b("CSS").matchesSelector(g,"._5otw")||b("CSS").matchesSelector(g,"._4fr3")||b("CSS").matchesSelector(g,"._4fr4")||b("CSS").matchesSelector(g,"._njp"))return;var h=Number(g.getAttribute("data-topicid")),i=Number(g.getAttribute("data-position"));b("CSS").matchesSelector(g,"._338c")?f.push(h):b("CSS").matchesSelector(g,"._5my1")?(d.push(h),e.push(i)):(a.push(h),c.push(i))});return{visibleTopicIds:a,visiblePositions:c,hiddenTopicIds:d,hiddenPositions:e,removedTopicIds:f}};a.prototype.showExtraItem=function(){__p&&__p();var a=this,c=b("DOM").scry(this.$1,"._5my1");if(c.length===0)return;var d=Number.MAX_VALUE,e=null;c.forEach(function(a){var b=parseInt(a.getAttribute("data-position"),10);b<d&&(e=a,d=b)});e!==null&&(function(){var c=e;b("CSS").removeClass(c,"_5my1");b("CSS").addClass(c,"_4_ni");b("CSS").show(c);b("TrendingCategoryConstants").ANIMATION_EVENTS.forEach(function(event){c.addEventListener(event,function(){b("CSS").removeClass(c,"_4_ni")})});a.$17([Number(c.getAttribute("data-topicid"))],[Number(c.getAttribute("data-position"))],b("TrendingLocation").WWW_HIDDEN_RHC_TRENDING)})()};a.prototype.removeItem=function(a){"use strict";b("CSS").addClass(a,"_338c"),b("CSS").hide(a)};a.prototype.fetchExtraItems=function(){"use strict";__p&&__p();if(this.$8)return;this.$8=!0;this.$2&&b("CSS").hide(this.$2);var a=this.getCategoryItemInfo(),c=this.$6-a.hiddenTopicIds.length;if(c<=0){this.$18();b("Arbiter").inform("netego_loaded");return}var d=b("DOM").scry(this.$1,"._30_w")[0];d!=null&&b("CSS").show(d);var e=a.visibleTopicIds.concat(a.hiddenTopicIds,a.removedTopicIds);e=b("XPubcontentTrendingCategoriesSeeMoreController").getURIBuilder().setIntVector("topic_ids_seen",e).setInt("num_topics_to_add",c).setInt("num_removed_topics",a.removedTopicIds.length).setString("impression_guid",this.$13).setEnum("category",this.$5).getURI();new(b("AsyncRequest"))().setURI(e).setRelativeTo(this.$1).setHandler(function(a){d!=null&&b("CSS").hide(d),this.addTopics(a.getPayload()),this.$18(),this.$3&&this.$19(),b("Arbiter").inform("netego_loaded")}.bind(this)).send()};a.prototype.addTopics=function(a){"use strict";if(a==null)return;this.$20(a);this.$10&&b("setImmediate")(function(){return this.$16()}.bind(this));this.$12&&b("setImmediate")(function(){return b("TrendingHeadlineTruncation").truncate(this.$1)}.bind(this))};a.prototype.$20=function(a){"use strict";var c=b("DOM").scry(this.$1,"._5myl")[0];c!=null&&b("DOM").appendContent(c,a)};a.prototype.$14=function(){"use strict";__p&&__p();b("tidyEvent")(b("Event").listen(this.$1,"click",function(event){__p&&__p();var a=event.target;if(!(a instanceof HTMLElement))return;if(b("CSS").matchesSelector(a,"._19_3")){var c=b("DOM").find(a,"._4v8h");b("TrendingCategoriesRHCHide").onHideClicked(c,this.$5,this.$11);return}else if(b("CSS").matchesSelector(a,"._4v8h")){b("TrendingCategoriesRHCHide").onHideClicked(a,this.$5,this.$11);return}c=b("Parent").bySelector(a,"._2p3m");if(c instanceof HTMLElement){b("TrendingCategoriesRHCHide").onHideReasonClicked(c,this.$5);return}c=b("Parent").bySelector(a,"._4_nn");if(c instanceof HTMLElement){b("TrendingCategoriesRHCHide").onHideMenuUndoClicked(c,this.$5);return}}.bind(this)))};a.prototype.$19=function(){"use strict";this.$3&&b("CSS").hide(this.$3),this.$4&&b("CSS").show(this.$4)};a.prototype.$15=function(){"use strict";if(this.$2==null)return;b("tidyEvent")(b("Event").listen(this.$2,"click",function(){this.$2&&b("CSS").hide(this.$2),this.fetchExtraItems()}.bind(this)))};a.prototype.$18=function(){"use strict";var a=b("DOM").scry(this.$1,"._5my1");if(a.length===0)return;var c=Math.min(this.$6,a.length),d=[],e=[];for(var f=0;f<c;f++)b("CSS").show(a[f]),b("CSS").removeClass(a[f],"_5my1"),d.push(Number(a[f].getAttribute("data-topicid"))),e.push(Number(a[f].getAttribute("data-position")));this.$17(d,e,b("TrendingLocation").WWW_HIDDEN_RHC_TRENDING)};a.prototype.$17=function(a,c,d){"use strict";if(a.length===0)return;var e={};for(var f=0;f<a.length;f++)e[c[f]]=a[f];f=b("XPubcontentTrendingCategoriesImpressionLoggingController").getURIBuilder().setIntToIntMap("topic_ids_by_position",e).setString("source",d).setInt("query_id",this.$7).getURI();new(b("AsyncRequest"))(f).send()};a.prototype.$16=function(){"use strict";__p&&__p();var a=b("DOM").scry(this.$1,"._5v9v");a.forEach(function(a){__p&&__p();var c=0,d="\u2026";b("setImmediate")(function(){__p&&__p();var e=b("DOM").scry(a,"._3-9y")[0];if(e==null)return;b("CSS").addClass(a,"_5ooc");while(this.$21(a)){var f=b("getElementText")(e);f=f.split(" ");f=f.filter(function(a){return a!=""});f.pop();f=f.join(" ");f+=d;b("DOM").setContent(e,f);c++;if(c>=b("TrendingCategoryConstants").FAILSAFE_LIMIT){b("BanzaiODS").bumpEntityKey("trending_rhc","truncate_failure");break}}b("CSS").removeClass(a,"_5ooc")}.bind(this))}.bind(this))};a.prototype.$21=function(a){"use strict";return a.scrollHeight>b("TrendingCategoryConstants").HEADLINE_TEXT_HEIGHT};e.exports=a}),null);